(this["webpackJsonpaos-task-view"]=this["webpackJsonpaos-task-view"]||[]).push([[0],{240:function(e,t,a){e.exports=a.p+"static/media/user.5d75554d.jpg"},382:function(e,t,a){},446:function(e){e.exports=JSON.parse('{"copiedToClipboard":"Copied to clipboard","markComplete":"Mark Complete","markIncomplete":"Mark Incomplete","completed":"Completed","deleteTask":"Delete Task","cancel":"Cancel","confirm":"Confirm","delete":"Delete","taskDeleted":"This task is deleted","undelete":"Undelete","deletePermenantly":"Delete Permanently","makeSubtask":"Make this task a subtask of another project task","parentTask":"Parent Task","loadMore":"Load more","findTask":"Find a task","subject":"Subject","project":"Project","assignedTo":"Assigned To","status":"Status","priority":"Priority","category":"Category","progress":"Progress","tags":"Tags","taskDate":"Task date","taskEnd":"Task end","description":"Description","attachments":"Attachments","subTasks":"Sub Tasks","addSubtask":"Add Subtask","add":"Add","comment":"Comment","convertTaskToProject":"Convert Task to Project","projectName":"Project name","taskDescriptionAsProjectDescription":"Task Description as Project Description","include":"Include","taskUserAsProjectMembers":"Task User as Project Members","convert":"Convert","duplicateTask":"Duplicate Task","createNewTask":"Create New Task","fullScreen":"Full screen","addTags":"Add tags","makeSubTaskOf":"Make a subtask of","print":"Print","convertToProject":"Convert to project","printedFromAOP":"Printed from Axelor open platform","dueDate":"Due Date","download":"Download","ok":"Ok","section":"Section","viewDetails":"View details","copyTaskLink":"Copy task link","copyTaskName":"Copy task name","details":"Details","justMyTasks":"Just my tasks","dueThisWeek":"Due this week","dueNextWeek":"Due next week","addTask":"Add Task","addSection":"Add Section","taskName":"Task Name","incompleteTasks":"Incomplete tasks","allTasks":"All tasks","completedTasks":"Completed tasks","allCompletedTasks":"All completed tasks","today":"Today","yesterday":"Yesterday","oneWeek":"1 week","twoWeeks":"2 weeks","threeWeeks":"3 weeks","none":"None","alphabetical":"Alphabetical","assignee":"Assignee","taskDescription":"Task Description","undo":"Undo"}')},447:function(e){e.exports=JSON.parse('{"copiedToClipboard":"Copi\xe9 dans le presse-papier","markComplete":"Passer \xe0 Termin\xe9","markIncomplete":"Passer \xe0 Non termin\xe9","completed":"Termin\xe9","deleteTask":"T\xe2che supprim\xe9e","cancel":"Annuler","confirm":"Confirmer","delete":"Supprimer","taskDeleted":"Cette t\xe2che a \xe9t\xe9 supprim\xe9e","undelete":"Annuler","deletePermenantly":"Supprimer d\xe9finitivement","makeSubtask":"Faire de cette t\xe2che une sous-t\xe2che d\'une autre t\xe2che du projet","parentTask":"T\xe2che parente","loadMore":"Afficher plus","findTask":"Rechercher une t\xe2che","subject":"Sujet","project":"Projet","assignedTo":"Assign\xe9 \xe0","status":"Statut","priority":"Priorit\xe9","category":"Cat\xe9gorie","progress":"Progession","tags":"Etiquettes","taskDate":"Date de la t\xe2che","taskEnd":"Date de fin de la t\xe2che","description":"Description","attachments":"Pi\xe8ces jointes","subTasks":"Sous t\xe2ches","addSubtask":"Ajouter une t\xe2che","add":"Ajouter","comment":"Commentaires","convertTaskToProject":"Convertir une t\xe2che en projet","projectName":"Nom du projet","taskDescriptionAsProjectDescription":"Description des t\xe2ches en tant que description de projet","include":"Inclure","taskUserAsProjectMembers":"Utilisateurs de la t\xe2che en tant que membres du projet","convert":"Convertir","duplicateTask":"Duppliquer la t\xe2che","createNewTask":"Cr\xe9er une nouvelle t\xe2che","fullScreen":"Plein \xe9cran","addTags":"Ajouter \xe9tiquettes","makeSubTaskOf":"Faire une sous t\xe2che de","print":"Imprimer","convertToProject":"Convertir en projet","printedFromAOP":"Imprimer \xe0 partir de Axelor Open platform","dueDate":"Date d\'\xe9ch\xe9ance","download":"T\xe9l\xe9charger","ok":"Ok","section":"Section","viewDetails":"Voir d\xe9tails","copyTaskLink":"Copier le lien de la t\xe2che","copyTaskName":"Copier le nom de la t\xe2che","details":"D\xe9tails","justMyTasks":"Mes t\xe2ches uniquement","dueThisWeek":"Pr\xe9vu pour cette semaine","dueNextWeek":"Pr\xe9vu pour la semaine prochaine","addTask":"Ajouter une t\xe2che","addSection":"Ajouter une section","taskName":"Nom de la t\xe2che","incompleteTasks":"T\xe2ches non termin\xe9es","allTasks":"Toutes les t\xe2ches","completedTasks":"T\xe2ches termin\xe9es","allCompletedTasks":"Toutes les t\xe2ches termin\xe9es","today":"Aujourd\'hui","yesterday":"Hier","oneWeek":"1 semaine","twoWeeks":"2 semaines","threeWeeks":"3 semaines","none":"Aucun","alphabetical":"Par ordre alphab\xe9tique","assignee":"Assign\xe9","taskDescription":"Description de la t\xe2che","undo":"Undo"}')},510:function(e,t,a){e.exports=a(809)},633:function(e,t){},635:function(e,t){},675:function(e,t){},676:function(e,t){},807:function(e,t,a){},808:function(e,t,a){},809:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(32),i=a.n(c),l=a(236),s=a(48),u=a(4),d=a(21),m=a(63),p=a(439),f=a.n(p),b=a(904),v=a(863),h=a(894),g=a(489),k=a(443),y=a.n(k),E=a(444),j=a.n(E),O=a(864),C=Object(m.b)({plugins:[].concat(Object(d.a)(Object(h.a)().plugins),[f()()])});function x(e){var t=e.direction,a=e.palette,c=e.children;Object(r.useEffect)((function(){t?document.body.dir=t:document.body.removeAttribute("dir")}));var i=function(e){var t=e.direction,a=void 0===t?"ltr":t,r=e.palette;return void 0===n&&(n=document.body.dir||document.dir),a=a||n,Object(g.a)({direction:a,layout:{cols:12},header:{height:64},palette:Object(u.a)({primary:y.a,secondary:j.a},r),typography:{useNextVariants:!0}})}({direction:t,palette:a});return o.a.createElement(b.b,{jss:C},o.a.createElement(v.a,{theme:i},o.a.createElement(O.a,null),c))}var S=a(154),w=a(867),T=a(445),N=a(490),I=a(446),D=a(447),P=N.a.createInstance();P.use(S.e).use(T.a).init({resources:{en:{translation:Object(u.a)({},I)},fr:{translation:Object(u.a)({},D)}},interpolation:{escapeValue:!1}});var F,M=function(e){var t=e.children;return o.a.createElement(w.a,{i18n:P},t)},z=a(9),B=a(8),A=a.n(B),L=a(16),H=a(35),R=a(24),V=a(29),W=a.n(V),q=a(22),Y=a.n(q),U=a(90),_=a.n(U),X=a(909),G=a(265),K=a(493),J=a(899),$=a(111),Q=a(902),Z=a(264),ee=a(121),te=a(175),ae=a(176),ne=a(328),re=a(327),oe=a(449),ce=a.n(oe),ie={};function le(e){var t=document.cookie||"";return t!==F&&(F=t,ie=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),ie[e]}var se=function(){function e(t,a){Object(te.a)(this,e),this.http=t,this.entity=a}return Object(ae.a)(e,[{key:"insert",value:function(e){return this.http.put("/ws/rest/"+this.entity,e)}},{key:"update",value:function(e){return this.http.post("/ws/rest/"+this.entity,e)}},{key:"delete",value:function(e){return this.http.delete("/ws/rest/"+this.entity+"/"+e)}},{key:"deleteAll",value:function(e){return this.http.post("/ws/rest/".concat(this.entity,"/removeAll"),{records:e.map((function(e){return{id:e.id,version:e.version}}))})}},{key:"fetch",value:function(e,t){return this.http.post("/ws/rest/"+this.entity+"/"+e+"/fetch",t)}},{key:"copy",value:function(e,t){return this.http.get("/ws/rest/"+this.entity+"/"+e+"/copy",t)}},{key:"details",value:function(e,t){return this.http.get("/ws/rest/"+this.entity+"/"+e+"/details?name="+t)}},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.http.post("/ws"+(this.entity?"/rest/".concat(this.entity):"")+"/search",e)}}]),e}(),ue=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.baseURL,n=void 0===a?"/":a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(te.a)(this,e),this.instance=ce.a.create({baseURL:n}),this.interceptor=r}return Object(ae.a)(e,[{key:"catchError",value:function(e){console.log("catch error",e),this.callback?this.callback(e):"".concat(e).includes("401")&&window.location.reload()}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,r=a.headers,o=void 0===r?{}:r,c=a.token,i=void 0===c||c,l=a.withCredentials,s=void 0===l||l,d=Object(u.a)(Object(u.a)({},i?{"X-CSRF-Token":le("CSRF-TOKEN")}:{}),n||Object.assign({},{accept:"application/json","x-requested-with":"XMLHttpRequest"},o,Object.keys(t).length?{"content-type":"application/json"}:{})),m=Object.assign({url:e,method:"POST",headers:d,data:"application/json"===d["content-type"]?JSON.stringify(t):t},a,{withCredentials:s});return"GET"!==m.method&&"HEAD"!==m.method||!m.data||delete m.data,this.instance(m)}},{key:"intercept",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},c=Object.assign({method:a,withCredentials:!0},o),i=function(){return t.request(e,n,c,r)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e5;return new Promise((function(t,a){setTimeout((function(){a(new Error("Request failed Timeout"))}),e)}))};return Promise.race([l(),i().then((function(e){return 401===e.status?t.catchError({logout:!0}):e.data}))]).catch(this.catchError.bind(this))}},{key:"get",value:function(e,t,a){return this.intercept(e,"GET",{},t,a)}},{key:"post",value:function(e,t,a){return this.intercept(e,"POST",t,a)}},{key:"patch",value:function(e,t,a){return this.intercept(e,"PATCH",t,a)}},{key:"put",value:function(e,t,a){return this.intercept(e,"PUT",t,a)}},{key:"delete",value:function(e,t){return this.intercept(e,"DELETE",{},t)}},{key:"head",value:function(e,t){return this.intercept(e,"HEAD",{},t)}},{key:"action",value:function(e,t){return this.intercept("/ws/action"+e,"POST",t)}},{key:"rest",value:function(e){return new se(this,e)}},{key:"login",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({},this.config||{},t);return this.request("/callback",{username:a.username,password:a.password},{token:!1}).then((function(t){var n=null;if(void 0===t)throw new Error("Failed To Connect !!");return t&&401===t.status?n=!1:t&&200===t.status&&(n=!0,e.config=a),n})).catch(this.catchError.bind(this))}},{key:"logout",value:function(){return this.get("/logout")}},{key:"info",value:function(){return this.get("/ws/app/info")}},{key:"checkInfo",value:function(){return this.request("/ws/app/info",{},{method:"GET"}).then((function(e){return e.data})).then((function(e){return{appUser:e,app:{name:e["application.name"],version:e["application.version"],description:e["application.description"]},user:{id:e["user.id"],code:e["user.login"],name:e["user.name"],language:e["user.lang"]||"en",email:e["user.login"],theme:e["user.theme"]||""}}}))}},{key:"upload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,c){var i=new XMLHttpRequest,l="".concat(e.instance.defaults.baseURL,"/ws/files/upload"),s=function(){return a["X-File-Id"]?e.intercept((function(){return e.delete("".concat(l,"/").concat(a["X-File-Id"]))})):Promise.resolve(!0)};i.open("POST",l,!0),Object.keys(a).forEach((function(e){i.setRequestHeader(e,a[e])})),i.withCredentials=!0,i.overrideMimeType("application/octet-stream"),i.setRequestHeader("Content-Type","application/octet-stream"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("X-CSRF-Token",le("CSRF-TOKEN")),i.onload=function(){n(100)},r.abort=function(){return i.abort(),s()},i.onreadystatechange=function(){if(4===i.readyState)switch(i.status){case 401:throw this.callbackInterceptor(),new Error("Unauthorized !!");case 200:try{var e=JSON.parse(i.responseText);o(e)}catch(t){o(i.responseText)}break;default:s(),c({status:i.status})}},i.upload.onprogress=function(e){var t=a["X-File-Size"],o=parseFloat(a["X-File-Offset"])+e.loaded,c=Math.round(o/t*100);r.progress=c>95?"95%":c+"%",r.transfer=function(e,t){var a=function(e){return e>1e9?parseFloat(e/1e9).toFixed(2)+" GB":e>1e6?parseFloat(e/1e6).toFixed(2)+" MB":e>=1e3?parseFloat(e/1e3).toFixed(2)+" KB":e+" B"};return a(e||0)+"/"+a(t)}(o,t),r.loaded=o===t,e.lengthComputable&&n(e.loaded/e.total*100,r)},i.send(t)}))}}]),e}(),de=(new ue({baseURL:"/"}),new(function(e){Object(ne.a)(a,e);var t=Object(re.a)(a);function a(){return Object(te.a)(this,a),t.apply(this,arguments)}return Object(ae.a)(a,[{key:"download",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="".concat(this.instance.defaults.baseURL,"/ws/dms/download/").concat(e.id);return new Promise((function(n){var r=new XMLHttpRequest;r.open("GET",a,!0),r.responseType="blob",r.onload=function(){var a=r.response;if(t)n(a);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(a),o.download=e.isDirectory?"".concat(e.fileName,".zip"):e.fileName,o.click(),n()}},r.send()}))}},{key:"metaFileDownload",value:function(e){var t="".concat(this.instance.defaults.baseURL,"/ws/rest/com.axelor.meta.db.MetaFile/").concat(e.id,"/content/download"),a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(){var t=a.response,n=document.createElement("a");n.href=window.URL.createObjectURL(t),n.download=e.isDirectory?"".concat(e.fileName,".zip"):e.fileName,n.click()},a.send()}}]),a}(ue))({baseURL:"../.."})),me=function(e){Object(ne.a)(a,e);var t=Object(re.a)(a);function a(){return Object(te.a)(this,a),t.apply(this,arguments)}return Object(ae.a)(a,[{key:"save",value:function(e){return e.id?Object(Z.a)(Object(ee.a)(a.prototype),"update",this).call(this,{data:Object(u.a)({},e)}):Object(Z.a)(Object(ee.a)(a.prototype),"insert",this).call(this,{data:Object(u.a)({},e)})}},{key:"removeAll",value:function(e){return Object(Z.a)(Object(ee.a)(a.prototype),"deleteAll",this).call(this,e)}},{key:"action",value:function(e,t){return de.action("/".concat(e),Object(u.a)(Object(u.a)({},t),{},{model:this.entity}))}},{key:"info",value:function(){return de.info()}}]),a}(se);function pe(e){return new me(de,e)}pe("com.axelor.apps.base.db.App"),pe("com.axelor.apps.base.db.AppProject");var fe=pe("com.axelor.apps.project.db.Project"),be=pe("com.axelor.dms.db.DMSFile"),ve=pe("com.axelor.meta.db.MetaFilter"),he=(pe("com.axelor.dms.db.DMSPermission"),pe("com.axelor.meta.db.MetaJsonField"),pe("com.axelor.apps.projectdms.db.DMSVersion"),pe("com.axelor.dms.db.DMSFileTag"),pe("com.axelor.team.db.TeamTask")),ge=pe("com.axelor.apps.project.db.TeamTaskSection");function ke(){return(ke=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.search(Object(u.a)({},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.save(Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.save(Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(L.a)(A.a.mark((function e(t){var a,n,r=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,he.save(Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return we.apply(this,arguments)}function we(){return(we=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.delete(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.search(Object(u.a)({},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return De.apply(this,arguments)}function De(){return(De=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.save(Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(L.a)(A.a.mark((function e(t){var a,n,r=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,ge.save(Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.delete(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(L.a)(A.a.mark((function e(){var t,a,n,r,o,c,i,l,s=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.offset,r=void 0===n?0:n,o=t.limit,c=void 0===o?4:o,i=t.relatedModel,e.next=3,de.get("ws/rest/com.axelor.mail.db.MailMessage/messages?limit=".concat(c,"&offset=").concat(r,"&relatedId=").concat(a,"&relatedModel=").concat(i));case 3:if(!(l=e.sent)||!l.data){e.next=6;break}return e.abrupt("return",{comments:l.data,offset:l.offset,total:l.total});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return He.apply(this,arguments)}function He(){return(He=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.post("ws/rest/com.axelor.mail.db.MailMessage/".concat(t.id,"/remove"),{data:t});case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(L.a)(A.a.mark((function e(){var t,a,n,r,o,c,i,l,s=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.body,r=void 0===n?"":n,o=t.files,c=void 0===o?[]:o,i=t.entityModel,e.next=3,de.post("ws/rest/".concat(i,"/").concat(a,"/message"),{data:{body:r,files:c,type:"comment"}});case 3:if(!((l=e.sent)&&l.data&&l.data[0])){e.next=6;break}return e.abrupt("return",l.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return qe.apply(this,arguments)}function qe(){return(qe=Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.info();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(L.a)(A.a.mark((function e(){var t,a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:findFilters",a={data:{model:t="com.axelor.meta.db.MetaFilter",domain:null,context:{filterView:"task-filters",_model:t}}},e.next=5,ve.action("com.axelor.meta.web.MetaFilterController:findFilters",a);case 5:if(!(n=e.sent)||!n.data){e.next=8;break}return e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(L.a)(A.a.mark((function e(t){var a,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:saveFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:Object(u.a)(Object(u.a)(Object(u.a)({},t),t.name&&{name:t.name}),{},{filterView:"task-filters",filters:""})}},e.next=5,ve.action("com.axelor.meta.web.MetaFilterController:saveFilter",n);case 5:if(!(r=e.sent)||!r.data){e.next=8;break}return e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(L.a)(A.a.mark((function e(t){var a,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:removeFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:{name:t.name,filterView:"task-filters"}}},e.next=5,ve.action("com.axelor.meta.web.MetaFilterController:removeFilter",n);case 5:if(!(r=e.sent)||!r.data){e.next=8;break}return e.abrupt("return",r.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){return $e.apply(this,arguments)}function $e(){return($e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.get("/ws/meta/fields/".concat(t,"?limit=10"));case 2:if(!((a=e.sent)&&a.data&&a.data.fields)){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.save(t);case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=Object(L.a)(A.a.mark((function e(t,a){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.upload(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(L.a)(A.a.mark((function e(t){var a,n,r=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"com.axelor.team.db.TeamTask",e.next=3,be.search({fields:["fileName","relatedModel","relatedId"],data:{_domain:"self.isDirectory = false AND self.relatedId = ".concat(t," AND self.relatedModel = '").concat(a,"'"),_domainContext:{rid:t,rmodel:a}}});case 3:if(!(n=e.sent)||!n.data){e.next=6;break}return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.post("ws/rest/com.axelor.dms.db.DMSFile/removeAll",{records:t});case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(L.a)(A.a.mark((function e(t){var a,n=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.abrupt("return",de.download(t,a));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(L.a)(A.a.mark((function e(t,a){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.fetch(t,a);case 2:if(!((n=e.sent)&&n.data&&n.data[0])){e.next=5;break}return e.abrupt("return",n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var st=a(887),ut=a(124),dt=a(872),mt=a(896),pt=a(84),ft=a(152),bt=a.n(ft),vt=a(250),ht=a.n(vt),gt=a(245),kt=a.n(gt),yt=a(450),Et=a.n(yt),jt=a(451),Ot=a.n(jt),Ct=a(150),xt=a(452),St=(a(382),a(383),Object($.a)((function(){return{editorClass:{minHeight:100,border:"1px solid #eee",marginTop:-7,borderTop:"none",padding:10}}})));function wt(e){var t=e.onContentChange,a=e.content,n=e.onDescriptionChange,c=e.rest,i=Object(r.useState)(Ct.EditorState.createEmpty()),l=Object(z.a)(i,2),s=l[0],u=l[1],d=Object(r.useState)(a),m=Object(z.a)(d,2),p=m[0],f=m[1],b=St();Object(r.useEffect)((function(){v(a)}),[a]);var v=function(e){if(!e)return null;var t=Ot()(e),a=t.contentBlocks,n=t.entityMap,r=Ct.ContentState.createFromBlockArray(a,n),o=Ct.EditorState.createWithContent(r);u(o)};return o.a.createElement("div",c,o.a.createElement(xt.Editor,{editorState:s,editorClassName:b.editorClass,onEditorStateChange:function(e){u(e),f(function(e){return Et()(Object(Ct.convertToRaw)(e.getCurrentContent()))}(e)),t(p)},toolbar:{options:["inline","link","emoji","colorPicker","list","textAlign"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0}},onBlur:function(e){e.stopPropagation(),p!==a&&n(p)}}))}wt.Viewer=function(e){var t=e.html;return o.a.createElement("div",{className:"ax-base-draft-editor-viewer",dangerouslySetInnerHTML:{__html:t}})};var Tt=wt,Nt=a(454),It=a.n(Nt),Dt=a(905),Pt=a(868),Ft=a(240),Mt=a.n(Ft),zt=Object($.a)((function(){return{commentTag:{borderRadius:"50%",padding:"10px 15px 10px 15px",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:"white",fontSize:15,height:25,width:15},commentContainer:{display:"flex",lineHeight:"20px",padding:"15px 0 15px 0",fontWeight:" normal",overflowX:"auto"},commentLoad:{display:"inline-block","-ms-flex-pack":"center",justifyContent:"center",backgroundColor:"gray",padding:"5px 20px 5px 20px",borderRadius:"20px",color:"white",cursor:"pointer"},cardView:{padding:"0px 15px",background:"#F6F8F9"},loadMore:{display:"flex",justifyContent:"center",padding:"10px 0px"}}}));var Bt=function(e){var t=e.comments,a=void 0===t?[]:t,n=e.limit,r=e.total,c=e.offset,i=e.userId,l=zt(),s=Object(Q.a)().t;return o.a.createElement("div",{className:l.cardView},a&&a.map((function(t,a){var n="notification"===t.type?JSON.parse(t.body):"";return o.a.createElement("div",{key:a},o.a.createElement("div",{className:l.commentContainer},o.a.createElement(Dt.a,{alt:"User",src:Mt.a}),o.a.createElement("span",{style:{display:"flex",flex:1,flexDirection:"column",paddingLeft:20}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{display:"flex",flex:1}},o.a.createElement("span",null,t.$author&&t.$author.fullName),o.a.createElement("span",{style:{color:"#D3D3D3",paddingLeft:"5px"}},"- ",W()(t.$eventTime).format("DD/MM HH:mm"))),Number(t.$author.id)===Number(i)&&o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{fontSize:"14px",marginTop:"-5px"},onClick:function(){return e.removeComment(t)}},o.a.createElement(It.a,null)))),n?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{fontWeight:600,textAlign:"left"}},n.title),o.a.createElement("ul",{style:{paddingLeft:20,display:n.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},n.tracks.map((function(e,t){return o.a.createElement("li",{key:t},e.displayValue?o.a.createElement("div",null,o.a.createElement("span",{style:{fontWeight:600}},e.title," : "),o.a.createElement("span",null,e.oldDisplayValue&&e.oldDisplayValue+" \xbb "," ",e.displayValue)):o.a.createElement("div",null,o.a.createElement("span",{style:{fontWeight:600}},e.title," : "),o.a.createElement("span",null,e.oldValue&&e.oldValue+" \xbb "," ",e.value)))})))):o.a.createElement("span",{style:{textOverflow:"ellipsis",wordBreak:"break-word"}},t.body))),o.a.createElement(Pt.a,null))})),n+c<r&&o.a.createElement("div",{className:l.loadMore},o.a.createElement("span",{className:l.commentLoad,onClick:function(){return e.loadComment()}},s("loadMore"))))},At=a(6),Lt=a(901);var Ht=Object($.a)({autoComplete:{"& > div > label":{fontSize:14}},input:{fontSize:14,color:"black"},label:{fontSize:14}});function Rt(e){var t=e.name,a=e.model,n=e.optionLabel,c=void 0===n?"name":n,i=e.multiple,l=void 0!==i&&i,s=e.required,m=e.index,p=e.value,f=e.update,b=e.disabled,v=e.criteriaIds,h=e.type,g=e.operator,k=void 0===g?"and":g,y=e.classes,E=void 0===y?{}:y,j=e.className,O=e.size,C=e.disableClearable,x=e.TextFieldProps,S=void 0===x?{}:x,w=e.options,T=e.criteria,N=e.label,I=o.a.useState(!1),D=Object(z.a)(I,2),P=D[0],F=D[1],M=Object(r.useState)([]),B=Object(z.a)(M,2),A=B[0],L=B[1],H=Object(r.useState)(null),V=Object(z.a)(H,2),W=V[0],q=V[1],Y=Ht(),U=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];e&&t.push({fieldName:c,operator:"like",value:e}),T&&T&&T.map((function(e){return t.push(e)}));var n={criteria:t,operator:k},r=pe(a);return r.search({fields:["name","fullName"],data:n,limit:10,offset:0}).then((function(e){var t=e.data;t&&t.length&&L(t)}))}),[a,k,c,T]);return function(e,t){var a=o.a.useRef(!1);o.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(o.a.useCallback((function(){W&&U(W)}),[U,W]),500),Object(r.useEffect)((function(){P||L([])}),[P]),Object(r.useEffect)((function(){P&&P&&(w&&w.length>0?L(Object(d.a)(w)):U(null,v))}),[U,P,v,w]),o.a.createElement(Lt.a,{classes:Object(u.a)({inputFocused:Y.input,clearIndicator:Y.input,popupIndicator:Y.input,disabled:Y.disabled},E),size:O,key:m,open:P,onOpen:function(e){e&&e.stopPropagation(),F(!0)},onClose:function(e){e&&e.stopPropagation(),F(!1)},onClick:function(e){return e&&e.stopPropagation()},disableClearable:C,clearOnEscape:!0,autoComplete:!0,className:Object(At.a)(Y.autoComplete,j),options:A,multiple:l,required:s,value:p||{},getOptionSelected:function(e,t){return e.id===t.id},onChange:function(e,a){var n=a;"multiple"===h&&(n=a&&a.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id}))}))),f(Object(R.a)({},t,n),e)},name:t,disabled:b,onInputChange:function(e,t){return q(t)},renderInput:function(e){return o.a.createElement(J.a,Object.assign({variant:"outlined",fullWidth:!0},S,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},S.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()}}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:Y&&Y.label},className:j,label:N}))},getOptionLabel:function(e){return e[c]||""}})}var Vt=a(908),Wt=a(898);function qt(e){return o.a.createElement(Wt.a,Object.assign({elevation:6,variant:"filled"},e))}var Yt=Object($.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},actionButton:{textTransform:"none"}}}));function Ut(e){var t=Yt(),a=e.open,n=e.severity,r=void 0===n?"success":n,c=e.closeSnackbar,i=e.message,l=e.isAction,s=e.onActionClick,u=e.autoHideDuration,d=Object(Q.a)().t,m=function(e,t){c()};return o.a.createElement("div",{className:t.root},o.a.createElement(Vt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:u||1e3,onClose:m},o.a.createElement(qt,{onClose:m,severity:r,action:l&&o.a.createElement(G.a,{size:"small",variant:"outlined",color:"inherit",className:t.actionButton,onClick:function(){s(),m()}},d("undo"))},i)))}var _t=a(459),Xt=a.n(_t),Gt=a(458),Kt=a.n(Gt),Jt=a(244),$t=a.n(Jt),Qt=a(874);var Zt=function(e){var t=e.files,a=e.maxFiles,n=e.removeAttachment,r=e.downloadAttachment,c="",i=[];if(t)return i=Array.prototype.slice.call(t).slice(0,a),o.a.createElement("div",{className:"attachment-list-container"},i.map((function(e,t){switch(e.fileType){case"image/png":case"image/jpeg":c=o.a.createElement(Kt.a,null);break;case"application/pdf":c=o.a.createElement(Xt.a,null);break;default:c=o.a.createElement($t.a,null)}return o.a.createElement("div",{className:"attachment-list-item",key:t},o.a.createElement("span",{style:{paddingBottom:15,display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{padding:5}},c),o.a.createElement("span",{style:{paddingLeft:5}},e.fileName),o.a.createElement(K.a,{onClick:function(){return n(e)}},o.a.createElement(kt.a,null)),o.a.createElement(K.a,{onClick:function(){return r(e)}},o.a.createElement(Qt.a,null))))})))},ea=Object($.a)((function(e){return{select:Object(R.a)({marginBottom:0,minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),paper:Object(R.a)({width:200},e.breakpoints.only("xs"),{width:150}),root:{margin:0}}}));function ta(e){var t=e.value,a=e.onChange,n=e.model,c=e.title,i=e.name,l=e.optionLabel,s=e.options,d=e.criteria,m=e.label,p=ea(),f=o.a.useState(Object(u.a)({},t)),b=Object(z.a)(f,2),v=b[0],h=b[1];return Object(r.useEffect)((function(){h(Object(u.a)({},t))}),[t]),o.a.createElement(Rt,{model:n,title:c,value:v,optionLabel:l,name:i,data:v,update:function(e,t){a(e[i],t),h(e[i])},size:"small",className:Y()(p.select,p.root),disableClearable:!0,options:s,criteria:d,label:m,classes:{paper:p.paper},TextFieldProps:{margin:"dense",variant:"outlined"}})}ta.defaultProps={value:{},onChange:function(){}};var aa=ta,na=a(816),ra=a(875),oa=a(818),ca=a(876),ia=a(819);function la(e){var t=e.open,a=e.onClose,n=e.onConfirm,r=e.title,c=e.content,i=e.disabled,l=Object(Q.a)().t;return o.a.createElement(na.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ra.a,{id:"alert-dialog-title"},r),o.a.createElement(oa.a,null,o.a.createElement(ca.a,{id:"alert-dialog-description"},c)),o.a.createElement(ia.a,null,o.a.createElement(G.a,{onClick:a,color:"primary",size:"small"},l("cancel")),o.a.createElement(G.a,{onClick:n,color:"primary",size:"small",autoFocus:!0,disabled:i},l("confirm"))))}la.defaultProps={onClose:function(){},onConfirm:function(){},open:!1,title:"Delete Record",content:"Do you want to delete record ?",disabled:!1};var sa=la,ua=a(877),da=Object($.a)((function(e){return{root:{minWidth:200,border:"1px solid lightgray",height:"fit-content",padding:"2px 10px",borderRadius:4}}}));function ma(e){var t=e.value,a=e.onChange,n=e.className,c=e.inputClassName,i=o.a.useState(t),l=Object(z.a)(i,2),s=l[0],u=l[1],d=da(),m=function(e){a(e),u(e)};return Object(r.useEffect)((function(){u(t)}),[t]),o.a.createElement(ua.a,{className:Y()(d.root,n),disableToolbar:!0,autoOk:!0,variant:"inline",format:"DD/MM/YYYY",classes:{root:c},InputProps:{disableUnderline:!0},value:s?W()(s):null,onChange:function(e){return m(e)}})}ma.defaultProps={value:null,onChange:function(){}};var pa=ma,fa=a(906),ba=a(880),va=Object($.a)((function(e){return{select:Object(R.a)({marginBottom:0,minWidth:200,textAlign:"left"},e.breakpoints.only("xs"),{minWidth:150}),selectPadding:{padding:10},formControl:Object(R.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),valueChip:{height:20,color:"white"},listChip:{height:25,color:"white",marginLeft:10},iconSelected:{fontSize:20}}}));function ha(e){var t=e.value,a=e.onChange,n=e.options,c=void 0===n?[]:n,i=e.name,l=e.className,s=e.selectClassName,u=e.colorOption,d=e.getAvatarColor,m=e.colorField,p=(t||{}).id,f=void 0===p?"":p,b=va(),v=Object(r.useState)(f),h=Object(z.a)(v,2),g=h[0],k=h[1];return Object(r.useEffect)((function(){k(f)}),[f]),o.a.createElement(dt.a,{variant:"outlined",className:Y()(b.formControl,l)},o.a.createElement(mt.a,{className:b.select,value:g||"",onChange:function(e){var t=c.find((function(t){return t.id===e.target.value}));a(t,e),k(e.target.value)},renderValue:function(e){var t=c.find((function(t){return t.id===e}));return t?o.a.createElement(fa.a,{label:t&&t.name,className:b.valueChip,style:{background:t?u?u[t[m]]:d(t.name):"lightgray"}}):o.a.createElement(o.a.Fragment,null)},inputProps:{name:"".concat(i),id:"outlined-".concat(i,"-native-simple")},classes:{select:Y()(b.selectPadding,s)}},c&&c.map((function(e){return o.a.createElement(ba.a,{value:e.id,key:e.id},o.a.createElement(_.a,{className:b.iconSelected,style:{visibility:e&&g&&e.id===g?"visible":"hidden"}}),o.a.createElement(fa.a,{key:e.id,label:e.name,className:b.listChip,style:{background:e?u?u[e[m]]:d(e.name):"lightgray"}}))}))))}ha.defaultProps={value:{},onChange:function(){}};var ga=ha,ka=a(820),ya=a(815),Ea=a(879),ja=a(869),Oa=a(492),Ca=a(881),xa=a(882),Sa=a(888),wa=Object($.a)((function(e){return{root:{display:"flex",borderBottom:"solid 1px rgba(0, 0, 0, 0.54)",marginBottom:"7px"},chip:{margin:"4px",height:30},list:{display:"flex",padding:"0 !important"},listItem:{padding:"0 !important"},divider:{width:1,height:28,margin:4},buttonContainer:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",position:"relative",bottom:-3},inputIconBtn:{margin:0,padding:0,color:"#bbb"}}}));function Ta(e){var t=e.value,a=e.onDelete,n=e.filters,r=e.handleClick,c=(Object(H.a)(e,["value","onDelete","filters","handleClick"]),wa()),i="";if(t.length>1)i="Filters ".concat(t.length);else if(t.length){var l=n.find((function(e){return e.id===t[0]}));i=l?l.title:"Custom"}return o.a.createElement("div",{className:c.root},o.a.createElement(ya.a,{className:c.list},o.a.createElement(fa.a,{label:i,onDelete:function(){return a(t)},className:c.chip})),o.a.createElement("div",{className:c.buttonContainer},o.a.createElement(K.a,{"aria-label":"open",onClick:r,className:c.inputIconBtn},o.a.createElement(Ca.a,null)),o.a.createElement(K.a,{"aria-label":"refresh",className:c.inputIconBtn},o.a.createElement(xa.a,null))))}var Na=a(460),Ia=a(201),Da=a(461),Pa=a(462),Fa=a(463);Ia.b.add(Da.a,Pa.a,Fa.a);var Ma=Na.a,za=a(870),Ba=a(883),Aa=Object($.a)((function(e){return{container:{display:"flex",justifyContent:"center",flexDirection:"column"},subtitle1:{fontSize:12},chip:{margin:e.spacing(.5,.25)},link:{cursor:"pointer"}}}));function La(e){var t=e.title,a=e.value,n=Aa();return o.a.createElement("div",{className:n.container},o.a.createElement(ut.a,{variant:"subtitle1",className:n.subtitle1},t),o.a.createElement(ut.a,null,a))}function Ha(e){var t=e.title,a=e.value,n=e.optionLabelKey,r=e.viewRecord,c=Aa();function i(e){var t=e&&e[n];return t&&o.a.createElement(Ba.a,{className:c.link,onClick:function(){return r&&r(e)}},t)}return Array.isArray(a)?o.a.createElement("div",null,o.a.createElement(ut.a,{variant:"subtitle1",className:c.subtitle1},t),a.map((function(e,t){return o.a.createElement(fa.a,{key:t,label:i(e),className:c.chip})}))):o.a.createElement("div",null,o.a.createElement(ut.a,{variant:"subtitle1",className:c.subtitle1},t),a&&i(a))}function Ra(e){var t=e.title,a=e.value,n=e.customRender;return"object"!==typeof a||n?o.a.createElement(La,{title:t,value:a}):o.a.createElement(Ha,e)}function Va(e){var t=e.name,a=e.title,n=e.autoTitle,r=e.value,c=void 0===r?"":r,i=e.onChange,l=e.onBlur,s=e.readOnly,d=e.inline,m=e.InputProps,p=e.style,f=e.isControlled,b=void 0===f||f,v=Object(H.a)(e,["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style","isControlled"]),h=o.a.useState(c),g=Object(z.a)(h,2),k=g[0],y=g[1];function E(e){i(k),l&&l(e)}function j(e){var t=e.target.value;b?y(t):i(t)}return o.a.useEffect((function(){y(c)}),[c]),d?s?o.a.createElement(Ra,{value:k}):o.a.createElement(za.a,Object.assign({style:Object(u.a)({width:"100%"},p),placeholder:a,inputProps:{"aria-label":a},name:t,onChange:j,onBlur:E,autoComplete:"off",readOnly:s,disabled:s,value:k||""},v)):s?o.a.createElement(Ra,{title:a,value:k}):o.a.createElement(J.a,Object.assign({id:"filled-".concat(t),label:a||n,name:t,style:Object(u.a)({width:"100%"},p),onChange:j,onBlur:E,autoComplete:"off",fullWidth:!0,InputProps:Object(u.a)({readOnly:s},m),value:k||"",className:v.className},v))}Va.defaultProps={rows:3,readOnly:!1};var Wa=Va,qa=a(259),Ya=a(884),Ua=a(885),_a=a(897),Xa=a(900);function Ga(e){var t=e.title,a=e.className,n=e.onClick,r=Object(H.a)(e,["title","className","onClick"]);return t&&o.a.createElement(Ba.a,Object.assign({component:"button",variant:"body2",onClick:n,className:a},r),t)}function Ka(e){var t=e.name,a=e.className,n=e.onChange,r=e.value,c=e.classes,i=e.data;return o.a.createElement(Ya.a,{"aria-label":t,name:t,className:a,value:r,onChange:function(e){return n(e)}},i.map((function(e,t){var a=e.value,n=e.label;return o.a.createElement(Ua.a,{key:t,value:a,control:o.a.createElement(_a.a,null),label:n,classes:{label:c&&c.label}})})))}function Ja(e){var t=e.name,a=e.value,n=e.onChange,r=e.title,c=e.inline,i=void 0!==c&&c,l=e.isDisabled,s=e.classes,u=Object(H.a)(e,["name","value","onChange","title","inline","isDisabled","classes"]);return i?o.a.createElement(Xa.a,Object.assign({checked:Boolean(a),onChange:function(e){var t=e.target.checked;return n(t)},value:t,name:t,disabled:l},u)):o.a.createElement(Ua.a,{control:o.a.createElement(Xa.a,{checked:Boolean(a),onChange:function(e){var a=e.target.checked;return n({name:t,checked:a})},value:t}),label:r,classes:{label:s&&s.label}})}function $a(e){var t=e.classes,a=e.onClick,n=e.title,r=e.hide,c=e.className,i=Object(H.a)(e,["classes","onClick","title","hide","className"]);return o.a.createElement(G.a,Object.assign({variant:"contained",color:"primary",className:Y()(t.button,c),onClick:a},i,{style:r?{display:"none"}:{}}),n)}function Qa(e){var t=e.name,a=e.value,n=void 0===a?"":a,r=e.onChange,c=e.options,i=Object(H.a)(e,["name","value","onChange","options"]),l={options:c,getOptionLabel:function(e){return e.title||""}};return o.a.createElement(Lt.a,Object.assign({},l,{value:c.find((function(e){return e.name===n})),onChange:function(e,t){t&&r(t.name)},name:t,style:{marginRight:8,width:150}},i,{renderInput:function(e){return o.a.createElement(J.a,e)}}))}var Za=a(465),en=a(895),tn=a(466),an=a.n(tn),nn=a(488);var rn=Object(en.a)((function(e){return{formControl:{width:"100%",position:"relative","&.inline":{marginTop:3},".inline &":{paddingBottom:3}},inputRoot:{"& > div":{marginTop:"12px"}},root:{flexGrow:1},inputWrapper:{".inline & > *":{paddingBottom:3}},input:{display:"flex",padding:0,textOverflow:"ellipsis",position:"relative",whiteSpace:"nowrap",height:36,".single":{height:36},".inline &":{height:26}},valueContainer:{position:"relative",display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden",".single > &":{flexWrap:"nowrap"},".inline &":{flexWrap:"nowrap"}},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(Za.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16,textOverflow:"ellipsis",overflow:"hidden"},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16,".inline &":{bottom:1}},divider:{height:e.spacing(2)},viewIcon:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:70,bottom:8,zIndex:1,cursor:"pointer","& svg":{fontSize:20,color:"#ddd","&:hover":{color:"#555"}}}}}));function on(e){var t=e.inputRef,a=Object(H.a)(e,["inputRef"]);return o.a.createElement("div",Object.assign({ref:t},a))}var cn={Control:function(e){var t=e.children,a=e.innerProps,n=e.innerRef,r=e.selectProps,c=r.classes,i=r.isMulti,l=r.TextFieldProps,s=r.InputProps;return o.a.createElement(J.a,Object.assign({className:c.inputWrapper,fullWidth:!0,classes:Object(u.a)({},l&&l.label&&{root:c.inputRoot}),InputProps:Object(u.a)(Object(u.a)({},s),{},{inputComponent:on,inputProps:Object(u.a)({className:Y()(c.input,{single:!i}),ref:n,children:t},a)})},l))},MultiValue:function(e){var t={};return e.isDisabled||(t.onDelete=e.removeProps.onClick),o.a.createElement(fa.a,Object.assign({tabIndex:-1,label:e.children,className:Object(At.a)(e.selectProps.classes.chip,Object(R.a)({},e.selectProps.classes.chipFocused,e.isFocused)),deleteIcon:o.a.createElement(an.a,e.removeProps)},t))},NoOptionsMessage:function(e){return o.a.createElement(ut.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return o.a.createElement(ba.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps,{className:"menu-item"}),e.children)},Placeholder:function(e){return o.a.createElement(ut.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return o.a.createElement(ut.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return o.a.createElement("div",{className:Y()(e.selectProps.classes.valueContainer,e.selectProps.valueContainerClassName)},e.children)}};function ln(e){var t=rn(),a=Object(r.useState)(e.options||[]),n=Object(z.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)(!1),s=Object(z.a)(l,2),d=s[0],m=s[1],p=o.a.useState(null),f=Object(z.a)(p,2),b=f[0],v=f[1],h=e.name,g=e.title,k=void 0===g?"":g,y=e.onChange,E=e.value,j=e.error,O=e.readOnly,C=void 0!==O&&O,x=e.isMulti,S=void 0!==x&&x,w=e.isSearchable,T=void 0!==w&&w,N=e.optionValueKey,I=void 0===N?"id":N,D=e.optionLabelKey,P=void 0===D?"title":D,F=e.fetchAPI,M=e.beforeFetchAPI,B=e.isPortal,R=e.inline,V=e.autoFocus,W=e.onFocus,q=e.InputProps,U=e.formControlStyle,_=e.clearIndicatorStyle,X=e.onView,G=Object(H.a)(e,["name","title","onChange","value","error","readOnly","isMulti","isSearchable","optionValueKey","optionLabelKey","fetchAPI","beforeFetchAPI","isPortal","inline","autoFocus","onFocus","InputProps","formControlStyle","clearIndicatorStyle","onView"]),K=o.a.useCallback((function(t){return e.options.find((function(e){return e[I]===t}))}),[e.options,I]);function J(){return $.apply(this,arguments)}function $(){return($=Object(L.a)(A.a.mark((function t(){var a,n,r=arguments;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:"",m(!0),!M){t.next=5;break}return t.next=5,M();case 5:if(!F){t.next=12;break}return t.next=8,F({search:a});case 8:n=t.sent,i(n),t.next=13;break;case 12:i(e.options);case 13:m(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o.a.useEffect((function(){if("object"!==typeof E){var e=E.split(",");v(1===e.length?K(e[0].trim()):e.map((function(e){return K(e.trim())})))}else v(E)}),[E,K]);var Q=function(e,t){var a=o.a.useRef(null),n=function(){return a.current&&clearTimeout(a.current)},r=function(e){return a.current=setTimeout(e,t)};return o.a.useEffect((function(){return function(){return n()}}),[]),function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];n(),r((function(){return e.apply(void 0,a)}))}}(J,400);return C?o.a.createElement(Ra,{title:k,value:function(e){var t=c.find((function(t){return"".concat(t.value)==="".concat(e)}));return t&&t[P]||e}(E)}):o.a.createElement(dt.a,{className:Y()(t.formControl,{inline:R}),style:U},o.a.createElement(nn.a,Object.assign({autoFocus:V,name:h,InputProps:q,TextFieldProps:Object(u.a)(Object(u.a)({},R?{}:{label:k,InputLabelProps:{shrink:!0}}),{},{error:j}),isLoading:d,onFocus:function(){W&&W(),J()},isClearable:!0,options:d?[]:c,onInputChange:function(e,t){"input-change"===t.action&&(m(!0),Q(e))},onChange:function(e){y("object"!==typeof E?S?e.map((function(e){return e[I]})).join(","):e&&e[I]:e)},value:b,placeholder:T?"Search ".concat(k):"Select ".concat(k),classes:t,components:cn,isDisabled:C,isMulti:S,isSearchable:T,getOptionLabel:function(e){return e[P]},getOptionValue:function(e){return e[I]},blurInputOnSelect:!0,menuShouldBlockScroll:!0,menuPlacement:"auto",styles:{menuPortal:function(e){return Object(u.a)(Object(u.a)({},e),{},{zIndex:1500})},container:function(e){return{width:"100%"}},clearIndicator:function(e){return Object(u.a)(Object(u.a)({},e),_)},menu:function(e){return Object(u.a)(Object(u.a)({},e),{},{marginTop:0,borderRadius:0})}}},G.options?{}:{filterOption:function(){return!0}},B?{menuPortalTarget:document.body}:{},G)),E&&X&&o.a.createElement("div",{onClick:function(e){e.stopPropagation(),X(E)},className:t.viewIcon},o.a.createElement($t.a,null)))}ln.defaultProps={isPortal:!0};var sn=ln,un=a(886),dn=a(893),mn={date:ua.a,time:un.a,datetime:dn.a},pn={date:"DD/MM/YYYY",time:"LT",datetime:"DD/MM/YYYY h:mm a"};var fn=function(e){var t=e.inline,a=e.type,n=void 0===a?"date":a,c=Object(H.a)(e,["inline","type"]),i=Object(r.useState)(!1),d=Object(z.a)(i,2),m=d[0],p=d[1],f=o.a.useRef(),b=(c.name,c.title),v=c.format,h=c.readOnly,g=void 0!==h&&h,k=(c.error,c.onChange),y=Object(H.a)(c,["name","title","format","readOnly","error","onChange"]);if(g){var E=c.value?W()(c.value).format(v||pn[n]):"";return o.a.createElement(Ra,{title:b,value:E})}var j=mn[n];return o.a.createElement(s.a,{utils:l.a,moment:W.a},o.a.createElement(j,Object.assign({autoOk:!0,open:m,onChange:function(e){f.current=e},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{style:Object(u.a)({width:"100%"},t?{margin:0}:{}),label:t?"":b,format:v||pn[n]},"time"!==n?{animateYearScrolling:!1}:{},y,{onKeyDown:function(e){40===e.keyCode&&p(!0)},onClose:function(){k(f.current),p(!1)},onOpen:function(){return p(!0)}})))},bn=a(467);function vn(e){var t=e.inputRef,a=(e.onChange,e.thousandSeparator),n=void 0===a||a,r=Object(H.a)(e,["inputRef","onChange","thousandSeparator"]);return o.a.createElement(bn.a,Object.assign({getInputRef:t,thousandSeparator:n},r))}function hn(e){var t=e.type,a=void 0===t?"integer":t,n=e.title,c=e.onChange,i=e.value,l=void 0===i?0:i,s=e.readOnly,u=e.scale,d=void 0===u?2:u,m=e.customeFormat,p=e.onBlur,f=Object(H.a)(e,["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"]),b=Object(r.useState)(l),v=Object(z.a)(b,2),h=v[0],g=v[1],k=Object(r.useCallback)((function(e){return Number(Number(e).toFixed("integer"===a?0:d))}),[a,d]);return o.a.useEffect((function(){g(k(l))}),[l,g,k]),s?o.a.createElement(Ra,{title:n,value:o.a.createElement(vn,Object.assign({},m,{value:l,displayType:"text"})),customRender:!0}):o.a.createElement(Wa,Object.assign({onChange:g,title:n,type:"number",value:"".concat(h),onBlur:function(e){c(k(e.target.value)),g(k(e.target.value)),p&&p(e)}},f))}hn.defaultProps={readOnly:!1};var gn=hn,kn={enum:["=","!=","isNull","notNull"],text:["like","notLike","isNull","notNull"],string:["=","!=","like","notLike","isNull","notNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","notNull"],boolean:["isTrue","isFalse"]},yn=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"notNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"true"},{name:"isFalse",title:"false"}];function En(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[{name:e.targetName}];e.targetSearch&&(n=e.targetSearch.map((function(e){return{name:e}})));var r=pe(e.target);return r.search(Object(u.a)(Object(u.a)({},a),{},{limit:10,offset:0,fields:n.map((function(e){return e.name})),data:t?n.reduce((function(e,a){return Object(u.a)(Object(u.a)({},e),{},Object(R.a)({},a.name,t))}),{criteria:void 0,operator:void 0}):{}}))}var jn=Object($.a)((function(e){return{group:{margin:"0px 8px",flexDirection:"row"},button:{margin:e.spacing(1)},label:{fontSize:"0.875rem"},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},link:{margin:e.spacing(1)},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},criteriaValue:{width:"250px !important",alignItems:"normal"}}})),On={title:"",operator:"and",isArchived:!1,isShare:!1,criteria:[{}],selected:!1},Cn=function(e,t){e.map((function(e){return kn[e]=t}))};function xn(e,t,a){var n=a.onChange,r=a.value,c=a.value2,i=a.classes,l=a.style,s=Object(H.a)(a,["onChange","value","value2","classes","style"]);return["=","!=",">",">=","<","<=","like","notLike"].includes(t)?o.a.createElement(e,Object.assign({name:"value",className:i.criteriaValue,onChange:function(e){return n({name:"value",value:e})},value:r},s)):["between","notBetween"].includes(t)?o.a.createElement(o.a.Fragment,null,o.a.createElement(e,Object.assign({name:"value",style:Object(u.a)({marginRight:8},l),className:i.criteriaValue,onChange:function(e){return n({name:"value",value:"".concat(e)})},value:r},s)),o.a.createElement(e,Object.assign({name:"value2",className:i.criteriaValue,onChange:function(e){return n({name:"value2",value:"".concat(e)})},value:c},s))):void 0}function Sn(e){var t=e.type,a=e.operator,n=e.onChange,r=e.value,c=e.classes,i=Object(H.a)(e,["type","operator","onChange","value","classes"]),l=Object(u.a)({value:r.value,value2:r.value2,onChange:n},i);switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":return function(e,t){var a=t.onChange,n=Object(H.a)(t,["onChange"]);if(["like","notLike","notIn"].includes(e))return o.a.createElement(Wa,Object.assign({name:"value",onChange:function(e){return a({name:"value",value:e})},margin:"none",style:{width:250}},n));if(["in"].includes(e)){var r=n.field,c=n.value,i=r.targetName,l=function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.search,e.next=3,En(r,a);case 3:return n=e.sent,o=n.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(sn,{placeholder:"",fetchAPI:l,isSearchable:!0,optionLabelKey:i,optionValueKey:"id",name:"value",value:c,isMulti:!0,formControlStyle:{marginBottom:"5px",width:250},clearIndicatorStyle:{paddingLeft:"0 !important"},closeMenuOnScroll:!1,onChange:function(e){return a({name:"value",value:Array.isArray(e)?e.map((function(e){return Object(R.a)({id:e.id},i,e[i])})):e&&Object(R.a)({id:e.id},i,e[i])})}})}}(a,Object(u.a)({},l));case"date":case"time":case"dateTime":return xn(fn,a,Object(u.a)(Object(u.a)({type:t},l),{},{format:"DD/MM/YYYY",margin:"none",classes:c}));case"integer":case"long":case"decimal":return xn(gn,a,Object(u.a)(Object(u.a)({type:t},l),{},{margin:"none",classes:c}));case"enum":var s=i.field.selectionList.map((function(e){var t=e.title,a=e.value,n=e.data;return{name:n&&n.value||a,title:t}}));return xn(Qa,a,Object(u.a)({options:s,classes:c},l));default:return xn(Wa,a,Object(u.a)(Object(u.a)({classes:c},l),{},{margin:"none"}))}}function wn(e){var t=e.className,a=e.onRemove,n=e.onChange,r=e.value,c=e.fields,i=e.classes,l=c.find((function(e){return e.name===r.fieldName})),s=(l&&l.type||"").toLowerCase();l&&l.selectionList&&(s="enum");var d=yn.filter((function(e){return(kn[s]||[]).includes(e.name)}));function m(e){var t=e.name,a=e.options,c=Object(H.a)(e,["name","options"]);return o.a.createElement(Qa,Object.assign({name:t,onChange:function(e){return n({name:t,value:e})},value:r[t],options:a},c))}return o.a.createElement("div",null,o.a.createElement(K.a,{"aria-label":"close",className:t,onClick:a},o.a.createElement(Sa.a,null)),o.a.createElement(m,{name:"fieldName",options:c,className:"fieldName"}),o.a.createElement(m,{name:"operator",options:d,className:"operator"}),r.operator&&Sn(Object(u.a)({type:s,operator:r.operator,value:r,onChange:n,classes:i},{field:l})))}function Tn(e){var t=e.customCriteria,a=e.setCustomCriteria,n=e.fields,r=e.clearFilters,c=e.applyFiltersClick,i=e.filterView,l=e.onSave,s=e.onDelete,d=jn(),m=o.a.useState(!1),p=Object(z.a)(m,2),f=p[0],b=p[1],v=t.id,h=t.operator,g=t.isArchived,k=t.criteria,y=t.title,E=t.isShare;function j(e){var n=e.target,r=n.name,o=n.value;a(Object(u.a)(Object(u.a)({},t),{},Object(R.a)({},r,o)))}function O(e,t,r){t instanceof W.a&&(t=W()(t).format("YYYY-MM-DD")),a(Object(qa.a)((function(a){a.criteria[r][e]=t,"fieldName"===e&&(a.criteria[r].operator="",a.criteria[r].value=function(e){var t=n.find((function(t){return t.name===e})).type.toLowerCase();return["one_to_one","many_to_one","many_to_many","one_to_many"].includes(t)?null:["integer","long","decimal"].includes(t)?0:["date","time","dateTime"].includes(t)?null:""}(t))})))}function C(){var e=t.id,a=t.version,n=t.title,r=t.isShare,o=t.operator,c=t.criteria,s={shared:r||!1,title:n,filterCustom:JSON.stringify({operator:o,criteria:c}),filterView:i};e?(s.id=e,s.version=a):s.name=n.replace(" ","_").toLowerCase(),l(s)}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(Ka,{name:"operator",onChange:function(e){return j(e)},value:h,classes:d,className:d.group,data:[{label:"and",value:"and"},{label:"or",value:"or"}]}),o.a.createElement(Ja,{name:"isArchived",title:"Show Archived",value:g,onChange:function(e){var t=e.name;return j({target:{value:e.checked,name:t}})},classes:d,className:"archived"})),o.a.createElement("div",null,o.a.createElement(ya.a,{className:d.list},k.map((function(e,t){return o.a.createElement(ka.a,{className:d.listItem,key:t},o.a.createElement(wn,{className:d.buttonLink,id:t,value:e,fields:n,onRemove:function(){return function(e){a(Object(qa.a)((function(t){1===t.criteria.length?t.criteria=[{}]:t.criteria.splice(e,1)})))}(t)},onChange:function(e){return O(e.name,e.value,t)},classes:d}))})))),o.a.createElement("div",{className:d.buttonLink},o.a.createElement(Ga,{title:"Add filter",className:Y()(d.link,"add-filter"),onClick:function(){a(Object(qa.a)((function(e){e.criteria[e.criteria.length-1].operator&&e.criteria.push({})})))}}),o.a.createElement(Pt.a,{className:d.divider}),o.a.createElement(Ga,{title:"Clear",className:Y()(d.link,"clear"),onClick:function(){r(),a(On)}}),o.a.createElement(Pt.a,{className:d.divider}),o.a.createElement(Ga,{title:"Export",className:d.link}),o.a.createElement(Pt.a,{className:d.divider}),o.a.createElement(Ga,{title:"Export full",className:d.link}),o.a.createElement(Pt.a,{className:d.divider}),o.a.createElement(Ga,{title:"Apply",className:Y()(d.link,"apply-filter"),onClick:function(){return c(t)}})),o.a.createElement(Pt.a,{style:{marginTop:8}}),o.a.createElement("div",null,o.a.createElement(Wa,{name:"title",value:y,onChange:function(e){return j({target:{value:e,name:"title"}})},className:Y()(d.textField,"title")}),o.a.createElement(Ja,{title:"share",name:"isShare",value:E,onChange:function(e){var t=e.name;return j({target:{value:e.checked,name:t}})},className:"share"})),o.a.createElement("div",null,o.a.createElement($a,{classes:d,onClick:C,title:"Save",hide:""===y||null===y||void 0!==v,className:"save"}),o.a.createElement($a,{classes:d,onClick:C,title:"Update",hide:""===v||void 0===v||null===v}),o.a.createElement($a,{classes:d,onClick:function(){return b(!0)},title:"Delete",hide:""===v||void 0===v||null===v,className:"delete"}),o.a.createElement(na.a,{open:f,onClose:function(){return b(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ra.a,{id:"alert-dialog-title"},"Question"),o.a.createElement(oa.a,null,o.a.createElement(ca.a,{id:"alert-dialog-description"},"Would you like to remove the filter?")),o.a.createElement(ia.a,null,o.a.createElement(G.a,{onClick:function(){return b(!1)},className:"cancel"},"Cancel"),o.a.createElement(G.a,{onClick:function(){s(t),b(!1)},color:"primary",autoFocus:!0,className:"confirm-delete"},"ok")))))}Cn(["long","decimal","date","time","datetime"],kn.integer),Cn(["one_to_many"],kn.text),Cn(["one_to_one","many_to_one","many_to_many"],["like","notLike","in","notIn","isNull"]);var Nn=Object($.a)((function(e){return{container:{width:200,zIndex:900,"& > div:last-child":{zIndex:1}},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},typography:{padding:e.spacing(1),fontWeight:600,flex:1},searchContainer:{display:"flex",flexDirection:"column","& div":{display:"flex",alignItems:"center"}},formControl:{margin:e.spacing(1)},group:{margin:"0px 8px",flexDirection:"row"},paper:{minWidth:480,boxShadow:"0 4px 12px rgb(0,0,0,0.4)"},link:{margin:e.spacing(1)},button:{margin:e.spacing(1)},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},searchFilterContainer:{display:"flex",alignItems:"flex-start !important"},searchFilter:{flexDirection:"column",alignItems:"baseline !important",width:"100%"},filter:{flexDirection:"column",marginLeft:8,alignItems:"baseline !important"},inputIconBtn:{margin:0,padding:0,color:"#bbb"},label:{fontSize:"0.875rem"},filterLabel:{display:"flex",alignItems:"center",margin:"0 8px"},input:{"& input":{paddingTop:8,paddingBottom:8,fontSize:14},borderRadius:16},content:{maxHeight:350,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"flex-start !important","& div":{display:"flex",alignItems:"center"}}}}));function In(e){try{return JSON.parse(e)}catch(t){return e}}function Dn(e){var t=e.icon,a=e.title,n=e.classes;return o.a.createElement("div",{className:n.filterLabel},o.a.createElement(Ma,{icon:t}),o.a.createElement(ut.a,{className:n.typography},a))}function Pn(e){var t=e.filter,a=e.disabled,n=e.isChecked,r=e.onClick,c=e.onChange,i=e.classes,l=t.title;return o.a.createElement(ka.a,{className:i.listItem},o.a.createElement(Ja,{name:l.replace(" ","_").toLowerCase(),value:n,onChange:function(e){c(e,t)},inline:!0,isDisabled:a}),o.a.createElement(Ga,{title:l,onClick:function(){return(!a||n)&&r(t,!n)},style:a&&!n?{color:"rgba(0, 0, 0, 0.54)"}:{}}))}function Fn(e){var t=e.active,a=void 0===t?[]:t,n=e.data,r=void 0===n?[]:n,c=e.disabled,i=e.onClick,l=e.onChange,s=e.classes;return o.a.createElement("div",{className:s.filter},o.a.createElement(ya.a,{className:s.list},r.map((function(e){return o.a.createElement(Pn,{key:e.id,filter:e,isChecked:a.includes(e.id),disabled:c,onClick:i,onChange:l,classes:s})}))))}function Mn(e){var t=e.filters,a=e.value,n=void 0===a?[]:a,c=e.onOpen,i=e.onDelete,l=e.classes,s=e.onContentSearch,u=Object(r.useState)(""),d=Object(z.a)(u,2),m=d[0],p=d[1],f=o.a.useCallback((function(e){var t=e.target.value;s(t||m)}),[s,m]);return n.length>0?o.a.createElement(Ta,{handleClick:c,value:n,onDelete:i,filters:t}):o.a.createElement(Wa,{name:"search",margin:"none",placeholder:"Search",onChange:p,onKeyPress:function(e){return"Enter"===e.key&&f(e)},value:m,variant:"outlined",size:"small",InputProps:{className:l.input,endAdornment:o.a.createElement(Ea.a,{position:"end"},o.a.createElement(K.a,{"aria-label":"open",onClick:c,className:l.inputIconBtn},o.a.createElement(Ca.a,null)),o.a.createElement(K.a,{"aria-label":"refresh",className:l.inputIconBtn,onClick:f},o.a.createElement(xa.a,null)))}})}function zn(e){var t=e.name,a=e.value,n=e.fields,c=e.filters,i=void 0===c?[]:c,l=e.domain,s=void 0===l?[]:l,m=e.onSave,p=e.onDelete,f=e.handleChange,b=e.onContentSearch,v=Nn(),h=Object(r.useRef)(),g=o.a.useState(!1),k=Object(z.a)(g,2),y=k[0],E=k[1],j=o.a.useState([]),O=Object(z.a)(j,2),C=O[0],x=O[1],S=o.a.useState(!1),w=Object(z.a)(S,2),T=w[0],N=w[1],I=Object(r.useState)(On),D=Object(z.a)(I,2),P=D[0],F=D[1],M=T?i.find((function(e){return e.id===C[0]})):null;function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=i.filter((function(t){return e.includes(t.id)})),r=s.filter((function(t){return e.includes(t.id)})),o={criteria:[],operator:t.operator||"and"};if(a&&T)o.criteria=t.criteria;else{var c,l;if(n.length)(l=o.criteria).push.apply(l,Object(d.a)(n.map((function(e){var t=In(e.filterCustom),a=t.criteria,n=void 0===a?[]:a;return{operator:t.operator,criteria:n}}))));(c=o.criteria).push.apply(c,Object(d.a)(t.criteria||[]))}return r.length&&(o._domains=r.map((function(e){return{title:e.title,domain:e.domain}}))),o}function H(e,t){var a=[];e.length>0&&(a=B(e,t)),f({selected:Object(d.a)(e),query:a})}function R(e,t){var a=!!e.domain,n=t&&e?[e.id]:[];N(!a&&t),x(n),H(n)}function V(e,t){var a=t.id,n=C.findIndex((function(e){return e===a}));n>-1?!e&&C.splice(n,1):e&&C.push(a),x(Object(d.a)(C))}function W(){f({}),x([]),N(!1),F(On)}function q(){return(q=Object(L.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:R(e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(M){var e=In(M.filterCustom),t=e.criteria,a=e.operator;F(Object(u.a)(Object(u.a)({},M),{},{operator:a,criteria:t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{operator:e.operator})}))}))}else F(On)}),[F,M]),o.a.createElement("div",{className:v.container,ref:h},o.a.createElement(Mn,{value:a&&a.selected,filters:i,onOpen:function(){E(!0)},onDelete:W,classes:v,onContentSearch:b}),o.a.createElement(ja.a,{open:y,anchorEl:h.current,placement:"bottom-start",disablePortal:!0},o.a.createElement(Oa.a,{className:v.paper},o.a.createElement("div",{className:v.searchContainer},o.a.createElement("div",null,o.a.createElement(ut.a,{className:v.typography},"Advanced Search"),o.a.createElement(K.a,{"aria-label":"close",onClick:function(){E(!1)}},o.a.createElement(Sa.a,null))),o.a.createElement(Pt.a,null),o.a.createElement("div",{className:v.content},o.a.createElement("div",{className:v.searchFilterContainer},s.length>0&&o.a.createElement("div",{className:v.searchFilter},o.a.createElement(Dn,{icon:"filter",title:"Filters",classes:v}),o.a.createElement(Fn,{data:s,disabled:T,active:C,onClick:R,onChange:V,classes:v})),i.length>0&&o.a.createElement("div",{className:v.searchFilter},o.a.createElement(Dn,{icon:"filter",title:"My Filter",classes:v}),o.a.createElement(Fn,{data:i,disabled:T,active:C,onClick:R,onChange:V,classes:v}))),i.length>=1||s.length?o.a.createElement(Pt.a,{style:{marginTop:8}}):"",o.a.createElement(Tn,{fields:n,clearFilters:W,applyFiltersClick:function(e){C.length>0?H(C.length?Object(d.a)(C):[null]):e&&e.criteria.length&&function(e){f({selected:[null],query:B(C,e,!0)})}(Object(u.a)(Object(u.a)({},e),{},{criteria:(e.criteria||[]).filter((function(e){return e.fieldName&&e.operator}))})),E(!1)},filterView:t,onSave:function(e){return q.apply(this,arguments)},onDelete:function(e){p(e),W()},customCriteria:P,setCustomCriteria:F}))))))}Object($.a)((function(){return{paper:{display:"flex",alignItems:"center"},main:{display:"flex",alignItems:"center",justifyContent:"center"},content:{width:"50%",height:"100%",position:"relative"}}}));function Bn(e,t){return e&&e.sort((function(e,a){var n=e[t],r=a[t];return n<r?-1:n>r?1:0}))}function An(e,t){return e&&e.sort((function(e,a){var n=new Date(e[t]),r=new Date(a[t]);return n>r?-1:n<r?1:0}))}function Ln(e,t,a){return e&&e.sort((function(e,n){var r=e[t]&&e[t][a],o=n[t]&&n[t][a];return""!==r&&o?""!==o&&r?r<o?-1:r>o?1:0:1:-1}))}function Hn(e,t,a){return e&&e.sort((function(e,t){var n=e[a],r=t[a];return n>r?-1:n<r?1:0}))}function Rn(e,t){return Array.prototype.slice.call(e).slice(0,t).map((function(e,t){return{file:e,index:t,progress:0,cancelled:!1,completed:!1,chunkProgress:new Array(Math.floor(e.size/524288)+1).fill(0),error:!1,totalUploaded:0}}))}function Vn(e,t){if(!e||e.length)return Bn(e&&(e.filter((function(e){return e.teamTaskSection&&e.teamTaskSection.id===t.id}))||[]),"sequence")}function Wn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[{id:-1,sequence:0,records:e&&e.length&&Bn((e||[]).filter((function(e){return!e.teamTaskSection})),"sequence")}];return t&&t.forEach((function(t){a.push(Object(u.a)(Object(u.a)({},t),{},{records:Vn(e,t)}))})),Bn(a,"sequence")}function qn(e){return e.title||e.autoTitle||e.name}function Yn(e,t){var a=t.modelField||e.name,n=t.type||t.jsonType,r="::".concat(t.jsonType||"text");return t.target&&t.targetName&&(r=""),Object(u.a)(Object(u.a)({},t),{},{title:"".concat(qn(t)," ").concat(qn(e)&&"(".concat(qn(e),")")),name:"".concat(a,".").concat(t.name).concat(r),type:n.replace(/-/g,"_").toUpperCase()})}function Un(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(z.a)(r,1)[0];return n.splice(a,0,o),n}function _n(e){if(e)return W()(e).format("YYYY-MM-DD")}function Xn(e){return e.file}function Gn(e,t){var a=e.file;if(a){var n={"X-File-Name":a.name,"X-File-Offset":t,"X-File-Size":a.size,"X-File-Type":a.type};return e.id&&(n["X-File-Id"]=e.id),n}}function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},a=t.teamTaskStatusSet,n=void 0===a?[]:a;if(n&&n.length<=0)return{};var r=n.filter((function(e){return!0===e.isDefaultCompleted}));return r&&r[0]||{}}var Jn=function(e,t){var a=e.taskStatus;if(!a)return!1;var n=Kn(t);return!!n&&n.id===a.id};var $n=a(257),Qn=a(256),Zn=a(258),er=a(889),tr=a(890),ar=a(255),nr=a(254),rr=a(891),or=a(892),cr=[{name:"description",label:"taskDescription"},{name:"parentTask",label:"parentTask"},{name:"attachments",label:"attachments"},{name:"categorySet",label:"tags"},{name:"teamTaskSection",label:"section"},{name:"taskDate",label:"taskDate"},{name:"taskEndDate",label:"taskEnd"},{name:"taskPriority",label:"priority"},{name:"taskStatus",label:"status"},{name:"progressSelect",label:"progress"},{name:"teamTaskCategory",label:"category"}],ir={1:"lightblue",2:"#428bca",3:"orange",4:"#d9534f"},lr=[{code:"allTasks",value:"allTasks"},{code:"incompleteTasks",value:"incompleteTasks"},{code:"completedTasks",value:"completedTasks",items:[{code:"allCompletedTasks",value:"allCompletedTasks"},{code:"today",value:"today",label:"allCompletedTasks"},{code:"yesterday",value:"yesterday",label:"allCompletedTasks"},{code:"oneweek",value:"oneWeek",label:"allCompletedTasks"},{code:"twoWeeks",value:"twoWeeks",label:"allCompletedTasks"},{code:"threeWeeks",value:"threeWeeks",label:"allCompletedTasks"}]}],sr=[{code:"sequence",name:"none",sortFunction:Bn},{code:"name",name:"alphabetical",sortFunction:Bn},{code:"assignedTo",name:"assignee",sortFunction:Ln,fieldName:"fullName"},{code:"taskEndDate",name:"dueDate",sortFunction:An},{code:"taskDate",name:"taskDate",sortFunction:An},{code:"taskPriority",name:"priority",sortFunction:Hn,fieldName:"taskPriority.technicalTypeSelect"},{code:"taskStatus",name:"status",sortFunction:Ln,fieldName:"name"},{code:"progressSelect",name:"progress",sortFunction:Bn},{code:"teamTaskCategory",name:"category",sortFunction:Ln,fieldName:"name"}],ur=["toInvoice","isShowTaskCategory","isShowPlanning","isShowStatus","productSet","isShowProgress","taskCustomFields","isShowSection","id","synchronize","parentProject","attrs","fromDate","sequence","teamTaskPrioritySet","clientPartner","name","code","description","teamTaskStatusSet","assignedTo","isShowPriority","projectFolderSet","company","currency","contactPartner","membersUserSet","toDate","isBusinessProject","fullName","projectStatus","teamTaskCategorySet"],dr=["project","teamTaskSection","taskStatus","parentTask","name","metaFile","description","assignedTo","taskEndDate","taskDate","taskDeadline","taskPriority","fullName","taskStatus.isCompleted","taskStatus.isDefaultCompleted","taskPriority.technicalTypeSelect","progressSelect","categorySet","attrs","statusBeforeComplete","sequence","teamTaskCategory"],mr=[$n.a[600],Qn.a[600],Zn.a[600],er.a[600],tr.a[600],ar.a[600],nr.a[600],rr.a[600],or.a[600],$n.a[700],Qn.a[700],Zn.a[700],er.a[700],tr.a[700],ar.a[700],nr.a[700],rr.a[700],or.a[700],$n.a[800],Qn.a[800],Zn.a[800],er.a[800],ar.a[800],tr.a[800],nr.a[800],rr.a[800],or.a[800],$n.a[900],Qn.a[900],Zn.a[900],er.a[900],tr.a[900],ar.a[900],nr.a[900],rr.a[900],or.a[900],$n.a[500],Qn.a[500],Zn.a[500],er.a[500],tr.a[500],ar.a[500],nr.a[500],rr.a[500],or.a[500]];var pr={},fr=function(e){if(pr[e])return pr[e];var t=Math.round(10*Math.random())%mr.length;return pr[e]=mr[t]},br=Object($.a)({input:{fontSize:14,color:"black"},label:{fontSize:14},iconSelected:{fontSize:20},chip:{marginLeft:5},deleteIcon:{color:"white"}});function vr(e){var t=e.model,a=e.optionLabel,n=void 0===a?"name":a,c=e.index,i=e.value,l=void 0===i?[]:i,s=e.update,m=e.criteriaIds,p=e.operator,f=void 0===p?"and":p,b=e.classes,v=void 0===b?{}:b,h=e.className,g=e.disableClearable,k=e.TextFieldProps,y=void 0===k?{}:k,E=e.options,j=e.criteria,O=Object(r.useState)(!1),C=Object(z.a)(O,2),x=C[0],S=C[1],w=Object(r.useState)([]),T=Object(z.a)(w,2),N=T[0],I=T[1],D=Object(r.useState)(null),P=Object(z.a)(D,2),F=P[0],M=P[1],B=br(),A=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=[];e&&a.push({fieldName:n,operator:"like",value:e}),j&&j&&j.map((function(e){return a.push(e)}));var r={criteria:a,operator:f},o=pe(t);return o.search({fields:["name","fullName"],data:r,limit:10,offset:0}).then((function(e){var t=e.data;t&&t.length&&I(Object(d.a)(t))}))}),[t,f,n,j]);return function(e,t){var a=o.a.useRef(!1);o.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(o.a.useCallback((function(){F&&A(F,m)}),[A,F,m]),500),Object(r.useEffect)((function(){x||I([])}),[x]),Object(r.useEffect)((function(){x&&x&&(E&&E.length>0?I(Object(d.a)(E)):A(null,m))}),[A,x,m,E]),o.a.createElement(Lt.a,{classes:Object(u.a)({inputFocused:B.input,clearIndicator:B.input,popupIndicator:B.input,disabled:B.disabled},v),className:h,value:l,size:"small",key:c,open:x,onOpen:function(e){e&&e.stopPropagation(),S(!0)},onClose:function(e){e&&e.stopPropagation(),S(!1)},multiple:!0,options:N,disableCloseOnSelect:!0,disableClearable:g,clearOnEscape:!0,autoComplete:!0,onChange:function(e,t){s(t.filter((function(e,t,a){return a.findIndex((function(t){return t.id===e.id}))===t}))),S(!1)},renderTags:function(e,t){return e.map((function(e,a){return o.a.createElement(fa.a,Object.assign({variant:"outlined",label:e[n],size:"small",classes:{deleteIcon:B.deleteIcon},style:{backgroundColor:fr(e.id),border:"1px solid ".concat(fr(e.id)),color:"white"}},t({index:a})))}))},getOptionLabel:function(e){return e[n]||""},renderOption:function(e,t){var a=t.selected;return o.a.createElement(o.a.Fragment,null,o.a.createElement(_.a,{className:B.iconSelected,style:{visibility:l&&l.find((function(t){return t.id===e.id}))||a?"visible":"hidden"}}),o.a.createElement(fa.a,{variant:"outlined",label:e[n],size:"small",className:B.chip,style:{backgroundColor:fr(e.id),border:"1px solid ".concat(fr(e.id)),color:"white"}}))},onInputChange:function(e,t){return M(t)},renderInput:function(e){return o.a.createElement(J.a,Object.assign({},e,{variant:"outlined",fullWidth:!0},y,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},y.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()}}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:B&&B.label},className:h}))}})}var hr=a(878),gr=Object($.a)({root:{height:"inherit",width:"inherit",position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},top:{color:"#eef3fd"},bottom:{color:"#3ecf8e",animationDuration:"250ms",position:"absolute"}});var kr=function(e){var t=gr();return o.a.createElement("div",{className:t.root},o.a.createElement(hr.a,Object.assign({variant:"determinate",value:100,className:t.top,size:24,thickness:4},e)),o.a.createElement(hr.a,Object.assign({variant:"indeterminate",disableShrink:!0,className:t.bottom,size:24,thickness:4},e)))},yr=a(457),Er=a(249),jr=a.n(Er),Or=a(171),Cr=a.n(Or),xr=a(134),Sr=a.n(xr),wr=a(248),Tr=a.n(wr),Nr=Object($.a)((function(e){return{title:{display:"flex",alignItems:"center"},input:{padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%"},checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardTask:Object(R.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1)}),checkIconButton:{padding:e.spacing(1)},cardItem:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative"},stickyElement:{"&:hover":{backgroundColor:"#f5f8fa"},width:"100%",display:"flex",alignItems:"center"},menuPaper:{border:"1px solid #d3d4d5"}}}));function Ir(e){var t=e.onDelete,a=e.record,n=e.style,c=e.Card,i=e.canDelete,l=(e.canEdit,e.onEdit),s=e.dragHandleProps,d=void 0===s?{}:s,m=Object(H.a)(e,["onDelete","record","style","Card","canDelete","canEdit","onEdit","dragHandleProps"]),p=Object(r.useState)(null),f=Object(z.a)(p,2),b=f[0],v=f[1],h=Object(r.useState)(!1),g=Object(z.a)(h,2),k=g[0],y=g[1],E=o.a.useState(!1),j=Object(z.a)(E,2),O=j[0],C=j[1],x=Object(Q.a)().t,S=Nr(),w=function(){v(null)},T=o.a.useCallback((function(e){C(!0)}),[]),N=o.a.useCallback((function(e){e&&e.stopPropagation(),C(!1)}),[]),I=o.a.useCallback((function(e){e.stopPropagation(),N(),t(a)}),[t,a,N]);return o.a.createElement(Oa.a,Object.assign({},m,{className:Y()(S.cardItem,S.card),style:Object(u.a)({},n),onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1)}}),o.a.createElement("div",{className:S.stickyElement},o.a.createElement("div",{className:S.title},o.a.createElement("div",d,o.a.createElement(Cr.a,{className:S.dragHandle,style:{visibility:k?"visible":"hidden"}})),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(c,{record:a,onEdit:l}),o.a.createElement("div",null,o.a.createElement(K.a,{onClick:function(e){e.stopPropagation(),v(e.currentTarget)},size:"small"},o.a.createElement(jr.a,{style:{fontSize:15}})),o.a.createElement(yr.a,{anchorEl:b,open:Boolean(b),onClose:w,classes:{paper:S.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},i&&o.a.createElement(ba.a,{onClick:function(e){e.stopPropagation(),w(),T()}},x("delete"))))))),o.a.createElement(sa,{open:O,onClose:N,onConfirm:I,title:x("deleteTask")}))}Ir.defaultProps={onDelete:function(){},record:{},style:{},Card:function(e){var t=e.record,a=e.onEdit,n=Nr(),c=Object(r.useState)({name:t.name,taskStatus:t.taskStatus}),i=Object(z.a)(c,2),l=i[0],s=i[1],d=Object(r.useState)(!1),m=Object(z.a)(d,2),p=m[0],f=m[1],b=o.a.useContext(Lo).selectedProject,v=o.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;e.stopPropagation(),s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(R.a)({},a,n))}))}),[]),h=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(n){var r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.stopPropagation(),r=p?t.statusBeforeComplete:Kn(b),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{taskStatus:r})})),e.next=5,Ce(Object(u.a)(Object(u.a)({},t),{},{taskStatus:r,statusBeforeComplete:t.taskStatus}));case 5:(o=e.sent)&&a(Object(u.a)({},o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t,p,b]),g=o.a.useCallback(Object(L.a)(A.a.mark((function e(){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===l.name){e.next=5;break}return e.next=3,Ce(Object(u.a)(Object(u.a)({},t),{},{name:l.name}));case 3:n=e.sent,a(Object(u.a)({},n));case 5:case"end":return e.stop()}}),e)}))),[l,a,t]);return Object(r.useEffect)((function(){s(t);var e=Jn(t,b);f(e)}),[t,b]),o.a.createElement("div",{className:n.cardTask},o.a.createElement(K.a,{size:"small",onClick:h,className:n.checkIconButton},p?o.a.createElement(Tr.a,{fontSize:"small",style:{color:"#25e8c8"},className:n.checkedIcon}):o.a.createElement(Sr.a,{fontSize:"small",style:{color:"#b4b6b8"},className:n.checkedIcon})),o.a.createElement(J.a,{onClick:function(e){return e.stopPropagation()},onChange:v,onBlur:g,name:"name",value:l.name,InputProps:{disableUnderline:!0},className:n.input,style:{marginRight:2}},t.name))},canDelete:!0,canEdit:!0,onEdit:function(){}};var Dr=Object($.a)({input:{fontSize:14,color:"black"},label:{fontSize:14},iconSelected:{fontSize:"0.75rem",color:"white",margin:"0px 8px",height:28,width:28}});function Pr(e){var t=e.model,a=e.optionLabel,n=void 0===a?"name":a,c=e.index,i=e.value,l=void 0===i?[]:i,s=e.update,m=e.criteriaIds,p=e.operator,f=void 0===p?"and":p,b=e.classes,v=void 0===b?{}:b,h=e.className,g=e.disableClearable,k=e.TextFieldProps,y=void 0===k?{}:k,E=e.options,j=e.criteria,O=e.getAvatarColor,C=Object(r.useState)(!1),x=Object(z.a)(C,2),S=x[0],w=x[1],T=Object(r.useState)([]),N=Object(z.a)(T,2),I=N[0],D=N[1],P=Object(r.useState)(null),F=Object(z.a)(P,2),M=F[0],B=F[1],A=Dr(),L=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=[];e&&a.push({fieldName:n,operator:"like",value:e}),j&&j&&j.map((function(e){return a.push(e)}));var r={criteria:a,operator:f},o=pe(t);return o.search({fields:["name","fullName"],data:r,limit:10,offset:0}).then((function(e){var t=e.data;t&&t.length&&D(Object(d.a)(t))}))}),[t,f,n,j]);return function(e,t){var a=o.a.useRef(!1);o.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(o.a.useCallback((function(){M&&L(M,m)}),[L,M,m]),500),Object(r.useEffect)((function(){S||D([])}),[S]),Object(r.useEffect)((function(){S&&S&&(E&&E.length>0?D(Object(d.a)(E)):L(null,m))}),[L,S,m,E]),o.a.createElement(Lt.a,{classes:Object(u.a)({inputFocused:A.input,clearIndicator:A.input,popupIndicator:A.input,disabled:A.disabled},v),className:h,value:l,getOptionSelected:function(e,t){return e.id===t.id},size:"small",key:c,open:S,onOpen:function(e){e&&e.stopPropagation(),w(!0)},onClose:function(e){e&&e.stopPropagation(),w(!1)},options:I,disableCloseOnSelect:!0,disableClearable:g,clearOnEscape:!0,autoComplete:!0,onChange:function(e,t){s(t),w(!1)},getOptionLabel:function(e){return e[n]||""},renderOption:function(e,t){t.selected;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Dt.a,{className:A.iconSelected,style:{backgroundColor:O(e.id),border:"1px solid ".concat(O(e.id))}},e&&(e[n].substring(0,2)||"").toUpperCase()),o.a.createElement(ut.a,{style:{fontSize:14}},e[n]))},onInputChange:function(e,t){return B(t)},renderInput:function(e){return o.a.createElement(J.a,Object.assign({},e,{variant:"outlined",fullWidth:!0},y,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},y.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()},startAdornment:l&&o.a.createElement(Ea.a,{position:"start"},o.a.createElement(Dt.a,{className:A.iconSelected,style:{backgroundColor:O(l.id),border:"1px solid ".concat(O(l.id))}},l&&l[n]&&(l[n].substring(0,2)||"").toUpperCase()))}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:A&&A.label},className:h}))}})}var Fr=Object($.a)((function(e){return{typography:{textAlign:"left",textTransform:"none"},common:{width:"100%",marginBottom:15},drawerFooter:Object(R.a)({display:"flex",alignItems:"center",background:"#F6F8F9",padding:13,justifyContent:"space-between",width:"50%",position:"fixed",border:"1px solid lightgray",bottom:0,zIndex:100},e.breakpoints.only("xs"),{width:300}),commentBtnActive:{backgroundColor:"#14aaf5",color:"white",fontSize:"9pt",fontWeight:600,borderRadius:50,border:"none",marginLeft:10,textTransform:"none","&:hover":{backgroundColor:"#098ccd !important"}},formControl:{width:"100%",marginBottom:15},commentBtnDisable:{backgroundColor:"#14aaf5","&:hover":{backgroundColor:"#098ccd !important"}},select:{padding:"18.5px 14px"},picker:{width:"100%",marginBottom:15,marginTop:0,padding:0},inputClassName:{padding:"4.5px 10.5px 3.5px 10.5px"},materialSelect:{padding:10.5},addSubtaskButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},undeleteIcon:{"&:hover":{color:"black",border:"1px solid black"},textTransform:"none",padding:"2px 5px",color:"#9CA2A9",border:"1px solid #9CA2A9",marginRight:5},permanentlyDeleteIcon:{"&:hover":{background:"#E8384F",border:"1px solid #E8384F"},textTransform:"none",padding:"2px 5px",background:"#FF5263",border:"1px solid #FF5263",color:"white"},deleteContainer:{background:"#FFEDEF",justifyContent:"space-between",display:"flex",alignItems:"center",padding:12},selectContainer:{background:"#F6F8F9",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"column",padding:12},subtaskContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},subtaskHint:{color:"#6F7782",fontSize:14},commentInput:{width:"100%","& div":{borderRadius:16},"& input":{fontSize:14}}}}));function Mr(e){var t=e.task,a=o.a.useContext(Lo),n=a.onCardEdit,c=a.userId,i=a.maxFiles,l=a.attachments,s=a.addComment,m=a.removeAttachment,p=a.downloadAttachment,f=a.selectedProject,b=void 0===f?{}:f,v=a.updateSubTasks,h=a.onCardDelete,g=a.addNewSubtask,k=a.isDeleteClicked,y=a.taskIndex,E=a.premanentlyDeleteTask,j=a.undoTaskDelete,O=a.projectId,C=a.closeSubtaskOfClicked,x=a.isSubtaskOfClicked,S=a.isAddTagClicked,w=a.getAvatarColor,T=a.tasks,N=b||{},I=N.isShowPriority,D=void 0!==I&&I,P=N.isShowStatus,F=void 0!==P&&P,M=N.isShowProgress,B=void 0!==M&&M,H=N.isShowTaskCategory,V=void 0!==H&&H,q=Object(r.useState)({name:"",project:{},parentTask:{},assignedTo:{},taskStatus:"",taskPriority:"",teamTaskCategory:"",taskDate:null,progressSelect:0,taskEndDate:null,description:"",categorySet:[]}),U=Object(z.a)(q,2),_=U[0],X=U[1],$=_||{},Z=$.name,ee=$.project,te=$.parentTask,ae=$.assignedTo,ne=$.taskStatus,re=$.taskPriority,oe=$.taskDate,ce=$.progressSelect,ie=$.taskEndDate,le=$.description,se=$.categorySet,ue=$.teamTaskCategory,de=Fr(),me=Object(r.useState)(null),pe=Object(z.a)(me,2)[1],fe=Object(r.useState)({limit:4,total:0,offset:0}),be=Object(z.a)(fe,2),ve=be[0],he=be[1],ge=Object(r.useState)(null),ke=Object(z.a)(ge,2),ye=ke[0],Ee=ke[1],je=Object(r.useState)({message:"",open:!1,severity:"success"}),Oe=Object(z.a)(je,2),xe=Oe[0],Se=Oe[1],we=Object(r.useState)(""),Te=Object(z.a)(we,2),Ne=Te[0],Ie=Te[1],De=Object(r.useState)([]),Pe=Object(z.a)(De,2),Fe=Pe[0],Me=Pe[1],ze=Object(r.useState)(null),Ae=Object(z.a)(ze,2),He=Ae[0],Re=Ae[1],Ve=Object(Q.a)().t,We=function(e){var t=e.severity,a=e.message;Se({open:!0,severity:t,message:a})},qe=function(){var e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce(t);case 2:(a=e.sent)&&(n({column:Object(u.a)({},a.teamTaskSection||{}),record:Object(u.a)({},a)}),X(Object(u.a)({},a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(e){X(Object(u.a)(Object(u.a)({},_),{},Object(R.a)({},e.target.name,e.target.value))),"name"!==e.target.name&&_e(e)},Ue=function(e,t){var a=Object(u.a)(Object(u.a)({},_),{},Object(R.a)({},t,"taskDate"!==t&&"taskEndDate"!==t||!e?e:W()(e).format("YYYY-MM-DD")));"taskStatus"===t&&(a.statusBeforeComplete=_.taskStatus),X(a),qe(a)},_e=function(e){qe(Object(u.a)(Object(u.a)({},_),{},Object(R.a)({},e.target.name,e.target.value)))},Xe=function(){var e=Object(L.a)(A.a.mark((function e(){var a,n,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ve.limit,n=ve.offset,e.next=3,Be({offset:n+4,limit:a,id:t.id,relatedModel:"com.axelor.team.db.TeamTask"});case 3:(r=e.sent)&&(o=[].concat(Object(d.a)(ye),Object(d.a)(r.comments)),Ee(o),he(Object(u.a)(Object(u.a)({},ve),{},{offset:r.offset,total:r.total})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ve.total,e.next=3,Le(t);case 3:(n=e.sent)&&n.id?(r=ye.findIndex((function(e){return e.id===n.id})),ye.splice(r,1),he(Object(u.a)(Object(u.a)({},ve),{},{total:a-1})),Ee(ye),We({message:"Removed successfully"})):We({message:"Error",severity:"error"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=o.a.useCallback(Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ne){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s(Ne);case 4:(t=e.sent)&&(Ie(""),Ee((function(e){return[t].concat(Object(d.a)(e||[]))})));case 6:case"end":return e.stop()}}),e)}))),[s,Ne]);return Object(r.useEffect)((function(){X(Object(u.a)({},t)),function(){var e=Object(L.a)(A.a.mark((function e(){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be({id:t.id,relatedModel:"com.axelor.team.db.TeamTask"});case 2:(a=e.sent)&&(Ee(a.comments),he({limit:4,offset:a.offset,total:a.total}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(r.useEffect)((function(){var e=T&&T.filter((function(e){return e.parentTask&&e.parentTask.id===t.id}));Me(Object(d.a)(e||[]))}),[T,t]),o.a.createElement(st.a,{container:!0},k&&o.a.createElement(st.a,{item:!0,xs:12,className:de.deleteContainer},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(ht.a,{style:{color:"#E8384F"}}),o.a.createElement(ut.a,{style:{color:"#E8384F",fontSize:14}},Ve("taskDeleted"))),o.a.createElement("div",null,o.a.createElement(G.a,{variant:"outlined",className:de.undeleteIcon,onClick:function(){return j(_,y)}},Ve("undelete")),o.a.createElement(G.a,{variant:"outlined",className:de.permanentlyDeleteIcon,onClick:E},Ve("deletePermenantly")))),x&&o.a.createElement(st.a,{item:!0,xs:12,className:de.selectContainer},o.a.createElement("div",{className:de.subtaskContainer},o.a.createElement(ut.a,{className:de.subtaskHint},Ve("makeSubtask")),o.a.createElement(K.a,{onClick:C},o.a.createElement(kt.a,null))),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(aa,{model:"com.axelor.team.db.TeamTask",title:"Parent Task",optionLabel:"fullName",name:"parentTask",value:He,onChange:function(e){Re(e),Ue(e,"parentTask"),C()},data:te,label:Ve("findTask"),criteria:[{fieldName:"id",operator:"!=",value:t.id},{fieldName:"project.id",operator:"!=",value:O}],operator:"and"}))),o.a.createElement(st.a,{item:!0,container:!0,style:{padding:15}},o.a.createElement(st.a,{item:!0,xs:12},o.a.createElement(J.a,{style:{width:"100%",marginBottom:15},name:"name",placeholder:Ve("subject"),variant:"outlined",value:Z,onChange:Ye,onBlur:_e})),o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("project"))),o.a.createElement(st.a,{item:!0,xs:8,className:de.formControl},o.a.createElement(aa,{model:"com.axelor.apps.project.db.Project",title:"Project",name:"project",optionLabel:"fullName",value:ee,onChange:function(e){return Ue(e,"project")}})),o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("parentTask"))),o.a.createElement(st.a,{item:!0,xs:8,className:de.formControl},o.a.createElement(aa,{model:"com.axelor.team.db.TeamTask",title:"Parent Task",optionLabel:"fullName",name:"parentTask",value:te,onChange:function(e){return Ue(e,"parentTask")},data:te,criteria:[{fieldName:"id",operator:"!=",value:t.id},{fieldName:"project.id",operator:"=",value:O}],operator:"and"})),o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("assignedTo"))),o.a.createElement(st.a,{item:!0,xs:8,className:de.formControl},o.a.createElement(Pr,{model:"com.axelor.auth.db.User",title:"Assigned To",optionLabel:"fullName",name:"assignedTo",value:ae,update:function(e){Ue(e,"assignedTo")},options:b.membersUserSet,getAvatarColor:w})),F&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("status"))),o.a.createElement(st.a,{item:!0,xs:8},o.a.createElement(ga,{className:de.formControl,value:ne,name:"taskStatus",options:b.teamTaskStatusSet,onChange:function(e,t){return Ue(e,t.target.name)},getAvatarColor:w}))),D&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("priority"))),o.a.createElement(st.a,{item:!0,xs:8},o.a.createElement(ga,{className:de.formControl,value:re,name:"taskPriority",options:b.teamTaskPrioritySet,colorOption:ir,colorField:"technicalTypeSelect",onChange:function(e,t){return Ue(e,t.target.name)}}))),V&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("category"))),o.a.createElement(st.a,{item:!0,xs:8},o.a.createElement(ga,{className:de.formControl,value:ue,name:"teamTaskCategory",options:b.teamTaskCategorySet,onChange:function(e,t){return Ue(e,t.target.name)},getAvatarColor:w}))),B&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("progress"))),o.a.createElement(st.a,{item:!0,xs:8},o.a.createElement(dt.a,{variant:"outlined",style:{width:"100%",marginBottom:15}},o.a.createElement(mt.a,{native:!0,value:ce,onChange:Ye,classes:{select:de.materialSelect},inputProps:{name:"progressSelect",id:"outlined-progressSelect"}},o.a.createElement("option",{"aria-label":Ve("none"),value:""}),[0,10,20,30,40,50,60,70,80,90,100].map((function(e){return o.a.createElement("option",{key:e,value:e},e," %")})))))),(S||se&&se.length>0)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("tags"))),o.a.createElement(st.a,{item:!0,xs:8,className:de.formControl},o.a.createElement(vr,{model:"com.axelor.apps.project.db.TeamTaskCategory",title:"categorySet",optionLabel:"name",name:"categorySet",value:se,update:function(e){Ue(e,"categorySet")}}))),o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("taskDate"))),o.a.createElement(st.a,{item:!0,xs:8},o.a.createElement(pa,{className:de.picker,inputClassName:de.inputClassName,value:oe,name:"taskDate",label:Ve("taskDate"),onChange:function(e,t){return Ue(e,"taskDate")}})),o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("taskEnd"))),o.a.createElement(st.a,{item:!0,xs:8},o.a.createElement(pa,{className:de.picker,inputClassName:de.inputClassName,value:ie,name:"taskEndDate",label:Ve("taskEnd"),onChange:function(e,t){return Ue(e,"taskEndDate")}})),o.a.createElement(st.a,{item:!0,xs:4},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("description"))),o.a.createElement(st.a,{item:!0,xs:8,style:{width:"100%",marginBottom:15,border:"1px solid #C4C4C4",borderRadius:4}},o.a.createElement(Tt,{placeholder:"editor",content:le||"",onContentChange:function(e){return function(e){pe(e)}(e)},onDescriptionChange:function(e){return function(e){qe(Object(u.a)(Object(u.a)({},_),{},{description:e}))}(e)}})),l&&l.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(st.a,{item:!0,xs:12},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("attachments"))),o.a.createElement(st.a,{item:!0,xs:12},o.a.createElement(Zt,{files:l,maxFiles:i,removeAttachment:m,downloadAttachment:p}))),Fe&&Fe.length>0&&o.a.createElement(st.a,{item:!0,xs:12},o.a.createElement(ut.a,{variant:"overline",className:de.typography,display:"block",gutterBottom:!0},Ve("subTasks"))),Fe&&Fe.length>0&&o.a.createElement(st.a,{item:!0,xs:12},o.a.createElement(pt.a,{onDragEnd:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(z.a)(r,1)[0];return n.splice(a,0,o),n}(Fe,e.source.index,e.destination.index);Me(t)}}},o.a.createElement(pt.c,{droppableId:"droppable"},(function(e){return o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),Fe.map((function(e,t){return e.parentTask&&e.parentTask.id===_.id&&o.a.createElement(pt.b,{key:e.id,draggableId:"".concat(e.id),index:t},(function(t){return o.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps),o.a.createElement(Ir,{record:e,onDelete:function(e){return function(e){if(e){var t=Object(d.a)(Fe),a=Fe.findIndex((function(t){return t.id===e.id}));t.splice(a,1),Me(Object(d.a)(t)),v(Object(d.a)(t)),h({column:Object(u.a)({},e.teamTaskSection||{}),record:Object(u.a)({},e)})}}(e)},onEdit:function(e){return function(e){n({column:Object(u.a)({},e.teamTaskSection||{}),record:Object(u.a)({},e)});var t=Object(d.a)(Fe);t[Fe.findIndex((function(t){return t.id===e.id}))]=Object(u.a)({},e),Me(Object(d.a)(t)),v(Object(d.a)(t))}(e)}}))}))})),e.placeholder)})))),o.a.createElement(st.a,{item:!0,xs:12,style:{textAlign:"left"}},o.a.createElement(G.a,{startIcon:o.a.createElement(bt.a,null),className:de.addSubtaskButton,onClick:function(){return g(_)}},Ve("addSubtask")))),o.a.createElement(st.a,{item:!0,xs:12},o.a.createElement(Bt,{limit:ve.limit,offset:ve.offset,total:ve.total,comments:ye,loadComment:Xe,removeComment:function(e){return Ge(e)},userId:c})),o.a.createElement(st.a,{className:de.drawerFooter},o.a.createElement(st.a,{style:{flex:1}},o.a.createElement(J.a,{className:de.commentInput,size:"small",name:"name",placeholder:Ve("comment"),variant:"outlined",value:Ne,onChange:function(e){return Ie(e.target.value)}})),o.a.createElement(st.a,null,o.a.createElement(G.a,{variant:"contained",color:"primary",className:Y()(de.commentBtnActive,Object(R.a)({},de.commentBtnDisable,!Ne)),onClick:Ke},Ve("add")))),o.a.createElement(Ut,Object.assign({},xe,{closeSnackbar:function(){Se(Object(u.a)(Object(u.a)({},xe),{},{open:!1}))}})))}var zr=Object($.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},icon:{fill:"#6f7782",height:"1em",marginRight:8,width:"1em"},typography:{color:"#151b26",fontSize:14},menuPaper:{border:"1px solid #d3d4d5"}}}));function Br(e){var t=e.anchorEl,a=e.isDialog,n=zr(),r=o.a.useContext(Lo),c=r.handleClose,i=r.deleteTask,l=r.task,s=void 0===l?{}:l,u=r.handleFullScreenOpen,d=r.onSubtaskOfClicked,m=r.onAddTagClicked,p=r.handleDuplicateTaskDialogOpen,f=r.handleConvertToProjectDialogOpen,b=r.handlePrintPDFDialog,v=Object(Q.a)().t;return o.a.createElement("div",{className:n.root},o.a.createElement("div",null,o.a.createElement(yr.a,{anchorEl:t,open:Boolean(t),onClose:c,classes:{paper:n.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},!a&&o.a.createElement(ba.a,{onClick:function(e){c(e),u()}},o.a.createElement("svg",{className:n.icon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M13.7,19.7L5.4,28H13c0.6,0,1,0.4,1,1s-0.4,1-1,1H3c-0.6,0-1-0.4-1-1V19c0-0.6,0.4-1,1-1s1,0.4,1,1v7.6l8.3-8.3c0.4-0.4,1-0.4,1.4,0S14.1,19.3,13.7,19.7z M29,2H19c-0.6,0-1,0.4-1,1s0.4,1,1,1h7.6l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L28,5.4V13c0,0.6,0.4,1,1,1s1-0.4,1-1V3C30,2.4,29.6,2,29,2z"})),o.a.createElement(ut.a,{className:n.typography},v("fullScreen"))),o.a.createElement(ba.a,{onClick:function(e){c(e),m()}},o.a.createElement("svg",{className:n.icon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M18.6,31c-1.6,0-3.1-0.6-4.3-1.8L3.8,18.7C2.6,17.6,2,16,2,14.4V7.3C2,4.4,4.4,2,7.3,2h7.1c1.6,0,3.2,0.6,4.3,1.8l10.5,10.5c2.4,2.4,2.4,6.3,0,8.6l-6.3,6.3C21.7,30.4,20.2,31,18.6,31z M7.3,4C5.5,4,4,5.5,4,7.3v7.1c0,1.1,0.4,2.1,1.2,2.9l10.5,10.5c1.6,1.6,4.2,1.6,5.8,0l6.3-6.3c1.6-1.6,1.6-4.2,0-5.8L17.3,5.2C16.5,4.4,15.5,4,14.4,4H7.3z M10,13c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S11.7,13,10,13z M10,9c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S10.6,9,10,9z"})),o.a.createElement(ut.a,{className:n.typography},v("addTags"))),o.a.createElement(ba.a,{onClick:d},o.a.createElement("svg",{className:n.icon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M15,13c0-0.6-0.4-1-1-1H3c-0.6,0-1-0.4-1-1V7c0-0.6,0.4-1,1-1h11c0.6,0,1-0.4,1-1s-0.4-1-1-1H3C1.3,4,0,5.3,0,7v4c0,1.7,1.3,3,3,3h11C14.6,14,15,13.6,15,13z M29,18h-3v-6c0-2.2-1.8-4-4-4h-4.6l2.3-2.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-4,4c-0.4,0.4-0.4,1,0,1.4c0,0,0,0,0,0l4,4c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0c0.4-0.4,0.4-1,0-1.4c0,0,0,0,0,0L17.4,10H22c1.1,0,2,0.9,2,2v6H9c-1.7,0-3,1.3-3,3v4c0,1.7,1.3,3,3,3h20c1.7,0,3-1.3,3-3v-4C32,19.3,30.7,18,29,18z M30,25c0,0.6-0.4,1-1,1H9c-0.6,0-1-0.4-1-1v-4c0-0.6,0.4-1,1-1h20c0.6,0,1,0.4,1,1V25z"})),o.a.createElement(ut.a,{className:n.typography},v("makeSubTaskOf"))),o.a.createElement(Pt.a,null),o.a.createElement(ba.a,{onClick:function(e){c(e),p()}},o.a.createElement(ut.a,{className:n.typography},v("duplicateTask"))),o.a.createElement(ba.a,{onClick:function(e){c(e),b()}},o.a.createElement(ut.a,{className:n.typography},v("print"))),o.a.createElement(ba.a,{onClick:function(e){c(e),f()}},o.a.createElement(ut.a,{className:n.typography},v("convertToProject"))),o.a.createElement(Pt.a,null),o.a.createElement(ba.a,{onClick:function(e){c(e),i({column:s.teamTaskSection,record:s})}},o.a.createElement(ut.a,{className:n.typography,style:{color:"#ED4F5F"}},v("deleteTask"))))))}var Ar=Object($.a)((function(e){return{paper:{display:"flex",alignItems:"center"},main:{display:"flex",alignItems:"center",justifyContent:"center"},content:{width:"50%",height:"100%"},drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{position:"fixed",justifyContent:"space-between",width:"50%",height:50,boxSizing:"border-box",minHeight:"".concat(50,"px !important"),boxShadow:e.shadows[4]}),markComplete:{textTransform:"none",color:"#6F7782","&:hover":{color:"#00bf9c",borderColor:"#00bf9c"}},toolbarIcon:{fill:"#6f7782",height:16,width:16},toolbarIconButton:{padding:10},fullScreenForm:{marginTop:50,height:"100%",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"},copyToClipboard:{position:"absolute",opacity:0}}}));function Lr(e){var t=e.open,a=e.handleFullScreenClose,n=e.toggleStatus,r=e.isCompleted,c=e.upload,i=e.attachmentList,l=e.addNewSubtask,s=e.getSubTaskIcon,u=e.subTasks,d=e.copyToClipboard,m=e.anchorEl,p=e.handleToggle,f=e.contextTask,b=e.task,v=e.selectFile,h=e.headerClass,g=e.isDialog,k=Ar(),y=Object(Q.a)().t;return o.a.createElement(na.a,{fullScreen:!0,open:t,onClose:a,classes:{paper:k.paper}},o.a.createElement("div",{className:Y()(k.drawerHeader,h)},o.a.createElement("div",null,o.a.createElement(G.a,{variant:"outlined",size:"small",className:k.markComplete,startIcon:o.a.createElement(_.a,null),onClick:n,style:{color:r?"white":"#6F7782",background:r?"#00bf9c":"white"}},y(r?"completed":"markComplete"))),o.a.createElement("div",null,o.a.createElement(K.a,{onClick:c,className:k.toolbarIconButton},o.a.createElement("svg",{className:k.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M19,32c-3.9,0-7-3.1-7-7V10c0-2.2,1.8-4,4-4s4,1.8,4,4v9c0,0.6-0.4,1-1,1s-1-0.4-1-1v-9c0-1.1-0.9-2-2-2s-2,0.9-2,2v15c0,2.8,2.2,5,5,5s5-2.2,5-5V10c0-4.4-3.6-8-8-8s-8,3.6-8,8v5c0,0.6-0.4,1-1,1s-1-0.4-1-1v-5C6,4.5,10.5,0,16,0s10,4.5,10,10v15C26,28.9,22.9,32,19,32z"})),i&&i.length>0&&o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},i.length),o.a.createElement("input",{id:"inputFile",type:"file",name:"file",multiple:!0,onChange:v,style:{display:"none"}})),o.a.createElement(K.a,{onClick:function(){return l(b)},className:k.toolbarIconButton},s(),u&&u.length>0&&o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},u.length)),o.a.createElement(K.a,{onClick:function(){return d()},className:k.toolbarIconButton},o.a.createElement("svg",{className:k.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))),o.a.createElement(K.a,{onClick:function(e){return p(e,!0)},className:k.toolbarIconButton},o.a.createElement("svg",{className:k.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M16,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S14.3,13,16,13z M3,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S1.3,13,3,13z M29,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S27.3,13,29,13z"}))),o.a.createElement(K.a,{onClick:a,className:k.toolbarIconButton},o.a.createElement("svg",{className:k.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M18.1,16L27,7.1c0.6-0.6,0.6-1.5,0-2.1s-1.5-0.6-2.1,0L16,13.9l-8.9-9C6.5,4.3,5.6,4.3,5,4.9S4.4,6.4,5,7l8.9,8.9L5,24.8c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4l8.9-8.9l8.9,8.9c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4c0.6-0.6,0.6-1.5,0-2.1L18.1,16z"}))))),o.a.createElement("div",{className:k.main,onClick:a},o.a.createElement("div",{className:k.content,onClick:function(e){return e.stopPropagation()}},o.a.createElement("div",{className:k.fullScreenForm},(f||b)&&o.a.createElement(Mr,{task:f||b}),o.a.createElement(Br,{anchorEl:m,isDialog:g})))))}var Hr=a(821),Rr=Object($.a)((function(){return{paper:{minWidth:"50%",padding:15}}}));function Vr(e){var t=e.open,a=e.handleClose,n=e.updateSubTasks,c=e.subTasks,i=e.task,l=e.attachmentList,s=e.onCardAdd,m=e.setSnackbarProps,p=Object(r.useState)({name:""}),f=Object(z.a)(p,2),b=f[0],v=f[1],h=o.a.useState({description:!1,parentTask:!1,attachments:!1,categorySet:!1,teamTaskSection:!0,taskEndDate:!1,taskPriority:!1,taskStatus:!1,taskDate:!0,progressSelect:!1,teamTaskCategory:!1}),g=Object(z.a)(h,2),k=g[0],y=g[1],E=Rr(),j=Object(Q.a)().t,O=function(e){y(Object(u.a)(Object(u.a)({},k),{},Object(R.a)({},e.target.name,e.target.checked))),e.target.checked&&v(Object(u.a)(Object(u.a)({},b),{},Object(R.a)({},e.target.name,i[e.target.name])))},C=function(){var e=Object(L.a)(A.a.mark((function e(t,a){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={fileName:t.fileName,metaFile:{id:t.id},relatedId:a,relatedModel:"com.axelor.team.db.TeamTask"},e.next=3,Qe(n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.taskDate||v(Object(u.a)(Object(u.a)({},b),{},{taskDate:W()()})),k.teamTaskSection||v(Object(u.a)(Object(u.a)({},b),{},{teamTaskSection:null})),e.next=4,je(Object(u.a)({},b));case 4:(t=e.sent)&&(k.attachments&&l&&l.forEach((function(e){C(e,t.id)})),m({message:"".concat(b.name," is created successfully"),severity:"success",open:!0,autoHideDuration:3e3}),s({column:t.teamTaskSection,record:t}),t.parentTask&&n([].concat(Object(d.a)(c),[t]))),a();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i&&v({name:"(COPY) ".concat(i.name),assignedTo:i.assignedTo,project:i.project,teamTaskSection:i.teamTaskSection,taskDate:i.taskDate})}),[i]),o.a.createElement(na.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:E.paper}},o.a.createElement(ra.a,{id:"form-dialog-title"},j("duplicateTask")),o.a.createElement(oa.a,null,o.a.createElement(st.a,null,o.a.createElement(J.a,{style:{width:"100%",marginBottom:15},placeholder:"Task name",variant:"outlined",value:b.name,name:"name",onChange:function(e){v(Object(u.a)(Object(u.a)({},b),{},Object(R.a)({},e.target.name,e.target.value)))}})),o.a.createElement(st.a,null,o.a.createElement(ut.a,{variant:"caption"},j("include")),o.a.createElement(Hr.a,null,cr.map((function(e,t){return o.a.createElement(Ua.a,{key:t,control:o.a.createElement(Xa.a,{color:"primary",checked:k[e.name],onChange:O,name:e.name}),label:e.label})}))))),o.a.createElement(ia.a,null,o.a.createElement(G.a,{onClick:x,variant:"outlined",color:"primary",style:{textTransform:"none"}},j("createNewTask"))))}var Wr=Object($.a)((function(){return{paper:{minWidth:"50%",padding:15}}}));function qr(e){var t=e.open,a=e.handleClose,n=e.task,c=e.setSnackbarProps,i=Object(r.useState)({name:"",code:"",projectTypeSelect:1,isProject:!0,statusSelect:1}),l=Object(z.a)(i,2),s=l[0],d=l[1],m=Object(r.useState)({description:!1,assignedTo:!1}),p=Object(z.a)(m,2),f=p[0],b=p[1],v=Wr(),h=Object(Q.a)().t,g=function(e){b(Object(u.a)(Object(u.a)({},f),{},Object(R.a)({},e.target.name,e.target.checked))),e.target.checked&&d(Object(u.a)(Object(u.a)({},s),{},Object(R.a)({},e.target.name,n[e.target.name])))},k=function(){var e=Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)({},s),f.assignedTo&&(t.membersUserSet=[Object(u.a)({},s.assignedTo)]),f.description||(t.description=null),e.next=5,ye(Object(u.a)({},t));case 5:e.sent&&c({message:"".concat(s.name," is created successfully"),severity:"success",open:!0,autoHideDuration:3e3}),a();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&d({name:n.name,code:n.name})}),[n]),o.a.createElement(na.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:v.paper}},o.a.createElement(ra.a,{id:"form-dialog-title"},h("convertTaskToProject")),o.a.createElement(oa.a,null,o.a.createElement(st.a,null,o.a.createElement(J.a,{style:{width:"100%",marginBottom:15},placeholder:h("projectName"),variant:"outlined",value:s.name,name:"name",onChange:function(e){var t;d(Object(u.a)(Object(u.a)({},s),{},(t={},Object(R.a)(t,e.target.name,e.target.value),Object(R.a)(t,"code",e.target.value),t)))}})),o.a.createElement(st.a,null,o.a.createElement(ut.a,{variant:"caption"},h("include")),o.a.createElement(Hr.a,null,o.a.createElement(Ua.a,{control:o.a.createElement(Xa.a,{color:"primary",checked:f.description,onChange:g,name:"description"}),label:h("taskDescriptionAsProjectDescription")}),o.a.createElement(Ua.a,{control:o.a.createElement(Xa.a,{color:"primary",checked:f.assignedTo,onChange:g,name:"assignedTo"}),label:h("taskUserAsProjectMembers")})))),o.a.createElement(ia.a,null,o.a.createElement(G.a,{onClick:k,variant:"outlined",color:"primary",style:{textTransform:"none"}},h("convert"))))}var Yr=a(25),Ur=Object($.a)((function(){return{paper:{minWidth:"50%",width:"100%",height:"100%"},pdfViewer:{width:"100%",height:"100%"},dialogContent:{overflow:"hidden"}}})),_r=Yr.e.create({page:{flexDirection:"column",padding:20,fontSize:14},header:{flexDirection:"row",justifyContent:"space-between",fontSize:14,margin:"5px 0px"},title:{fontSize:30,fontWeight:800},caption:{color:"#8DA3A6",fontSize:14},section:{margin:"5px 0px"},taskName:{fontSize:16},sectionDetails:{margin:"5px 0px",fontSize:12,marginLeft:15},avatar:{width:30,height:30,position:"relative",alignItems:"center",borderRadius:"50%",justifyContent:"center"},img:{color:"transparent",width:"100%",height:"100%",objectFit:"cover",textAlign:"center",textIndent:1e4},commentContainer:{flexDirection:"row",alignItems:"flex-start",marginBottom:10},commentList:{marginLeft:20}});function Xr(e){var t=e.open,a=e.handleClose,n=e.task,c=e.subTasks,i=Ur(),l=Object(r.useState)(null),s=Object(z.a)(l,2),u=s[0],d=s[1],m=Object(Q.a)().t,p=function(){return o.a.createElement(Yr.a,null,o.a.createElement(Yr.d,{size:"A4",style:_r.page},o.a.createElement(Yr.g,{style:_r.header},o.a.createElement(Yr.f,null,W()().format("DD/MM/YYYY")),o.a.createElement(Yr.f,null,"\u2022 ",n.project.fullName," - ",n.name)),o.a.createElement(Yr.g,{style:_r.section},o.a.createElement(Yr.f,{style:_r.title},n.name),o.a.createElement(Yr.f,{style:_r.caption},m("printedFromAOP"))),o.a.createElement(Yr.g,{style:_r.header},o.a.createElement(Yr.g,{style:{flexDirection:"row"}},o.a.createElement(Yr.f,null,"\u2022"),o.a.createElement(Yr.f,{style:[_r.taskName,{marginLeft:10}]},n.assignedTo.fullName," ",n.name)),n.taskEndDate&&o.a.createElement(Yr.f,null,m("dueDate"),": ",W()(n.taskEndDate).format("DD/MM/YYYY"))),o.a.createElement(Yr.g,{style:_r.sectionDetails},n.taskPriority&&o.a.createElement(Yr.f,null,m("priotiry"),": ",n.taskPriority.name),n.taskStatus&&o.a.createElement(Yr.f,null,m("status"),": ",n.taskStatus.name),o.a.createElement(Yr.f,null,m("section"),": ",n.teamTaskSection&&n.teamTaskSection.name)),n.description&&o.a.createElement(Yr.g,{style:_r.section},o.a.createElement(Yr.f,null,m("description"),": ",n.description)),o.a.createElement(Yr.g,{style:_r.section},c&&c.length>0&&c.map((function(e,t){return o.a.createElement(Yr.g,{key:t,style:{flexDirection:"row"}},o.a.createElement(Yr.f,{style:[_r.taskName,{marginLeft:10}]},"\u2022"),o.a.createElement(Yr.f,{style:[_r.taskName,{marginLeft:15}]},e.name))}))),o.a.createElement(Yr.g,{style:_r.section},u&&u.map((function(e,t){var a="notification"===e.type?JSON.parse(e.body):"";return o.a.createElement(Yr.g,{key:t,style:_r.commentList},o.a.createElement(Yr.g,{style:_r.commentContainer},o.a.createElement(Yr.g,{style:_r.avatar},o.a.createElement(Yr.b,{style:_r.img,source:"User",src:Mt.a})),o.a.createElement(Yr.g,{style:{flexDirection:"column"}},o.a.createElement(Yr.g,{style:{flexDirection:"column",paddingLeft:20}},o.a.createElement(Yr.g,{style:{flexDirection:"row"}},o.a.createElement(Yr.f,null,e.$author&&e.$author.fullName),o.a.createElement(Yr.f,{style:{color:"#D3D3D3",paddingLeft:"5px"}}," ","- ",W()(e.$eventTime).format("DD/MM h:mm")," ")),a?o.a.createElement(Yr.g,{style:{flexDirection:"column"}},o.a.createElement(Yr.f,{style:{fontWeight:600,textAlign:"left"}},a.title),o.a.createElement(Yr.g,{style:{paddingLeft:20,display:a.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},a.tracks.map((function(e,t){return o.a.createElement(Yr.f,{key:t},e.displayValue?o.a.createElement(Yr.g,null,o.a.createElement(Yr.f,{style:{fontWeight:600}},"\u2022 ",e.title," : "),o.a.createElement(Yr.f,null,e.oldDisplayValue&&e.oldDisplayValue+" \xbb "," ",e.displayValue)):o.a.createElement(Yr.g,null,o.a.createElement(Yr.f,{style:{fontWeight:600}},"\u2022 ",e.title," : "),o.a.createElement(Yr.f,null,e.oldValue&&e.oldValue+" \xbb "," ",e.value)))})))):o.a.createElement(Yr.f,{style:{textOverflow:"ellipsis",wordBreak:"break-word"}},e.body)))))})))))};return Object(r.useEffect)((function(){n&&function(){var e=Object(L.a)(A.a.mark((function e(){var t;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be({id:n.id,relatedModel:"com.axelor.team.db.TeamTask",limit:25});case 2:(t=e.sent)&&d(t.comments);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),o.a.createElement(na.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:i.paper}},o.a.createElement(ra.a,{id:"form-dialog-title"},m("download")),o.a.createElement(oa.a,{className:i.dialogContent},t&&o.a.createElement(Yr.c,{className:i.pdfViewer},o.a.createElement(p,null))),o.a.createElement(ia.a,null,o.a.createElement(G.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:a},m("ok"))))}var Gr=a(491),Kr=a(495),Jr=a(813),$r=a(873),Qr=a(814),Zr=a(484),eo=a.n(Zr),to=a(487),ao=a.n(to),no=a(485),ro=a.n(no),oo=a(486),co=a.n(oo),io=a(99),lo=a.n(io),so=a(481),uo=a.n(so),mo=a(253),po=a.n(mo),fo=Object($.a)((function(e){return{title:{display:"flex",alignItems:"center"},input:{padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%",minWidth:215},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},arrowIcon:{color:"black"},section:{minWidth:430,position:"sticky",left:0,width:"fit-content",background:"white",zIndex:200},iconContainer:{display:"flex"}}}));function bo(e){var t=e.column,a=e.ColumnHeader,n=(e.ColumnCollapsed,e.disabled),c=e.disableColumnCollapse,i=e.disableColumnDelete,l=e.customHeader,s=e.isScroll,d=e.sectionIndex,m=Object(H.a)(e,["column","ColumnHeader","ColumnCollapsed","disabled","disableColumnCollapse","disableColumnDelete","customHeader","isScroll","sectionIndex"]),p=o.a.useContext(Lo),f=p.onColumnDelete,b=p.onColumnUpdate,v=p.onColumnToggle,h=p.selectedProject,g=p.open,k=p.addNewTask,y=h||{},E=y.isShowPriority,j=void 0!==E&&E,O=y.isShowStatus,C=void 0!==O&&O,x=y.isShowProgress,S=void 0!==x&&x,w=y.isShowTaskCategory,T=void 0!==w&&w,N=t.name,I=t.collapsed,D=void 0!==I&&I,P=Object(r.useState)(!1),F=Object(z.a)(P,2),M=F[0],B=F[1],V=Object(r.useState)({name:N}),W=Object(z.a)(V,2),q=W[0],U=W[1],_=o.a.useState(!1),X=Object(z.a)(_,2),G=X[0],$=X[1],Q=t.records&&t.records.length,Z=g?1:Boolean(j)+Boolean(C)+Boolean(S)+Boolean(T),ee=o.a.useCallback((function(e){$(!0)}),[]),te=o.a.useCallback((function(e){e&&e.stopPropagation(),$(!1)}),[]),ae=o.a.useCallback((function(){te(),f({column:t})}),[f,t,te]),ne=fo(),re=o.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;U((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(R.a)({},a,n))}))}),[]),oe=o.a.useCallback(Object(L.a)(A.a.mark((function e(){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===q.name&&""!==N){e.next=6;break}return""===q.name&&U({name:"Untitled Section"}),e.next=4,Pe(Object(u.a)(Object(u.a)({},t),{},{name:q.name}));case 4:a=e.sent,b({column:Object(u.a)(Object(u.a)({},t),a)});case 6:case"end":return e.stop()}}),e)}))),[q,b,t,N]);return l?o.a.createElement(a,Object.assign({},m,{style:{width:"100%"}})):o.a.createElement(Oa.a,Object.assign({style:{display:"flex",padding:8,alignItems:"center",transition:"transform 0.3s, margin 0.2s",justifyContent:"space-between",boxShadow:"none",width:s?"fit-content":"100%",borderTop:D?"":"1px solid #E8ECEE",borderBottom:D?"":"1px solid #E8ECEE",borderRadius:"0",position:"relative"}},m,{onMouseEnter:function(){B(!0)},onMouseLeave:function(){B(!1)}}),o.a.createElement("div",{className:Y()(ne.title,ne.section)},o.a.createElement(Cr.a,{className:ne.dragHandle,style:{visibility:M?"visible":"hidden"}}),!c&&o.a.createElement(K.a,{onClick:function(){return v({column:t})},style:{padding:"0px 12px"}},D?o.a.createElement(po.a,{className:ne.arrowIcon}):o.a.createElement(jr.a,{className:ne.arrowIcon})),o.a.createElement(J.a,{onChange:re,onBlur:oe,name:"name",value:q.name,InputProps:{disableUnderline:!0},className:ne.input,placeholder:"Add Section"},N),o.a.createElement("div",{style:{visibility:M?"visible":"hidden"},className:ne.iconContainer},o.a.createElement(K.a,{onClick:function(e){return k(e,d)},style:{padding:0}},o.a.createElement(bt.a,null)),!n&&!i&&o.a.createElement(K.a,{onClick:ee,style:{padding:0}},o.a.createElement(uo.a,null)))),o.a.createElement("div",{style:{minWidth:216*Z}}),o.a.createElement(sa,{open:G,onClose:te,title:"Delete Section",content:Q?"Cannot delete section with tasks":"Do you want to delete record ?",onConfirm:ae,disabled:Boolean(Q)}))}bo.defaultProps={column:{},customHeader:!1,ColumnHeader:function(e){var t=e.title;return o.a.createElement(ut.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},o.a.createElement("b",null,t))},ColumnCollapsed:function(e){var t=e.title;return o.a.createElement(ut.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},o.a.createElement("b",null,t))},disabled:!1,disableColumnCollapse:!1,disableColumnDelete:!1};var vo=a(262),ho=a(483),go=a.n(ho),ko=a(482),yo=a.n(ko),Eo=Object($.a)((function(e){return{input:{padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%",minWidth:215,marginRight:2},cardTask:Object(R.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1)}),checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},checkIconButton:{padding:e.spacing(1)}}}));function jo(e){var t=e.record,a=e.onEdit,n=Eo(),c=Object(r.useState)({name:t.name,taskStatus:t.taskStatus}),i=Object(z.a)(c,2),l=i[0],s=i[1],d=Object(r.useState)(!1),m=Object(z.a)(d,2),p=m[0],f=m[1],b=o.a.useContext(Lo).selectedProject,v=o.a.useCallback((function(e){e.stopPropagation();var t=e.target,a=t.name,n=t.value;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(R.a)({},a,n))}))}),[]),h=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(n){var r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.stopPropagation(),r=p?t.statusBeforeComplete:Kn(b),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{taskStatus:r})})),e.next=5,Ce(Object(u.a)(Object(u.a)({},t),{},{taskStatus:r,statusBeforeComplete:t.taskStatus}));case 5:(o=e.sent)&&a(Object(u.a)({},o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t,p,b]),g=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(n){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),t.name===l.name){e.next=6;break}return e.next=4,Ce(Object(u.a)(Object(u.a)({},t),{},{name:l.name}));case 4:r=e.sent,a(Object(u.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,a,t]);return Object(r.useEffect)((function(){s(t);var e=Jn(t,b);f(e)}),[t,b]),o.a.createElement("div",{className:n.cardTask},o.a.createElement(K.a,{size:"small",onClick:h,className:n.checkIconButton},p?o.a.createElement(Tr.a,{fontSize:"small",style:{color:"#25e8c8"},className:n.checkedIcon}):o.a.createElement(Sr.a,{fontSize:"small",style:{color:"#b4b6b8"},className:n.checkedIcon})),o.a.createElement(J.a,{onClick:function(e){return e.stopPropagation()},onChange:v,onBlur:g,name:"name",value:l.name,InputProps:{disableUnderline:!0},className:n.input},t.name))}a(807);var Oo=Object($.a)((function(e){return{title:{display:"flex",alignItems:"center",flex:1},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardItem:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative"},spacer:{paddingLeft:8,paddingRight:8},stickyElement:{"&:hover":{backgroundColor:"#f5f8fa"},minWidth:430,width:"100%",display:"flex",alignItems:"center",position:"sticky",zIndex:300,left:0,padding:"0px 8px",background:"white",justifyContent:"space-between"},contextMenuItem:{fontSize:14},contextIcon:{color:"#a7a9ac",marginRight:10},contextSVGIcon:{fill:"#6f7782",height:16,width:16,marginRight:10},selection:{minWidth:200},select:Object(R.a)({marginBottom:0,minWidth:200,textAlign:"left"},e.breakpoints.only("xs"),{minWidth:150}),selectPadding:{padding:10},formControl:Object(R.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150})}})),Co=o.a.forwardRef((function(e,t){var a=e.onDelete,n=e.record,c=e.style,i=(e.canDelete,e.canEdit,e.onEdit),l=(e.disabled,e.dragHandleProps),s=void 0===l?{}:l,d=Object(H.a)(e,["onDelete","record","style","canDelete","canEdit","onEdit","disabled","dragHandleProps"]),m=Object(r.useState)(!1),p=Object(z.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(!1),h=Object(z.a)(v,2),g=h[0],k=h[1],y=Object(r.useState)(!1),E=Object(z.a)(y,2),j=E[0],O=E[1],C=o.a.useContext(Lo),x=C.getAvatarColor,S=C.selectedProject,w=C.handleDrawerOpen,T=C.project,N=void 0===T?{}:T,I=C.tasks,D=void 0===I?{}:I,P=C.open,F=void 0!==P&&P,M=C.task,B=C.copyToClipboard,V=C.addContextTask,q=Object(Q.a)().t,U=S||{},_=U.isShowPriority,X=void 0!==_&&_,G=U.isShowStatus,J=void 0!==G&&G,$=U.isShowProgress,Z=void 0!==$&&$,ee=U.isShowTaskCategory,te=void 0!==ee&&ee,ae=D&&D.length>0&&D.filter((function(e){return e.parentTask&&e.parentTask.id===n.id})).length,ne=Oo(),re=[{name:"markComplete",label:q(j?"markIncomplete":"markComplete"),icon:Sr.a},{name:"viewDetails",label:q("viewDetails"),icon:yo.a},{name:"fullScreen",label:q("fullScreen"),iconType:"svg",icon:o.a.createElement("svg",{className:ne.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M13.7,19.7L5.4,28H13c0.6,0,1,0.4,1,1s-0.4,1-1,1H3c-0.6,0-1-0.4-1-1V19c0-0.6,0.4-1,1-1s1,0.4,1,1v7.6l8.3-8.3c0.4-0.4,1-0.4,1.4,0S14.1,19.3,13.7,19.7z M29,2H19c-0.6,0-1,0.4-1,1s0.4,1,1,1h7.6l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L28,5.4V13c0,0.6,0.4,1,1,1s1-0.4,1-1V3C30,2.4,29.6,2,29,2z"}))},{name:"copyTaskLink",label:q("copyTaskLink"),iconType:"svg",icon:o.a.createElement("svg",{className:ne.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))},{name:"duplicateTask",label:q("duplicateTask"),iconType:"svg",icon:o.a.createElement("svg",{className:ne.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M27,32H13c-2.8,0-5-2.2-5-5V13c0-2.8,2.2-5,5-5h14c2.8,0,5,2.2,5,5v14C32,29.8,29.8,32,27,32z M13,10c-1.7,0-3,1.3-3,3v14  c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V13c0-1.7-1.3-3-3-3H13z M6,23c0-0.6-0.4-1-1-1c-1.7,0-3-1.3-3-3V5c0-1.7,1.3-3,3-3h14  c1.7,0,3,1.3,3,3c0,0.6,0.4,1,1,1s1-0.4,1-1c0-2.8-2.2-5-5-5H5C2.2,0,0,2.2,0,5v14c0,2.8,2.2,5,5,5C5.6,24,6,23.6,6,23z"}))},{name:"copyTaskName",label:q("copyTaskName"),iconType:"svg",icon:o.a.createElement("svg",{className:ne.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))},{name:"deleteTask",label:q("deleteTask"),icon:ht.a}],oe=o.a.useCallback((function(e){k(!0)}),[]),ce=o.a.useCallback((function(e){e&&e.stopPropagation(),k(!1)}),[]),ie=o.a.useCallback((function(e){e.stopPropagation(),ce(),a()}),[a,ce]),le=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t,a,r){var o,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(u.a)(Object(u.a)({},n),{},Object(R.a)({},t,a)),"taskStatus"===t&&(o.statusBeforeComplete=n.taskStatus),e.next=4,Ce(o);case 4:c=e.sent,i(Object(u.a)({},c));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[i,n]),se=W()().format("YYYY-MM-DD"),ue=M&&M.taskDate&&W()(M.taskDate).format("YYYY-MM-DD"),de=M&&M.taskEndDate&&W()(M.taskEndDate).format("YYYY-MM-DD"),me=ue===se||de===se?"green":ue>se||de>se?"#707883":"red",pe=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),a=j?n.statusBeforeComplete:Kn(S),e.next=4,Ce(Object(u.a)(Object(u.a)({},n),{},{taskStatus:a,statusBeforeComplete:n.taskStatus}));case 4:(r=e.sent)&&i(Object(u.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,S,n,j]);return Object(r.useEffect)((function(){var e=Jn(n,S);O(e)}),[n,S]),o.a.createElement("div",{style:{border:(n&&n.id)===(M&&M.id)?"1px solid #058EE3":"inherit"}},o.a.createElement(vo.b,{id:"".concat(n.id),name:n.name,holdToDisplay:1e3},o.a.createElement(Oa.a,Object.assign({ref:t},d,{className:Y()(ne.cardItem,ne.card),style:Object(u.a)(Object(u.a)({},c),{},{background:(n&&n.id)===(M&&M.id)?"#EDF8FF":f?"#f5f8fa":"white"}),onMouseEnter:function(){b(!0)},onMouseLeave:function(){b(!1)}}),o.a.createElement("div",{className:ne.stickyElement,style:{width:F?"50%":"100%",background:(n&&n.id)===(M&&M.id)?"#EDF8FF":f?"#f5f8fa":"white"},onClick:function(){return w(n)}},o.a.createElement("div",{className:ne.title},o.a.createElement("div",s,o.a.createElement(Cr.a,{className:ne.dragHandle,style:{visibility:f?"visible":"hidden"}})),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(jo,{record:n,onEdit:i}),ae>0&&o.a.createElement(K.a,{style:{padding:5}},o.a.createElement("span",{style:{fontSize:10.5,color:"#707883"}},ae),o.a.createElement("svg",{focusable:"false",viewBox:"0 0 32 32",style:{fill:"#6f7782",height:16,width:16}},o.a.createElement("path",{d:"M25,20c-2.4,0-4.4,1.7-4.9,4H11c-3.9,0-7-3.1-7-7v-5h16.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5s-2.2-5-5-5c-2.4,0-4.4,1.7-4.9,4H4V3c0-0.6-0.4-1-1-1S2,2.4,2,3v14c0,5,4,9,9,9h9.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5S27.8,20,25,20z M25,8c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S23.3,8,25,8z M25,28c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.7,28,25,28z"}))))),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("div",{style:{visibility:f?"visible":"hidden",display:"flex",alignItems:"center"}},o.a.createElement(ut.a,{variant:"caption",style:{color:"#707883"}},q("details")),o.a.createElement(go.a,{className:ne.dragHandle})),F&&M&&n&&n.id===M.id&&o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(ut.a,{variant:"caption",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 5px",whiteSpace:"nowrap",color:me}},M.taskDate&&W()(M.taskDate).format("DD MMM"),M.taskEndDate&&" - ".concat(W()(M.taskEndDate).format("DD MMM"))),M.assignedTo&&o.a.createElement(ut.a,{variant:"caption"},o.a.createElement(Dt.a,{"aria-label":"recipe",style:{backgroundColor:x(n.assignedTo&&n.assignedTo.id),fontSize:"0.75rem",height:25,width:25}},M.assignedTo&&M.assignedTo.fullName&&(M.assignedTo.fullName.substring(0,2)||"").toUpperCase()))))),o.a.createElement("div",{style:{display:"flex",width:"fit-content",alignItems:"center"}},!F&&o.a.createElement(o.a.Fragment,null,X&&o.a.createElement("div",{className:ne.spacer},o.a.createElement(ga,{value:n.taskPriority,name:"taskPriority",options:N.teamTaskPrioritySet,colorOption:ir,colorField:"technicalTypeSelect",onChange:function(e,t){return le("taskPriority",e,t)}})),J&&o.a.createElement("div",{className:ne.spacer},o.a.createElement(ga,{value:n.taskStatus,name:"taskStatus",options:N.teamTaskStatusSet,onChange:function(e,t){return le("taskStatus",e,t)},getAvatarColor:x})),Z&&o.a.createElement("div",{className:ne.spacer},o.a.createElement(dt.a,{variant:"outlined",className:ne.formControl},o.a.createElement(mt.a,{native:!0,className:ne.select,value:n.progressSelect,onChange:function(e){return le("progressSelect",e.target.value,e)},classes:{select:ne.selectPadding},inputProps:{name:"progressSelect",id:"outlined-progressSelect"},size:"small"},o.a.createElement("option",{"aria-label":q("none"),value:""}),[0,10,20,30,40,50,60,70,80,90,100].map((function(e){return o.a.createElement("option",{key:e,value:e},e," %")}))))),te&&o.a.createElement("div",{className:ne.spacer},o.a.createElement(ga,{className:ne.formControl,value:n.teamTaskCategory,name:"teamTaskCategory",options:N.teamTaskCategorySet,onChange:function(e,t){return le("teamTaskCategory",e,t)},getAvatarColor:x})))),o.a.createElement(sa,{open:g,onClose:ce,onConfirm:ie,title:q("deleteTask")}))),o.a.createElement(vo.a,{id:"".concat(n.id)},re.map((function(e,t){return o.a.createElement(o.a.Fragment,{key:e.name},o.a.createElement(vo.c,{onClick:function(t){return function(e,t,a){switch(e.preventDefault(),e.stopPropagation(),a){case"markComplete":return void pe();case"viewDetails":return void w(t);case"fullScreen":return void V(t,"fullScreen");case"copyTaskLink":return void B();case"duplicateTask":return void V(t,"duplicateTask");case"copyTaskName":if(!t)return;return void B(t.name,"Task name is copied to clipboard");case"deleteTask":return void oe();default:return}}(t,n,e.name)}},"svg"===e.iconType?e.icon:o.a.createElement(e.icon,{fontSize:"small",className:ne.contextIcon,style:{color:"deleteTask"===e.name?"red":"#a7a9ac"}}),o.a.createElement(ut.a,{className:ne.contextMenuItem,style:{color:"deleteTask"===e.name?"red":"inherit"}},e.label)),t>3&&o.a.createElement(Pt.a,null))}))))}));Co.defaultProps={onDelete:function(){},record:{},style:{},canDelete:!0,canEdit:!0,onEdit:function(){},disabled:!1};var xo=Co,So=o.a.memo((function(e){var t=e.disabled,a=e.column,n=e.isScroll,r=o.a.useContext(Lo),c=r.onCardEdit,i=r.onCardDelete,l=a.canMove,s=void 0===l||l,d=a.canDelete,m=void 0===d||d,p=a.canEdit,f=void 0===p||p;return a.records?a.records.map((function(e,r){return o.a.createElement(pt.b,{key:"".concat(e.id),draggableId:"task_".concat(e.id),index:r,isDragDisabled:!s||t},(function(r){return o.a.createElement(xo,Object.assign({key:e.id,ref:r.innerRef},r.draggableProps,{dragHandleProps:r.dragHandleProps,canDelete:m,canEdit:f,record:e,disabled:t,style:Object(u.a)(Object(u.a)({},r.draggableProps.style),{},{width:n?"fit-content":"100%"}),onDelete:function(){return i({record:e,column:a})},onEdit:function(e){return c({record:e,column:a})}}))}))})):o.a.createElement(o.a.Fragment,null)}));So.defaultProps={onCardDelete:function(){},disabled:!1,onCardEdit:function(){},column:{}};var wo=So;function To(e){var t=e.disabled,a=e.scrollableColumn,n=e.gutterBottom,r=e.column,c=e.isScroll,i=r.canDrop,l=void 0===i||i;return o.a.createElement(pt.c,{droppableId:"".concat(r.id),isDropDisabled:!l||t},(function(e){return o.a.createElement("div",Object.assign({style:{display:"flex",flexDirection:"column",backgroundColor:-1===r.id?"white":"inherit"}},e.droppableProps),o.a.createElement("div",{style:Object(u.a)({marginBottom:n?60:4,marginTop:4},a?{overflowX:"hidden",overflowY:"auto",padding:8,maxHeight:"".concat(200,"px")}:{}),ref:e.innerRef},o.a.createElement(wo,{disabled:t,column:r,isScroll:c}),e.placeholder))}))}To.defaultProps={onCardDelete:function(){},disabled:!1,scrollableColumn:!1,gutterBottom:!1,onCardEdit:function(){},column:{},CardListStyle:{}};var No=Object($.a)((function(e){return{column:{backgroundColor:"#fafafa",margin:8,position:"relative",boxShadow:"none"}}}));function Io(e){var t=e.index,a=e.column,n=e.isScroll,r=e.customHeader,c=void 0!==r&&r,i=a.collapsed,l=void 0!==i&&i,s=a.id,u=No();return o.a.createElement(pt.b,{draggableId:"column_".concat(s),index:t},(function(e){return o.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),o.a.createElement(Oa.a,{className:u.column},o.a.createElement(bo,Object.assign({column:a},e.dragHandleProps,{customHeader:c,isScroll:n,sectionIndex:t})),!l&&o.a.createElement(Kr.a,{in:!0,timeout:500},o.a.createElement("div",null,o.a.createElement(To,{column:a,isScroll:n})))))}))}Io.defaultProps={index:null,column:{},isScroll:!1};var Do=Object($.a)((function(e){return{toolbar:{padding:"8px 12px",textAlign:"left",display:"flex",height:50,boxSizing:"border-box",justifyContent:"space-between"},contentWrapper:{height:"calc(100% - ".concat(50,"px)"),width:"100%",display:"flex",backgroundColor:"white",overflow:"auto",flexDirection:"column"},menuItem:{"&:hover":{backgroundColor:"#e8ecee"}},addTaskButton:{textTransform:"none",borderRadius:0,borderTopLeftRadius:5,borderBottomLeftRadius:5,whiteSpace:"nowrap"},menuButton:{padding:5,borderRadius:0,border:"0.5px solid #9EA7DA",marginLeft:2,marginRight:10,borderTopRightRadius:5,borderBottomRightRadius:5,"&:hover":{border:"0.5px solid #3F51B5"}},addSectionButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},toolbarHeader:{minWidth:216,borderLeft:"1px solid #E8ECEE",borderTop:"1px solid #E8ECEE",borderBottom:"1px solid #E8ECEE",padding:16,background:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center"},toolbarSortIcon:{height:16,width:16,marginLeft:10,color:"#232933"},toolbarSortIconOnHover:{"& > .toolbarSortIcon":{height:16,width:16,marginLeft:10,color:"transparent"},"&:hover > .toolbarSortIcon":{color:"#232933"}},taskNameHeader:{minWidth:430,width:"100%",position:"sticky",left:0,background:"white",zIndex:500},parentHeader:{display:"flex",padding:"0px 8px",position:"sticky",top:0,zIndex:500,width:"100%",background:"white"},btnParent:{minWidth:430,maxWidth:430,position:"sticky",left:0,padding:"0px 16px",textAlign:"left"},contextMenuItem:{fontSize:14},contextSVGIcon:{fill:"#6f7782",height:16,width:16,marginRight:10},toolbarButton:{textTransform:"none",border:"none",color:"#32325d",marginRight:10,"&:hover":{background:"#e8ecee",borderColor:"#e8ecee",color:"#273240"}},iconSelected:{fontSize:20},clearIcon:{height:16,width:16,marginLeft:10},menuTypography:{fontSize:14,marginLeft:10},sortingOptions:{display:"flex",alignItems:"center"},menuPaper:{border:"1px solid #d3d4d5"}}})),Po={vertical:"bottom",horizontal:"center"},Fo={vertical:"top",horizontal:"center"};function Mo(){var e=o.a.useContext(Lo),t=e.columns,a=e.onCardMove,n=e.onColumnAdd,c=e.onColumnMove,i=e.sections,l=void 0===i?[]:i,s=e.searchFilter,m=e.filters,p=e.handleChangeFilter,f=e.handleSaveFilter,b=e.handleDeleteFilter,v=e.handleContentSearch,h=e.fields,g=void 0===h?[]:h,k=e.addNewTask,y=e.handleSetMenuFilter,E=e.menuFilter,j=e.filter,O=e.handleSetFilter,C=e.sortColumnName,x=e.handleSetSortColumnName,S=e.selectedProject,w=e.open,T=void 0!==w&&w,N=Object(r.useState)(null),I=Object(z.a)(N,2),D=I[0],P=I[1],F=Boolean(D),M=Object(r.useState)(null),B=Object(z.a)(M,2),H=B[0],R=B[1],V=Boolean(H),W=Object(r.useState)(null),q=Object(z.a)(W,2),U=q[0],X=q[1],J=Boolean(U),$=Object(r.useState)(!1),Z=Object(z.a)($,2),ee=Z[0],te=Z[1],ae=Object(r.useState)([]),ne=Object(z.a)(ae,2),re=ne[0],oe=ne[1],ce=S||{},ie=ce.isShowPriority,le=void 0!==ie&&ie,se=ce.isShowStatus,ue=void 0!==se&&se,de=ce.isShowProgress,me=void 0!==de&&de,pe=ce.isShowTaskCategory,fe=void 0!==pe&&pe,be=Do(),ve=Object(Q.a)().t,he=[{code:"justMyTasks",value:ve("justMyTasks"),icon:o.a.createElement("svg",{className:be.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M16,18c-4.4,0-8-3.6-8-8s3.6-8,8-8s8,3.6,8,8S20.4,18,16,18z M16,4c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S19.3,4,16,4z M29,32c-0.6,0-1-0.4-1-1v-4.2c0-2.6-2.2-4.8-4.8-4.8H8.8C6.2,22,4,24.2,4,26.8V31c0,0.6-0.4,1-1,1s-1-0.4-1-1v-4.2C2,23,5,20,8.8,20h14.4c3.7,0,6.8,3,6.8,6.8V31C30,31.6,29.6,32,29,32z"}))},{code:"dueThisWeek",value:ve("dueThisWeek"),icon:o.a.createElement("svg",{className:be.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M28,24c0,2.2-1.8,4-4,4H8c-2.2,0-4-1.8-4-4V8c0-2.2,1.8-4,4-4v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4V24z M12,10h8.8v2.1L15.5,22h-2.8l5.2-9.7H12V10z"}))},{code:"dueNextWeek",value:ve("dueNextWeek"),icon:o.a.createElement("svg",{className:be.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16 c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M28,24c0,2.2-1.8,4-4,4H8c-2.2,0-4-1.8-4-4V8c0-2.2,1.8-4,4-4v1c0,0.6,0.4,1,1,1s1-0.4,1-1 V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4V24z M23.8,16.4c0.3,0.4,0.3,0.9,0,1.3l-4.5,5.5c-0.2,0.2-0.5,0.3-0.8,0.3 c-0.2,0-0.5-0.1-0.6-0.2c-0.4-0.4-0.5-1-0.1-1.4l3.1-3.9H10c-0.6,0-1-0.4-1-1s0.4-1,1-1h10.9l-3.1-3.9c-0.4-0.4-0.3-1.1,0.1-1.4 c0.4-0.4,1.1-0.3,1.4,0.1L23.8,16.4z"}))}],ge=function(){R(null)};window.addEventListener("resize",(function(){var e=document.getElementById("BOARD");if(e){var t=e.scrollWidth>e.clientWidth;ee!==t&&te(t)}}));var ke=o.a.useCallback((function(e){return t.find((function(t){return Number(t.id)===Number(e)}))}),[t]),ye=o.a.useCallback((function(e){var n=e.source,r=e.destination,o=e.type;if(r&&(n.droppableId!==r.droppableId||n.index!==r.index))if("COLUMN"!==o){var i=ke(n.droppableId),l=ke(r.droppableId),s=ke(n.droppableId).records[n.index];a({column:l,source:i,record:s,index:r.index})}else{if(0===r.index)return;c({column:t[n.index],index:r.index})}}),[t,a,ke,c]),Ee=o.a.useRef(null),je=Object(r.useState)(!1),Oe=Object(z.a)(je,2),Ce=Oe[0],xe=Oe[1],Se=function(e){Ee.current&&Ee.current.contains(e.target)||xe(!1)},we=function(){var e=Object(L.a)(A.a.mark((function e(){var t,a,r=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.next=3,Ie({name:"Untitled section",sequence:l.length+1});case 3:(a=e.sent)&&n({column:Object(u.a)(Object(u.a)({},a),{},{records:[]})},t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Te={disableDrag:!0,disableColumnAdd:!0,disableColumnCollapse:!0,disableColumnDelete:!0,customHeader:!0,CardListStyle:{backgroundColor:"white"}};return Object(r.useEffect)((function(){var e=function(e){var t=e||{},a=t.isShowPriority,n=void 0!==a&&a,r=t.isShowStatus,o=void 0!==r&&r,c=t.isShowProgress,i=void 0!==c&&c,l=t.isShowTaskCategory,s=void 0!==l&&l,u=Object(d.a)(sr);return n||(u=u.filter((function(e){return"taskPriority"!==e.code}))),o||(u=u.filter((function(e){return"taskStatus"!==e.code}))),i||(u=u.filter((function(e){return"progressSelect"!==e.code}))),s||(u=u.filter((function(e){return"teamTaskCategory"!==e.code}))),u}(S);oe(e)}),[S]),o.a.createElement(pt.a,{onDragEnd:ye},o.a.createElement("div",{className:be.toolbar},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(G.a,{variant:"outlined",color:"primary",onClick:k,className:be.addTaskButton,startIcon:o.a.createElement(bt.a,{size:"small"}),size:"small"},ve("addTask")),o.a.createElement(K.a,{ref:Ee,"aria-controls":Ce?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){xe((function(e){return!e}))},className:be.menuButton,size:"small"},o.a.createElement(eo.a,{size:"small",style:{color:"#32325d"}})),o.a.createElement(zn,{fields:g,domain:[],handleChange:p,onSave:f,onDelete:b,filters:m,value:s,onContentSearch:v})),o.a.createElement("div",{className:be.sortingOptions},o.a.createElement(G.a,{variant:"outlined",onClick:function(e){R(e.currentTarget)},startIcon:o.a.createElement(Sr.a,{size:"small"}),size:"small",className:be.toolbarButton},ve(E&&(E.label||E.value)||"allTasks")),o.a.createElement(G.a,{variant:"outlined",onClick:function(e){return P(e.currentTarget)},startIcon:o.a.createElement(ro.a,{size:"small"}),size:"small",className:be.toolbarButton,style:{background:j&&(j.label||j.value)?"#CAEEFF":"inherit",color:j&&(j.label||j.value)?"#2CB3F6":"inherit"}},"Filter ",j&&(j.label||j.value),j&&j.value&&o.a.createElement(co.a,{size:"small",onClick:function(){return O(null)},className:be.clearIcon})),o.a.createElement(G.a,{variant:"outlined",onClick:function(e){X(e.currentTarget)},startIcon:o.a.createElement(ao.a,{size:"small"}),size:"small",className:be.toolbarButton},"Sort",C&&("sequence"===C.code?"":" : ".concat(C.name))),o.a.createElement(yr.a,{id:"sort-menu",anchorEl:U,keepMounted:!0,open:J,onClose:function(){return X(null)},TransitionComponent:Kr.a,classes:{paper:be.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:Po,transformOrigin:Fo},re&&re.map((function(e){return o.a.createElement(ba.a,{key:e.code,onClick:function(){X(null),x(e)},className:be.menuItem},o.a.createElement(_.a,{className:be.iconSelected,style:{visibility:e.code===(C&&C.code)?"visible":"hidden"}}),o.a.createElement(ut.a,{className:be.menuTypography},ve(e.name)))}))),o.a.createElement(yr.a,{id:"filter-menu",anchorEl:D,keepMounted:!0,open:F,onClose:function(){return P(null)},TransitionComponent:Kr.a,classes:{paper:be.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:Po,transformOrigin:Fo},he.map((function(e){return o.a.createElement(ba.a,{key:e.code,className:be.menuItem,onClick:function(){P(null),O(e)}},e.icon,o.a.createElement(ut.a,{className:be.contextMenuItem},e.value))}))),o.a.createElement(yr.a,{id:"fliter-list-menu",anchorEl:H,keepMounted:!0,open:V,onClose:ge,TransitionComponent:Kr.a,classes:{paper:be.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:Po,transformOrigin:Fo},lr.map((function(e){return e.items?o.a.createElement(Gr.a,{parentMenuOpen:V,key:e.code,label:ve(e.value),style:{fontSize:14,marginLeft:28},onClick:function(){ge(),y(e)}},e.items.map((function(e){return o.a.createElement(ba.a,{key:e.code,className:be.menuItem,onClick:function(){ge(),y(e)}},o.a.createElement(_.a,{className:be.iconSelected,style:{visibility:e.value===(E&&E.value)?"visible":"hidden"}}),o.a.createElement(ut.a,{className:be.menuTypography},ve(e.value)))}))):o.a.createElement(ba.a,{key:e.code,onClick:function(){ge(),y(e)},className:be.menuItem},o.a.createElement(_.a,{className:be.iconSelected,style:{visibility:e.value===(E&&E.value)?"visible":"hidden"}}),o.a.createElement(ut.a,{className:be.menuTypography},ve(e.value)))}))))),o.a.createElement(pt.c,{droppableId:"board",type:"COLUMN",direction:"vertical"},(function(e){return o.a.createElement("div",Object.assign({id:"BOARD",ref:e.innerRef},e.droppableProps,{className:be.contentWrapper}),o.a.createElement("div",{className:be.parentHeader,style:{width:ee?"fit-content":"100%"}},o.a.createElement("div",{className:Y()(be.toolbarHeader,be.taskNameHeader,be.toolbarSortIconOnHover),onClick:function(){return x({code:"name",name:"Alphabetical",sortFunction:Bn})}},o.a.createElement(ut.a,{className:be.menuTypography},ve("taskName")),C&&"name"===C.code?o.a.createElement(lo.a,{className:be.toolbarSortIcon}):o.a.createElement(lo.a,{className:"toolbarSortIcon"})),!T&&o.a.createElement(o.a.Fragment,null,le&&o.a.createElement("div",{className:Y()(be.toolbarHeader,be.toolbarSortIconOnHover),onClick:function(){return x({code:"taskPriority",name:"Priority",sortFunction:Hn,fieldName:"taskPriority.technicalTypeSelect"})}},o.a.createElement(ut.a,{className:be.menuTypography},ve("priority")),C&&"taskPriority"===C.code?o.a.createElement(lo.a,{className:be.toolbarSortIcon}):o.a.createElement(lo.a,{className:"toolbarSortIcon"})),ue&&o.a.createElement("div",{className:Y()(be.toolbarHeader,be.toolbarSortIconOnHover),onClick:function(){return x({code:"taskStatus",name:"Status",sortFunction:Ln,fieldName:"name"})}},o.a.createElement(ut.a,{className:be.menuTypography},ve("status")),C&&"taskStatus"===C.code?o.a.createElement(lo.a,{className:be.toolbarSortIcon}):o.a.createElement(lo.a,{className:"toolbarSortIcon"})),me&&o.a.createElement("div",{className:Y()(be.toolbarHeader,be.toolbarSortIconOnHover),onClick:function(){return x({code:"progressSelect",name:"Progress",sortFunction:Bn})}},o.a.createElement(ut.a,{className:be.menuTypography},ve("progress")),C&&"progressSelect"===C.code?o.a.createElement(lo.a,{className:be.toolbarSortIcon}):o.a.createElement(lo.a,{className:"toolbarSortIcon"})),fe&&o.a.createElement("div",{className:Y()(be.toolbarHeader,be.toolbarSortIconOnHover),onClick:function(){return x({code:"teamTaskCategory",name:"Category",sortFunction:Ln,fieldName:"name"})}},o.a.createElement(ut.a,{className:be.menuTypography},ve("category")),C&&"teamTaskCategory"===C.code?o.a.createElement(lo.a,{className:be.toolbarSortIcon}):o.a.createElement(lo.a,{className:"toolbarSortIcon"})))),t.map((function(e,t){return o.a.createElement(Io,Object.assign({key:e.id,index:t,column:e,isScroll:ee},-1===e.id?Te:{}))})),o.a.createElement("div",{className:be.btnParent},o.a.createElement(G.a,{startIcon:o.a.createElement(bt.a,null),className:be.addSectionButton,onClick:function(){return we(!0)}},ve("addSection"))),e.placeholder)})),o.a.createElement(ja.a,{open:Ce,anchorEl:Ee.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:900}},(function(e){var t=e.TransitionProps;return o.a.createElement(Jr.a,Object.assign({},t,{style:{transformOrigin:"right bottom"}}),o.a.createElement(Oa.a,null,o.a.createElement($r.a,{onClickAway:Se},o.a.createElement(Qr.a,{autoFocusItem:Ce,id:"menu-list-grow"},o.a.createElement(ba.a,{onClick:function(e){we(),Se(e)}},ve("addSection"))))))})))}Mo.defaultProps={columns:[]};var zo={},Bo=function(e){if(zo[e])return zo[e];var t=function e(){var t=Math.round(10*Math.random())%mr.length,a=Object.values(zo)||[];return a.includes(mr[t])?a.length===mr.length||a.includes("gray")?"gray":void e():mr[t]}();return t?zo[e]=t:void 0},Ao=Object($.a)((function(e){return{root:{height:"100%",overflow:"hidden"},drawer:{flexShrink:0,height:"100%",overflow:"hidden"},drawerPaper:Object(R.a)({width:"50%"},e.breakpoints.only("xs"),{width:300}),drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{position:"fixed",justifyContent:"space-between",width:"50%",height:50,boxSizing:"border-box",minHeight:"".concat(50,"px !important"),boxShadow:e.shadows[4]}),markComplete:{textTransform:"none",color:"#6F7782","&:hover":{color:"#00bf9c",borderColor:"#00bf9c"}},fullScreenToolbar:{zIndex:100,background:"white",width:"50%"},formView:{height:"calc(100% - ".concat(50,"px - 66px)"),marginTop:50,overflowY:"auto"},toolbarIcon:{fill:"#6f7782",height:16,width:16},toolbarIconButton:{padding:10},fullScreenForm:{marginTop:50,height:"100%",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"},copyToClipboard:{position:"absolute",opacity:0}}})),Lo=o.a.createContext();function Ho(e){var t=e.children,a=Object(H.a)(e,["children"]);return o.a.createElement(Lo.Provider,{value:a},t)}var Ro=function(){return o.a.createElement("svg",{focusable:"false",viewBox:"0 0 32 32",style:{fill:"#6f7782",height:16,width:16}},o.a.createElement("path",{d:"M25,20c-2.4,0-4.4,1.7-4.9,4H11c-3.9,0-7-3.1-7-7v-5h16.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5s-2.2-5-5-5c-2.4,0-4.4,1.7-4.9,4H4V3c0-0.6-0.4-1-1-1S2,2.4,2,3v14c0,5,4,9,9,9h9.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5S27.8,20,25,20z M25,8c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S23.3,8,25,8z M25,28c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.7,28,25,28z"}))},Vo=function(){var e=Object(L.a)(A.a.mark((function e(){var t,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Ce(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Wo=function(){var e=Object(L.a)(A.a.mark((function e(){var t,a=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Pe(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function qo(e){return Yo.apply(this,arguments)}function Yo(){return(Yo=Object(L.a)(A.a.mark((function e(t){var a,n,r,o,c,i,l,s,m,p,f,b,v,h,g,k,y,E,j,O,C,x,S,w,T,N,I,D,P;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.columns,n=t.sourceColumn,r=t.destinationColumn,o=t.sourceIndex,c=t.destinationIndex,i=function(e){return a.findIndex((function(t){return t.id===e}))},s=function(e,t){return t.find((function(t){return t.id===e})).sequence},m=function(e,t){return(t.find((function(t){return t.id===e})).teamTaskSection||{}).id},p=function(e){return e.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:t+1})}))},f=function(e,t){var a=e.filter((function(e){return e.sequence!==s(e.id,t)||(e.teamTaskSection||{}).id!==m(e.id,t)}));return[a,a.map((function(e){return e.id}))]},b=function(e,t){return e.map((function(e){return t.includes(e.id)?Object(u.a)(Object(u.a)({},e),{},{version:e.version+1}):e}))},v=(l=function(e){return Object(d.a)(a.find((function(t){return t.id===e})).records||[])})(n.id),h=l(r.id),g=v[o],n.id!==r.id){e.next=18;break}return k=p(Un(v,o,c)),y=f(k,v),E=Object(z.a)(y,2),j=E[0],O=E[1],C=b(k,O),(x=Array.from(a))[i(n.id)].records=C,e.abrupt("return",[x,Vo(j)]);case 18:return v.splice(o,1),h.splice(c,0,g),S=p(h).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{teamTaskSection:-1===r.id?null:Object(u.a)({},r||{})})})),w=f(S,h),T=Object(z.a)(w,2),N=T[0],I=T[1],D=b(S,I),(P=Array.from(a))[i(n.id)].records=v,P[i(r.id)].records=D,e.abrupt("return",[P,Vo(N)]);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uo=function(e){var t=Object(r.useState)(Object(u.a)({},e)),a=Object(z.a)(t,2),n=a[0],c=a[1],i=n||{},l=i.columns,s=void 0===l?[]:l,m=(i.initialState||{}).projectId,p=Object(r.useState)(!1),f=Object(z.a)(p,2),b=f[0],v=f[1],h=Object(r.useState)(null),g=Object(z.a)(h,2),k=g[0],y=g[1],E=Object(r.useState)(null),j=Object(z.a)(E,2),O=j[0],C=j[1],x=Object(r.useState)(null),S=Object(z.a)(x,2),w=S[0],T=S[1],N=Object(r.useState)(null),I=Object(z.a)(N,2),D=I[0],P=I[1],F=Object(r.useState)(),M=Object(z.a)(F,2),B=M[0],H=M[1],R=Object(r.useState)([]),V=Object(z.a)(R,2),q=V[0],U=V[1],$=Object(r.useState)(),Z=Object(z.a)($,2),ee=Z[0],te=Z[1],ae=Object(r.useState)([]),ne=Object(z.a)(ae,2),re=ne[0],oe=ne[1],ce=Object(r.useState)({message:"",open:!1,severity:"success"}),ie=Object(z.a)(ce,2),le=ie[0],se=ie[1],ue=Object(r.useState)([]),de=Object(z.a)(ue,2),me=de[0],pe=de[1],fe=Object(r.useState)([]),be=Object(z.a)(fe,2),ve=be[0],he=be[1],ge=Object(r.useState)(null),ye=Object(z.a)(ge,2),Ee=ye[0],Oe=ye[1],xe=Object(r.useState)([]),we=Object(z.a)(xe,2),Ne=we[0],Ie=we[1],De=Object(r.useState)(null),Pe=Object(z.a)(De,2),Fe=Pe[0],ze=Pe[1],Be=Object(r.useState)(!1),Ae=Object(z.a)(Be,2),Le=Ae[0],He=Ae[1],Ve=Object(r.useState)(-1),qe=Object(z.a)(Ve,2),Ue=qe[0],Xe=qe[1],Ke=Object(r.useState)(!1),$e=Object(z.a)(Ke,2),Ze=$e[0],tt=$e[1],nt=Object(r.useState)(!1),ot=Object(z.a)(nt,2),lt=ot[0],st=ot[1],ut=Object(r.useState)(!1),dt=Object(z.a)(ut,2),mt=dt[0],pt=dt[1],ft=Object(r.useState)(!1),bt=Object(z.a)(ft,2),vt=bt[0],ht=bt[1],gt=Object(r.useState)(!1),kt=Object(z.a)(gt,2),yt=kt[0],Et=kt[1],jt=Object(r.useState)(!1),Ot=Object(z.a)(jt,2),Ct=Ot[0],xt=Ot[1],St=Object(r.useState)(!1),wt=Object(z.a)(St,2),Tt=wt[0],Nt=wt[1],It=Object(r.useState)(!1),Dt=Object(z.a)(It,2),Pt=Dt[0],Ft=Dt[1],Mt=Object(r.useState)(null),zt=Object(z.a)(Mt,2),Bt=zt[0],At=zt[1],Lt=Object(r.useState)({code:"incompleteTasks",value:"incompleteTasks"}),Ht=Object(z.a)(Lt,2),Rt=Ht[0],Vt=Ht[1],Wt=Object(r.useState)(null),qt=Object(z.a)(Wt,2),Yt=qt[0],_t=qt[1],Xt=Object(r.useState)(null),Gt=Object(z.a)(Xt,2),Kt=Gt[0],Jt=Gt[1],$t=Object(r.useState)(!1),Qt=Object(z.a)($t,2),Zt=Qt[0],ea=Qt[1],ta=Object(r.useState)(!1),aa=Object(z.a)(ta,2),na=aa[0],ra=aa[1],oa=Object(Q.a)().t,ca=Ao(),ia=function(){Et(!0)},la=function(){Et(!1),ze(null),He(!1)},ua=o.a.useCallback((function(){return Kn(Ee)}),[Ee]),da=o.a.useCallback((function(e){if(e&&!Array.isArray(e))return[];var t=Object(d.a)(e||[]),a=ua().id;switch(Rt.code){case"allTasks":return t;case"incompleteTasks":return t=t.filter((function(e){return!e.taskStatus||e.taskStatus.id!==a}));case"completedTasks":case"allCompletedTasks":return t=t.filter((function(e){return e.taskStatus&&e.taskStatus.id===a}));case"yesterday":return t=t.filter((function(e){return e.taskStatus&&e.taskStatus.id===a&&_n(e.taskEndDate)===_n(W()().subtract(1,"days"))}));case"today":return t=t.filter((function(e){return e.taskStatus&&e.taskStatus.id===a&&_n(e.taskEndDate)===_n(W()())}));case"oneweek":return t=t.filter((function(e){return e.taskStatus&&e.taskStatus.id===a&&W()(e.taskEndDate).isSame(new Date,"week")}));case"twoWeeks":return t=t.filter((function(e){return e.taskStatus&&e.taskStatus.id===a&&W()(e.taskEndDate).isSame(W()().subtract(8,"days"),"week")}));case"threeWeeks":return t=t.filter((function(e){return e.taskStatus&&e.taskStatus.id===a&&W()(e.taskEndDate).isSame(W()().subtract(15,"days"),"week")}));default:return t}}),[Rt,ua]),ma=o.a.useCallback((function(e){var t=da(e);if(!Rt.code)return t;if(!Yt||!Yt.code)return t;switch(Yt.code){case"dueNextWeek":return t=t.filter((function(e){return W()(e.taskEndDate).isSame(W()().add(8,"days"),"week")}));case"justMyTasks":return t=t.filter((function(e){return(e.assignedTo&&e.assignedTo.id)===D["user.id"]}));case"dueThisWeek":return t=t.filter((function(e){return W()(e.taskEndDate).isSame(new Date,"week")}));default:return t}}),[Rt,Yt,da,D]),pa=o.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sequence",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bn,a=arguments.length>2?arguments[2]:void 0,n=s.map((function(n){return Object(u.a)(Object(u.a)({},n),{},{records:t(n.records,e,a)})}));c((function(){return{columns:Object(d.a)(n)}}))}),[s]),fa=function(e){var t=e.severity,a=e.message,n=e.isAction,r=void 0!==n&&n,o=e.onActionClick,c=e.autoHideDuration;se({open:!0,severity:t,message:a,isAction:r,onActionClick:o,autoHideDuration:void 0===c?1e3:c})},ba=o.a.useCallback((function(e){return H(e)}),[]),va=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e(t);case 2:return a=e.sent,U((function(e){var t=e&&e.find((function(e){return e.id===a.id}));return(!t||t<0)&&e&&e.push(a),Object(d.a)(e||[])})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),ha=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge(t);case 2:U((function(e){var a=e&&e.find((function(e){return e.id===t.id}));return-1!==a&&e.splice(a,1),Object(d.a)(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),ga=o.a.useCallback((function(e){te(e)}),[]),ka=function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(Object(u.a)({},t)),pt(!1),t&&(a=Ta(t.id,t.teamTaskSection&&t.teamTaskSection.id),Xe(a)),n=ve&&ve.filter((function(e){return e.parentTask&&e.parentTask.id===t.id})),Ie(n),e.next=7,at(t.id);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=[];case 10:r=e.t0,oe(r),v(!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ya=function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,r,o,c,i,l,s=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:0,n=Xn(t),o=a+(r=1e5)<n&&n.size?a+r:n&&n.size,c=n&&n.slice(a,o),i=Gn(t,a),e.next=8,et(c,i);case 8:(l=e.sent)&&l.id?Ea(l):a<n&&n.size&&(l.fileId&&(t.id=l.fileId),ya(t,r+a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ea=function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={fileName:t.fileName,metaFile:{id:t.id},relatedId:k.id,relatedModel:"com.axelor.team.db.TeamTask"},e.next=3,Qe(a);case 3:(n=e.sent)&&n.length?(oe((function(e){return[].concat(Object(d.a)(e||[]),[n[0]])})),fa({severity:"success",message:"Uploaded successfully"})):fa({severity:"error",message:"Error in upload"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ja=function(){document.getElementById("inputFile").click()},Oa=function(t){!function(e){for(var t=0;t<e.length;t++)e[t].id||ya(e[t])}(re?re.concat(Object(d.a)(Rn(t.target.files,e.maxFiles))):Rn(t.target.files))},Ca=function(){var e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt([{id:t.id,version:t.version}]);case 2:e.sent?(a=re.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(t)})),re.splice(a,1),oe(re),fa({severity:"success",message:"Deleted successfully"})):fa({severity:"error",message:"Error"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xa=o.a.useCallback((function(e){!function(e){ct.apply(this,arguments)}(e)}),[]),Sa=function(e){return e.columns.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{records:Object(d.a)(e.records||[])})}))},wa=o.a.useCallback((function(e){return s.findIndex((function(t){return t.id===e}))}),[s]),Ta=o.a.useCallback((function(e,t){var a=ve.find((function(t){return t.id===e}))||{};if(t||a.id){var n=s[wa(t)]&&s[wa(t)].records.findIndex((function(t){return t.id===e}));return n<0&&(n=s[wa(t)].records.length),n}}),[s,wa,ve]),Na=o.a.useCallback((function(e,t){var a=e.column;-1===wa(a.id)?(c((function(e){var n=Sa(e);return t?n[n&&n.length]=Object(u.a)({},a):n.splice(1,0,Object(u.a)({},a)),he(Object(d.a)(n)),{columns:n}})),C((function(e){return[].concat(Object(d.a)(e||[]),[a])}))):alert("Column with same name already exists.")}),[wa]),Ia=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,r,o,i,l,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,n=t.record,e.next=3,Se(n.id);case 3:if(0!==e.sent.status){e.next=14;break}if(r=wa(a.id),o=Ta(n.id,a.id),!(r<0||o<0)){e.next=9;break}return e.abrupt("return");case 9:c((function(e){var t=Sa(e);t[r].records.splice(o,1);var a=Pa(t);return{columns:Wn(ma(a),O)||[]}})),i=Object(d.a)(ve||[]),(l=i&&i.findIndex((function(e){return e.id===n.id})))>-1&&(i.splice(l,1),he(i),s=i.filter((function(e){return e.parentTask&&e.parentTask.id===e.id})),Ie(s)),fa({severity:"success",message:"Task Deleted Successfully"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[wa,Ta,ma,O,ve]),Da=o.a.useCallback((function(e){var t=e.column,a=e.record;t&&(c((function(e){var n=Sa(e).map((function(e,n){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{records:[Object(u.a)({},a||{})].concat(Object(d.a)(e.records||[]))}):e})),r=Pa(n);return{columns:Wn(ma(r),O)||[]}})),he([].concat(Object(d.a)(ve),[Object(u.a)({},a)])))}),[ma,O,ve]),Pa=function(e){var t=[];return e.map((function(e){return e.records.map((function(e){return t.push(e)}))})),t},Fa=o.a.useCallback((function(e){var t=e.column,a=e.record,n=wa(t.id),r=Ta(a.id,t.id);if(!(n<0||r<0)){c((function(e){var t=Sa(e);t[n].records[r]=Object(u.a)({},a);var o=Pa(t);return{columns:Wn(ma(o),O)||[]}}));var o=Object(d.a)(ve),i=o&&o.findIndex((function(e){return e.id===a.id}));if(i>-1&&(o[i]=a,he(o),k)){var l=o.filter((function(e){return e.parentTask&&e.parentTask.id===k.id}));Ie(l)}(a&&a.id)===(k&&k.id)&&y(Object(u.a)({},a))}}),[wa,Ta,ma,O,k,ve]),Ma=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a,r,o,i,l,m,p,f,b,v,h;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,r=t.index,o=t.source,i=t.record,l=Sa(n),e.next=4,qo({columns:s,destinationColumn:a,destinationIndex:r,sourceColumn:o,sourceIndex:Ta(i.id,o.id)});case 4:m=e.sent,p=Object(z.a)(m,2),f=p[0],p[1].then((function(e){return e.some((function(e){return-1===e.status}))})).then((function(e){if(e){c((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:l})}));var t=Pa(l);he(Object(d.a)(t)),fa({severity:"error",message:"Error updating task due to concurrent issue. Kindly refresh"})}})),c({columns:f}),Kt&&(b=Kt.key,v=Kt.sortFunction,h=Kt.fieldName,pa(b,v,h)),y(Object(u.a)({},i));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[s,Ta,n,pa,Kt]),za=o.a.useCallback((function(e){var t=e.column,a=e.index,r=Sa(n),o=Un(s,wa(t.id),a).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:0===t?0:t+1})})),i=o.filter((function(e){return e.sequence!==(t=e.id,r.find((function(e){return e.id===t})).sequence);var t}));Wo(i).then((function(e){return e.some((function(e){return-1===e.status}))})).then((function(e){e&&(c((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:r})})),fa({severity:"error",message:"Error updating section due to concurrent issue. Kindly refresh"}))}));var l=i.map((function(e){return e.id})),d=o.map((function(e){return l.includes(e.id)?Object(u.a)(Object(u.a)({},e),{},{version:e.version+1}):e}));c((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:d})}))}),[s,wa,n]),Ba=o.a.useCallback((function(e){var t=e.column,a=wa(t.id);c((function(e){var t=Sa(e);return t[a].collapsed=!t[a].collapsed,{columns:t}}))}),[wa]),Aa=o.a.useCallback((function(e){var t=e.column,a=wa(t.id);c((function(e){var n=Sa(e);return n[a].name=t.name,n[a].version=t.version,{columns:n}}))}),[wa]),La=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,e.next=3,Me(a.id);case 3:0===e.sent.status&&(c((function(e){var t=Sa(e);return t.splice(wa(a.id),1),{columns:t}})),fa({severity:"success",message:"Section Deleted Successfully"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[wa]),Ha=function(){var e=Object(L.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Re({id:k.id,entityModel:"com.axelor.team.db.TeamTask",body:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ra=function(e){return n.columns&&n.columns[e]},Va=function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,r,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.length>1&&void 0!==o[1]?o[1]:1,n=Ra(a)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,je({name:"New Task",sequence:1,project:{id:w},taskDate:W()(),assignedTo:{id:D&&D["user.id"]},teamTaskSection:-1===n.id?null:{id:n.id}});case 7:(r=e.sent)&&(c((function(e){return{columns:e.columns.map((function(e,t){return t===a?Object(u.a)(Object(u.a)({},e),{},{records:[r].concat(Object(d.a)(e.records||[]))}):e}))}})),he([].concat(Object(d.a)(ve),[Object(u.a)({},r)])),fa({severity:"success",message:"Task Added Successfully"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),fa({severity:"error",message:"Error Adding New Task"});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),Wa=function(){var e=Object(L.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,je({name:"New Sub Task",sequence:1,project:{id:Ee.id},taskDate:W()(),assignedTo:{id:D&&D["user.id"]},parentTask:{id:t.id},teamTaskSection:t.teamTaskSection&&t.teamTaskSection.id?{id:t.teamTaskSection.id}:null});case 4:(a=e.sent)&&(Ie([].concat(Object(d.a)(Ne),[Object(u.a)({},a)])),Da({column:a.teamTaskSection||{id:-1},record:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qa=function(e){Ie(e)},Ya=function(e,t){e.stopPropagation(),He(t),ze(e.currentTarget)},Ua=o.a.useCallback((function(e,t){var a=e.teamTaskSection,n=wa(a&&a.id||-1);n<0||t<0||(c((function(a){var r=Sa(a);r[n].records.splice(t,0,Object(u.a)({},e));var o=Pa(r);return{columns:Wn(ma(o),O)||[]}})),tt(!1))}),[wa,ma,O]),_a=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.column,n=t.record,tt(!0),r=wa(a&&a.id||-1),o=Ta(n.id,a&&a.id||-1),!(r<0||o<0)){e.next=6;break}return e.abrupt("return");case 6:c((function(e){var t=Sa(e);t[r].records.splice(o,1);var a=Pa(t);return{columns:Wn(ma(a),O)||[]}})),fa({severity:"success",message:"Task Deleted Successfully",isAction:!0,onActionClick:function(){return Ua(k,Ue)},autoHideDuration:1e4});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[wa,Ta,k,Ue,Ua,ma,O]),Xa=function(){var e=Object(L.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ht(!1),la(),e.next=4,Se(k.id);case 4:0===e.sent.status&&(y(null),tt(!1),v(!1),t=Object(d.a)(ve),a=t.findIndex((function(e){return e.id===k.id})),t.splice(a,1),he(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ga=o.a.useCallback((function(e){e&&e.stopPropagation(),ht(!1)}),[]),Ka=function(){xt(!0)},Ja=function(){Nt(!0)},$a=o.a.useCallback(function(){var e=Object(L.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),a=Zt?k.statusBeforeComplete:Kn(Ee),e.next=4,Ce(Object(u.a)(Object(u.a)({},k),{},{taskStatus:a,statusBeforeComplete:k.taskStatus}));case 4:(n=e.sent)&&Fa({column:n.teamTaskSection,record:n});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Fa,Zt,k,Ee]),Qa=function(e,t){var a=document.getElementById("copyText");a&&(a.value=e||window.location.href,a.select(),a.setSelectionRange(0,99999),document.execCommand("copy"),se({open:!0,message:t||oa("copiedToClipboard")}))};Object(r.useEffect)((function(){if(k&&Ee){var e=Jn(k,Ee);ea(e)}}),[k,Ee]),Object(r.useEffect)((function(){Object(L.a)(A.a.mark((function e(){var t,a,n,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){for(var e,t=/[?&]id=([^&#]*)/g,a=window.location.href;e=t.exec(a);)return e[1]},a=m||t()){e.next=4;break}return e.abrupt("return");case 4:return n={teamTaskPrioritySet:["id","name","technicalTypeSelect","version"],teamTaskStatusSet:["id","isCompleted","isDefaultCompleted","name","sequence","version"]},e.next=7,it(a,{fields:ur,related:n});case 7:r=e.sent,T(a),Oe(r);case 10:case"end":return e.stop()}}),e)})))()}),[m]),Object(r.useEffect)((function(){Object(L.a)(A.a.mark((function e(){var t,a,n,r,o,c,i,l,s,u;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ra(!0),e.next=3,Te();case 3:return t=e.sent,e.next=6,We();case 6:return a=e.sent,e.next=9,Ye();case 9:return n=e.sent,e.next=12,Je("com.axelor.team.db.TeamTask");case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0={};case 15:r=e.t0,o=r.jsonFields,c=void 0===o?{}:o,i=r.fields,s=(l=void 0===i?[]:i).filter((function(e){return!c[e.name]&&!["id","version"].includes(e.name)})),u=Object.keys(c).reduce((function(e,t){var a=c[t],n=l.find((function(e){return e.name===t}));return[].concat(Object(d.a)(e),Object(d.a)(Object.keys(a).map((function(e){return Yn(n||{name:t},a[e])}))))}),[]),pe([].concat(Object(d.a)(s),Object(d.a)(u))),C(t),P(a),U(n),ra(!1);case 27:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){if(me.length>0){var t=[];w&&t.push({fieldName:"project.id",operator:"=",value:w}),B&&B.query&&t.push(Object(u.a)({},B.query)),ee&&t.push({fieldName:"name",operator:"like",value:ee});var a={},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function a(e){var n=e.criteria,r=e.fieldName,o=e.operator,c=e.value;if(n&&Array.isArray(n))return Object(u.a)(Object(u.a)({},e),{},{criteria:n.map(a)});if(r&&o){var i=t.find((function(e){return e.name===r}));if(i&&i.target){var l=i.targetName,s=function(e){return e&&("object"===typeof e?e.id:e)},d="".concat(r).concat(l?".".concat(l):"");return["in","notin"].includes(o.toLowerCase())&&(d="".concat(r,".id")),Object(u.a)(Object(u.a)({},e),{},{fieldName:d,value:Array.isArray(c)?c.map(s):s(c)})}if(["isTrue","isFalse"].includes(o))return Object(u.a)(Object(u.a)({},e),{},{operator:"=",value:"isTrue"===o?"true":"false"})}return e}return a({criteria:e})}(t,me);n.criteria.length>0&&(a=Object(u.a)(Object(u.a)({},n),{},{operator:"and"})),function(e){return ke.apply(this,arguments)}({fields:dr,data:a}).then((function(t){he(t);var a=Wn(ma(t),O)||[];return c(Object(u.a)(Object(u.a)({},e),{},{columns:a})),a}))}}),[me,B,ee,w,e,O,ma]);var Za=function(){return o.a.createElement(o.a.Fragment,null,(Bt||k)&&o.a.createElement(Mr,{task:Bt||k}),o.a.createElement(Br,{anchorEl:Fe,isDialog:!1}))};return o.a.createElement(Ho,Object.assign({columns:s,onCardAdd:Da,onCardEdit:Fa,onCardMove:Ma,onCardDelete:Ia,onColumnAdd:Na,onColumnMove:za,onColumnToggle:Ba,onColumnDelete:La,onColumnUpdate:Aa,handleDrawerOpen:ka,sections:O,searchFilter:B,filters:q,handleChangeFilter:ba,handleSaveFilter:va,handleDeleteFilter:ha,handleContentSearch:ga,fields:me,addNewTask:Va,project:Ee,tasks:ve,open:b,task:k,copyToClipboard:Qa,addContextTask:function(e,t){if(At(e),"fullScreen"===t)ia();else{if("duplicateTask"!==t)return;Ka()}},handleSetMenuFilter:function(e){Vt(e)},menuFilter:Rt,filter:Yt,handleSetFilter:function(e){_t(e)},sortColumnName:Kt,handleSetSortColumnName:function(e){Kt&&Kt.code===e.code&&(e={code:"sequence",name:oa("none"),sortFunction:Bn}),Jt(e),pa(e.code,e.sortFunction,e.fieldName)},selectedProject:Ee,addNewSubtask:Wa,userId:D&&D["user.id"],projectId:w,userData:D,attachments:re,addComment:Ha,removeAttachment:Ca,downloadAttachment:xa,subTasks:Ne,updateSubTasks:qa,isDeleteClicked:Ze,isSubtaskOfClicked:lt,isAddTagClicked:mt,closeSubtaskOfClicked:function(){st(!1)},taskIndex:Ue,premanentlyDeleteTask:function(){ht(!0)},undoTaskDelete:Ua,handleListKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),ze(null))},handleClose:function(){ze(null)},deleteTask:_a,onSubtaskOfClicked:function(){st(!0),ze(null)},onAddTagClicked:function(){pt(!0)},handleFullScreenOpen:ia,handleFullScreenClose:la,handleDuplicateTaskDialogOpen:Ka,handleConvertToProjectDialogOpen:Ja,handlePrintPDFDialog:function(){Ft(!0)},getAvatarColor:Bo},e),o.a.createElement("div",{className:ca.root},yt&&o.a.createElement(Lr,{open:yt,handleFullScreenClose:la,toggleStatus:$a,isCompleted:Zt,upload:ja,attachmentList:re,addNewSubtask:Wa,getSubTaskIcon:Ro,subTasks:Ne,copyToClipboard:Qa,anchorEl:Fe,handleToggle:Ya,contextTask:Bt,task:k,selectFile:Oa,headerClass:ca.fullScreenToolbar,isDialog:Le}),na?o.a.createElement(kr,null):o.a.createElement(Mo,null),o.a.createElement(X.a,{className:ca.drawer,variant:"persistent",anchor:"right",open:b,classes:{paper:ca.drawerPaper}},o.a.createElement("div",{className:Y()(ca.drawerHeader,ca.fullScreenToolbar)},o.a.createElement("div",null,o.a.createElement(G.a,{variant:"outlined",size:"small",className:ca.markComplete,startIcon:o.a.createElement(_.a,null),onClick:$a,style:{color:Zt?"white":"#6F7782",background:Zt?"#00bf9c":"white"}},oa(Zt?"completed":"markComplete"))),o.a.createElement("div",null,o.a.createElement(K.a,{onClick:ja,className:ca.toolbarIconButton},o.a.createElement("svg",{className:ca.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M19,32c-3.9,0-7-3.1-7-7V10c0-2.2,1.8-4,4-4s4,1.8,4,4v9c0,0.6-0.4,1-1,1s-1-0.4-1-1v-9c0-1.1-0.9-2-2-2s-2,0.9-2,2v15c0,2.8,2.2,5,5,5s5-2.2,5-5V10c0-4.4-3.6-8-8-8s-8,3.6-8,8v5c0,0.6-0.4,1-1,1s-1-0.4-1-1v-5C6,4.5,10.5,0,16,0s10,4.5,10,10v15C26,28.9,22.9,32,19,32z"})),re&&re.length>0&&o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},re.length),o.a.createElement("input",{id:"inputFile",type:"file",name:"file",multiple:!0,onChange:Oa,style:{display:"none"}})),o.a.createElement(K.a,{onClick:function(){return Wa(k)},className:ca.toolbarIconButton},Ro(),Ne&&Ne.length>0&&o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},Ne.length)),o.a.createElement(K.a,{onClick:function(){return Qa()},className:ca.toolbarIconButton},o.a.createElement("svg",{className:ca.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))),o.a.createElement(K.a,{onClick:function(e){return Ya(e,!1)},className:ca.toolbarIconButton},o.a.createElement("svg",{className:ca.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M16,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S14.3,13,16,13z M3,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S1.3,13,3,13z M29,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S27.3,13,29,13z"}))),o.a.createElement(K.a,{onClick:function(){Ze&&Xa(k),c((function(e){var t=Sa(e);return t.map((function(e,a){return e.records.map((function(e,n){return Number(e.project.id)!==Number(w)&&t[a].records.splice(n,1),{columns:t}}))})),{columns:t}})),y(null),tt(!1),v(!1)},className:ca.toolbarIconButton},o.a.createElement("svg",{className:ca.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M2,14.5h18.4l-7.4-7.4c-0.6-0.6-0.6-1.5,0-2.1c0.6-0.6,1.5-0.6,2.1,0l10,10c0.6,0.6,0.6,1.5,0,2.1l-10,10c-0.3,0.3-0.7,0.4-1.1,0.4c-0.4,0-0.8-0.1-1.1-0.4c-0.6-0.6-0.6-1.5,0-2.1l7.4-7.4H2c-0.8,0-1.5-0.7-1.5-1.5C0.5,15.3,1.2,14.5,2,14.5z M28,3.5C28,2.7,28.7,2,29.5,2S31,2.7,31,3.5v25c0,0.8-0.7,1.5-1.5,1.5S28,29.3,28,28.5V3.5z"}))))),o.a.createElement("div",{className:ca.formView},!Le&&o.a.createElement(Za,null)),o.a.createElement(sa,{open:vt,onClose:Ga,onConfirm:Xa,title:oa("deleteTask")}),(Bt||k)&&o.a.createElement(Vr,{open:Ct,handleClickOpen:Ka,handleClose:function(){xt(!1)},task:Bt||k,attachmentList:re,onCardAdd:Da,setSnackbarProps:se,updateSubTasks:qa,subTasks:Ne}),k&&o.a.createElement(o.a.Fragment,null,o.a.createElement(qr,{open:Tt,handleClickOpen:Ja,handleClose:function(){Nt(!1)},task:k,setSnackbarProps:se}),o.a.createElement(Xr,{open:Pt,handleClose:function(){Ft(!1),ze(null)},task:k,subTasks:Ne}))),o.a.createElement(Ut,Object.assign({},le,{closeSnackbar:function(){se(Object(u.a)(Object(u.a)({},le),{},{open:!1}))}})),o.a.createElement(J.a,{value:"",id:"copyText",className:ca.copyToClipboard})))},_o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,a=e.theme,n={};return"ar"!==t&&"he"!==t||(n.direction="rtl"),"dark"===a&&(n.palette={type:"dark"}),n}({}),Xo=_o.direction,Go=_o.palette;var Ko=function(){return o.a.createElement(M,null,o.a.createElement(x,{direction:Xo,palette:Go},o.a.createElement(s.a,{utils:l.a},o.a.createElement("div",{className:"app"},o.a.createElement(Uo,null)))))};a(808);i.a.render(o.a.createElement(Ko,null),document.getElementById("root"))}},[[510,1,2]]]);