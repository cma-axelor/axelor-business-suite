(this["webpackJsonpaos-task-view"]=this["webpackJsonpaos-task-view"]||[]).push([[0],{207:function(e,t,a){},265:function(e,t,a){e.exports=a(370)},369:function(e,t,a){},370:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(16),c=a.n(i),l=a(126),s=a(24),u=a(4),d=a(20),m=a(34),p=a(209),f=a.n(p),b=a(455),v=a(421),h=a(446),g=a(244),O=a(213),C=a.n(O),j=a(214),y=a.n(j),E=a(422),x=Object(m.b)({plugins:[].concat(Object(d.a)(Object(h.a)().plugins),[f()()])});function k(e){var t=e.direction,a=e.palette,i=e.children;Object(r.useEffect)((function(){t?document.body.dir=t:document.body.removeAttribute("dir")}));var c=function(e){var t=e.direction,a=void 0===t?"ltr":t,r=e.palette;return void 0===n&&(n=document.body.dir||document.dir),a=a||n,Object(g.a)({direction:a,layout:{cols:12},header:{height:64},palette:Object(u.a)({primary:C.a,secondary:y.a},r),typography:{useNextVariants:!0}})}({direction:t,palette:a});return o.a.createElement(b.b,{jss:x},o.a.createElement(v.a,{theme:c},o.a.createElement(E.a,null),i))}var w,N=a(21),S=a(7),D=a.n(S),T=a(10),I=a(8),P=a(19),F=a(247),B=a(451),L=a(246),A=a(223),M=a(440),R=a(72),z=a(249),H=a(139),W=a(444),q=a(426),_=a(374),U=a(430),V=a(375),Y=a(460),X=a(37),K=a.n(X),J=a(101),$=a(63),G=a(31),Q=a.n(G),Z=a(239),ee=a.n(Z),te=a(136),ae=a.n(te),ne=a(160),re=a.n(ne),oe=a(236),ie=a.n(oe),ce=a(238),le=a.n(ce),se=a(240),ue=a.n(se),de=a(243),me=a.n(de),pe=a(162),fe=a.n(pe),be=a(242),ve=a.n(be),he=a(241),ge=a.n(he),Oe=a(215),Ce=a(216),je={};function ye(e){var t=document.cookie||"";return t!==w&&(w=t,je=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),je[e]}var Ee=function(e,t){return e.sort((function(e,a){var n=e[t],r=a[t];return n<r?-1:n>r?1:0}))},xe=function(e,t){return e.sort((function(e,a){var n=new Date(e[t]),r=new Date(a[t]);return n>r?-1:n<r?1:0}))},ke=function(e,t,a){return e.sort((function(e,n){var r=e[t][a],o=n[t][a];return r<o?-1:r>o?1:0}))},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="".concat(e).lastIndexOf("/")===e.length-1?"":"/";return"".concat(e).concat(a).concat(t)},Ne=new(function(){function e(){Object(Oe.a)(this,e);var t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),t.append("X-Requested-With","XMLHttpRequest"),t.append("X-CSRF-Token",ye("CSRF-TOKEN")),this.baseURL="../..",this.headers=t}return Object(Ce.a)(e,[{key:"fetch",value:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,a){return fetch(e,a).then((function(e){return-1!==["head","delete"].indexOf(t.toLowerCase())?e:e.headers.get("content-type").includes("application/json")?e.json():e})).catch((function(e){}))}))},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({method:"POST",credentials:"include",headers:this.headers,mode:"cors",body:JSON.stringify(a)},t);return"GET"===t.method&&delete n.body,this.fetch("".concat(this.baseURL).concat(0===e.indexOf("/")?e:"/".concat(e)),t.method,n)}},{key:"post",value:function(e,t){return this.request(e,{method:"POST"},t)}},{key:"get",value:function(e){return this.request(e,{method:"GET"})}},{key:"add",value:function(e,t){var a={data:t},n="ws/rest/".concat(e);return this.post(n,a)}},{key:"fetchId",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(n,a)}},{key:"delete",value:function(e,t){var a="ws/rest/".concat(e,"/").concat(t);return this.request(a,{method:"DELETE"})}},{key:"search",value:function(e,t){var a=Object(u.a)({offset:0},t),n="ws/rest/".concat(e,"/search");return this.post(n,a)}},{key:"upload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,i){var c=e.baseURL,l=new XMLHttpRequest,s=we(e.baseURL,"ws/files/upload"),u=function(){return a["X-File-Id"]?e.intercept((function(){return e.http.delete(we(e.baseURL,"ws/files/upload/"+a["X-File-Id"]))})):Promise.resolve(!0)};l.open("POST",s,!0),Object.keys(a).forEach((function(e){l.setRequestHeader(e,a[e])})),l.withCredentials=!0,l.overrideMimeType("application/octet-stream"),l.setRequestHeader("Content-Type","application/octet-stream"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.onload=function(){n(100)},r.abort=function(){return l.abort(),u()},l.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 401:throw this.callbackInterceptor(),new Error("Unauthorized");case 200:try{var e=JSON.parse(l.responseText);o({result:e,url:"".concat(c,"ws/rest/com.axelor.meta.db.MetaFile/").concat(e.id,"/content/download?v=0")})}catch(t){o(l.responseText)}break;default:u(),i({status:l.status})}},l.upload.onprogress=function(e){var t=a["X-File-Size"],o=parseFloat(a["X-File-Offset"])+e.loaded,i=Math.round(o/t*100);r.progress=i>95?"95%":i+"%",r.transfer=function(e,t){var a=function(e){return e>1e9?parseFloat(e/1e9).toFixed(2)+" GB":e>1e6?parseFloat(e/1e6).toFixed(2)+" MB":e>=1e3?parseFloat(e/1e3).toFixed(2)+" KB":e+" B"};return a(e||0)+"/"+a(t)}(o,t),r.loaded=o===t,e.lengthComputable&&n(e.loaded/e.total*100,r)},l.send(t)}))}},{key:"download",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="".concat(this.baseURL,"/ws/dms/download/").concat(e.id);return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("GET",a,!0),o.responseType="blob",o.onload=function(a){var r=o.response;if(t)n(r);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(r),i.download=e.isDirectory?"".concat(e.fileName,".zip"):e.fileName,i.click(),n()}},o.send()}))}}]),e}());function Se(){return(Se=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.search("com.axelor.team.db.TeamTask",Object(u.a)({},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.add("com.axelor.team.db.TeamTask",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(T.a)(D.a.mark((function e(t){var a,n,r=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,Ne.add("com.axelor.team.db.TeamTask",Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.delete("com.axelor.team.db.TeamTask",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.search("com.axelor.apps.project.db.TeamTaskSection",Object(u.a)({},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.add("com.axelor.apps.project.db.TeamTaskSection",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return He.apply(this,arguments)}function He(){return(He=Object(T.a)(D.a.mark((function e(t){var a,n,r=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,Ne.add("com.axelor.apps.project.db.TeamTaskSection",Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.delete("com.axelor.apps.project.db.TeamTaskSection",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(T.a)(D.a.mark((function e(){var t,a,n,r,o,i,c,l,s=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.offset,r=void 0===n?0:n,o=t.limit,i=void 0===o?4:o,c=t.relatedModel,e.next=3,Ne.get("ws/rest/com.axelor.mail.db.MailMessage/messages?limit=".concat(i,"&offset=").concat(r,"&relatedId=").concat(a,"&relatedModel=").concat(c));case 3:if(!(l=e.sent)||!l.data){e.next=6;break}return e.abrupt("return",{comments:l.data,offset:l.offset,total:l.total});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.post("ws/rest/com.axelor.mail.db.MailMessage/".concat(t.id,"/remove"),{data:t});case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(T.a)(D.a.mark((function e(){var t,a,n,r,o,i,c,l,s=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.body,r=void 0===n?"":n,o=t.files,i=void 0===o?[]:o,c=t.entityModel,e.next=3,Ne.post("ws/rest/".concat(c,"/").concat(a,"/message"),{data:{body:r,files:i,type:"comment"}});case 3:if(!((l=e.sent)&&l.data&&l.data[0])){e.next=6;break}return e.abrupt("return",l.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return $e.apply(this,arguments)}function $e(){return($e=Object(T.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.get("ws/app/info");case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(T.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:findFilters",a={data:{model:t="com.axelor.meta.db.MetaFilter",domain:null,context:{filterView:"task-filters",_model:t}}},e.abrupt("return",Ne.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:findFilters"),a).then((function(e){var t=e.data;return void 0===t?[]:t})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return et.apply(this,arguments)}function et(){return(et=Object(T.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:saveFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:Object(u.a)(Object(u.a)(Object(u.a)({},t),t.name&&{name:t.name}),{},{filterView:"task-filters",filters:""})}},e.abrupt("return",Ne.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:saveFilter"),n).then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return at.apply(this,arguments)}function at(){return(at=Object(T.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:removeFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:{name:t.name,filterView:"task-filters"}}},e.abrupt("return",Ne.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:removeFilter"),n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.get("/ws/meta/fields/".concat(t,"?limit=10"));case 2:if(!((a=e.sent)&&a.data&&a.data.fields)){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e){return it.apply(this,arguments)}function it(){return(it=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.add("com.axelor.dms.db.DMSFile",t);case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t){return lt.apply(this,arguments)}function lt(){return(lt=Object(T.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.upload(t,a);case 2:if(!(n=e.sent)||!n.result){e.next=5;break}return e.abrupt("return",n.result);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return ut.apply(this,arguments)}function ut(){return(ut=Object(T.a)(D.a.mark((function e(t){var a,n,r=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"com.axelor.team.db.TeamTask",e.next=3,Ne.search("com.axelor.dms.db.DMSFile",{fields:["fileName","relatedModel","relatedId"],data:{_domain:"self.isDirectory = false AND self.relatedId = ".concat(t," AND self.relatedModel = '").concat(a,"'"),_domainContext:{rid:t,rmodel:a}}});case 3:if(!(n=e.sent)||!n.data){e.next=6;break}return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.post("ws/rest/com.axelor.dms.db.DMSFile/removeAll",{records:t});case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(){return(pt=Object(T.a)(D.a.mark((function e(t){var a,n=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.abrupt("return",Ne.download(t,a));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.fetchId("com.axelor.apps.project.db.Project",t);case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var vt=a(442),ht=a(429),gt=a(448),Ot=a(434),Ct=a(88),jt=a(217),yt=a(218),Et=a.n(yt),xt=a(219),kt=a.n(xt),wt=(a(207),a(208),Object($.a)((function(){return{editorClass:{minHeight:100,border:"1px solid #eee",marginTop:-7,borderTop:"none",padding:10}}})));function Nt(e){var t=e.onContentChange,a=e.content,n=e.onDescriptionChange,i=e.rest,c=Object(r.useState)(Ct.EditorState.createEmpty()),l=Object(I.a)(c,2),s=l[0],u=l[1],d=Object(r.useState)(a),m=Object(I.a)(d,2),p=m[0],f=m[1],b=wt();Object(r.useEffect)((function(){v(a)}),[a]);var v=function(e){if(!e)return null;var t=kt()(e),a=t.contentBlocks,n=t.entityMap,r=Ct.ContentState.createFromBlockArray(a,n),o=Ct.EditorState.createWithContent(r);u(o)};return o.a.createElement("div",i,o.a.createElement(jt.Editor,{editorState:s,editorClassName:b.editorClass,onEditorStateChange:function(e){u(e),f(function(e){return Et()(Object(Ct.convertToRaw)(e.getCurrentContent()))}(e)),t(p)},toolbar:{options:["inline","emoji","colorPicker","list","textAlign","link"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0}},onBlur:function(){return n(p)}}))}Nt.Viewer=function(e){var t=e.html;return o.a.createElement("div",{className:"ax-base-draft-editor-viewer",dangerouslySetInnerHTML:{__html:t}})};var St=Nt,Dt=a(425),Tt=a(220),It=a.n(Tt),Pt=Object($.a)((function(){return{commentTag:{borderRadius:"50%",padding:"10px 15px 10px 15px",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:"white",fontSize:15,height:25,width:15},commentContainer:{display:"flex",lineHeight:"20px",padding:"15px 0 15px 0",fontWeight:" normal",overflowX:"auto"},commentLoad:{display:"inline-block","-ms-flex-pack":"center",justifyContent:"center",backgroundColor:"gray",padding:"5px 20px 5px 20px",borderRadius:"20px",color:"white"},cardView:{padding:"0px 15px",background:"#F6F8F9"},loadMore:{display:"flex",justifyContent:"center",padding:"10px 0px"}}})),Ft={},Bt=["#795548","#FF5722","#CDDC39","#8BC34A","#03A9F4","#00BCD4","#009688","#2196F3","#3F51B5","#F44336","#9C27B0"],Lt=function(e){if(Ft[e])return Ft[e];var t=Math.round(10*Math.random())%Bt.length;return Ft[e]=Bt[t]};var At=function(e){var t=e.comments,a=void 0===t?[]:t,n=e.limit,r=e.total,i=e.offset,c=e.userId,l=Pt();return o.a.createElement("div",{className:l.cardView},a&&a.map((function(t,a){var n="notification"===t.type?JSON.parse(t.body):"";return o.a.createElement("div",{key:a},o.a.createElement("div",{className:l.commentContainer},o.a.createElement("span",{className:l.commentTag,style:{backgroundColor:Lt(t.author&&t.author.id)}},t.$author&&t.$author.fullName&&t.$author.fullName.charAt(0)),o.a.createElement("span",{style:{display:"flex",flex:1,flexDirection:"column",paddingLeft:20}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{display:"flex",flex:1}},o.a.createElement("span",null,t.$author&&t.$author.fullName),o.a.createElement("span",{style:{color:"#D3D3D3",paddingLeft:"5px"}}," ","- ",K()(t.$eventTime).format("DD/MM h:mm")," ")),Number(t.$author.id)===Number(c)&&o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{fontSize:"14px",marginTop:"-5px"},onClick:function(){return e.removeComment(t)}},o.a.createElement(It.a,null)))),n?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{fontWeight:600,textAlign:"left"}},n.title),o.a.createElement("ul",{style:{paddingLeft:20,display:n.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},n.tracks.map((function(e,t){return o.a.createElement("li",{key:t},e.displayValue?o.a.createElement("div",null,o.a.createElement("span",{style:{fontWeight:600}},e.title," :"," "),o.a.createElement("span",null,e.oldDisplayValue&&e.oldDisplayValue+" \xbb "," ",e.displayValue)):o.a.createElement("div",null,o.a.createElement("span",{style:{fontWeight:600}},e.title," :"," "),o.a.createElement("span",null,e.oldValue&&e.oldValue+" \xbb "," ",e.value)))})))):o.a.createElement("span",{style:{textOverflow:"ellipsis",wordBreak:"break-word"}},t.body))),o.a.createElement(Dt.a,null))})),n+i<r&&o.a.createElement("div",{className:l.loadMore},o.a.createElement("span",{className:l.commentLoad,onClick:function(){return e.loadComment()}},"Load more")))},Mt=a(2),Rt=a(453);var zt=Object($.a)({autoComplete:{"& > div > label":{fontSize:14}},input:{fontSize:14,color:"black"},label:{color:"black",fontSize:14,"&#outlined-basic-label":{color:"black"}}});function Ht(e){var t=e.name,a=e.model,n=(e.title,e.optionLabel),i=void 0===n?"name":n,c=e.multiple,l=void 0!==c&&c,s=e.required,m=e.index,p=e.value,f=(e.data,e.update),b=e.disabled,v=e.criteriaIds,h=e.criteriaFieldName,g=e.criteriaOperator,O=e.type,C=e.operator,j=void 0===C?"or":C,y=e.classes,E=void 0===y?{}:y,x=e.className,k=e.size,w=e.disableClearable,N=e.TextFieldProps,S=void 0===N?{}:N,D=e.options,T=o.a.useState(!1),F=Object(I.a)(T,2),L=F[0],A=F[1],M=Object(r.useState)([]),R=Object(I.a)(M,2),z=R[0],H=R[1],W=Object(r.useState)(null),q=Object(I.a)(W,2),_=q[0],U=q[1],V=zt(),Y=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=[];e&&n.push({fieldName:i,operator:"like",value:e}),h&&n.push({fieldName:h,value:t,operator:g});var r={criteria:n,operator:j};return Ne.search(a,{fields:["name","fullName"],data:r,limit:10,offset:0}).then((function(e){var t=e.data;t&&t.length&&H(t)}))}),[a,h,g,j,i]);return function(e,t){var a=o.a.useRef(!1);o.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(o.a.useCallback((function(){_&&Y(_,v)}),[Y,_,v]),500),Object(r.useEffect)((function(){L||H([])}),[L]),Object(r.useEffect)((function(){L&&(D&&D.length>0?H(Object(d.a)(D)):Y(null,v))}),[Y,L,v,D]),o.a.createElement(Rt.a,{classes:Object(u.a)({inputFocused:V.input,clearIndicator:V.input,popupIndicator:V.input,disabled:V.disabled},E),size:k,key:m,open:L,onOpen:function(e){e&&e.stopPropagation(),A(!0)},onClose:function(e){e&&e.stopPropagation(),A(!1)},onClick:function(e){return e&&e.stopPropagation()},disableClearable:w,clearOnEscape:!0,autoComplete:!0,className:Object(Mt.a)(V.autoComplete,x),options:z,multiple:l,required:s,value:p||"",onChange:function(e,a){var n=a;"multiple"===O&&(n=a&&a.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id}))}))),f(Object(P.a)({},t,n),e)},name:t,disabled:b,onInputChange:function(e,t){return U(t)},renderInput:function(e){return o.a.createElement(B.a,Object.assign({variant:"outlined",fullWidth:!0},S,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},S.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()}}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:V&&V.label},className:x}))},getOptionLabel:function(e){return e[i]||""}})}var Wt=a(458),qt=a(450);function _t(e){return o.a.createElement(qt.a,Object.assign({elevation:6,variant:"filled"},e))}var Ut=Object($.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Vt(e){var t=Ut(),a=e.open,n=e.severity,r=void 0===n?"success":n,i=e.closeSnackbar,c=e.message,l=function(e,t){i()};return o.a.createElement("div",{className:t.root},o.a.createElement(Wt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:1e3,onClose:l},o.a.createElement(_t,{onClose:l,severity:r},c)))}var Yt=a(225),Xt=a.n(Yt),Kt=a(224),Jt=a.n(Kt),$t=a(134),Gt=a.n($t),Qt=a(226),Zt=a.n(Qt),ea=a(431);var ta=function(e){var t=e.files,a=e.maxFiles,n=e.removeAttachment,r=e.downloadAttachment,i="",c=[];if(t)return c=Array.prototype.slice.call(t).slice(0,a),o.a.createElement("div",{className:"attachment-list-container"},c.map((function(e,t){switch(e.fileType){case"image/png":case"image/jpeg":i=o.a.createElement(Jt.a,null);break;case"application/pdf":i=o.a.createElement(Xt.a,null);break;default:i=o.a.createElement(Gt.a,null)}return o.a.createElement("div",{className:"attachment-list-item",key:t},o.a.createElement("span",{style:{paddingBottom:15,display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{padding:5}},i),o.a.createElement("span",{style:{paddingLeft:5}},e.fileName),o.a.createElement(F.a,{onClick:function(){return n(e)}},o.a.createElement(Zt.a,null)),o.a.createElement(F.a,{onClick:function(){return r(e)}},o.a.createElement(ea.a,null))))})))},aa=Object($.a)((function(e){return{select:Object(P.a)({marginBottom:0,minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),paper:Object(P.a)({width:200},e.breakpoints.only("xs"),{width:150}),root:{margin:0}}}));function na(e){var t=e.value,a=e.onChange,n=e.model,i=e.title,c=e.name,l=e.optionLabel,s=e.options,d=aa(),m=o.a.useState(Object(u.a)({},t)),p=Object(I.a)(m,2),f=p[0],b=p[1];return Object(r.useEffect)((function(){b(Object(u.a)({},t))}),[t]),o.a.createElement(Ht,{model:n,title:i,value:f,optionLabel:l,name:c,data:f,update:function(e,t){a(e[c],t),b(e[c])},size:"small",className:Q()(d.select,d.root),disableClearable:!0,options:s,classes:{paper:d.paper},TextFieldProps:{margin:"dense",variant:"outlined"}})}na.defaultProps={value:{},onChange:function(){}};var ra=na,oa=a(377),ia=a(432),ca=a(379),la=a(433),sa=a(380);function ua(e){var t=e.open,a=e.onClose,n=e.onConfirm,r=e.title,i=e.content,c=e.disabled;return o.a.createElement(oa.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ia.a,{id:"alert-dialog-title"},r),o.a.createElement(ca.a,null,o.a.createElement(la.a,{id:"alert-dialog-description"},i)),o.a.createElement(sa.a,null,o.a.createElement(H.a,{onClick:a,color:"primary",size:"small"},"Cancel"),o.a.createElement(H.a,{onClick:n,color:"primary",size:"small",autoFocus:!0,disabled:c},"Confirm")))}ua.defaultProps={onClose:function(){},onConfirm:function(){},open:!1,title:"Delete Record",content:"Do you want to delete record ?",disabled:!1};var da=ua,ma=Object($.a)((function(e){return{root:{minWidth:200,border:"1px solid lightgray",height:"fit-content",padding:"2px 10px",borderRadius:4}}}));function pa(e){var t=e.value,a=e.onChange,n=(e.name,e.label,o.a.useState(t)),i=Object(I.a)(n,2),c=i[0],l=i[1],s=ma(),u=function(e,t){a(e,t),l(e)};return Object(r.useEffect)((function(){l(t)}),[t]),o.a.createElement(Ot.a,{className:s.root,disableToolbar:!0,variant:"inline",format:"YYYY-MM-DD",id:"".concat(Math.random()),InputProps:{disableUnderline:!0},value:c?K()(c):null,onChange:function(e,t){return u(t,e)}})}pa.defaultProps={value:null,onChange:function(){}};var fa=pa,ba=Object($.a)((function(e){return{select:Object(P.a)({marginBottom:0,minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),selectPadding:{padding:10},formControl:Object(P.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150})}}));function va(e){var t=e.value,a=e.onChange,n=e.options,i=e.name,c=ba(),l=o.a.useState(t),s=Object(I.a)(l,2),u=s[0],d=s[1];return Object(r.useEffect)((function(){d(t)}),[t]),o.a.createElement(ht.a,{variant:"outlined",className:c.formControl},o.a.createElement(gt.a,{className:c.select,native:!0,value:u||"",onChange:function(e){a(e.target.value,e),d(e.target.value)},inputProps:{name:"".concat(i),id:"outlined-".concat(i,"-native-simple")},classes:{select:c.selectPadding}},o.a.createElement("option",{"aria-label":"None",value:""}),n.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))))}va.defaultProps={value:"",onChange:function(){}};var ha=va,ga=a(381),Oa=a(376),Ca=a(435),ja=a(436),ya=a(437),Ea=a(443),xa=a(456),ka=Object($.a)((function(e){return{root:{display:"flex",borderBottom:"solid 1px rgba(0, 0, 0, 0.54)",marginBottom:"7px"},chip:{margin:"4px",height:30},list:{display:"flex",padding:"0 !important"},listItem:{padding:"0 !important"},divider:{width:1,height:28,margin:4},buttonContainer:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",position:"relative",bottom:-3},inputIconBtn:{margin:0,padding:0,color:"#bbb"}}}));function wa(e){var t=e.value,a=e.onDelete,n=e.filters,r=e.handleClick,i=(Object(N.a)(e,["value","onDelete","filters","handleClick"]),ka()),c="";if(t.length>1)c="Filters ".concat(t.length);else if(t.length){var l=n.find((function(e){return e.id===t[0]}));c=l?l.title:"Custom"}return o.a.createElement("div",{className:i.root},o.a.createElement(Oa.a,{className:i.list},o.a.createElement(xa.a,{label:c,onDelete:function(){return a(t)},className:i.chip})),o.a.createElement("div",{className:i.buttonContainer},o.a.createElement(F.a,{"aria-label":"open",onClick:r,className:i.inputIconBtn},o.a.createElement(ja.a,null)),o.a.createElement(F.a,{"aria-label":"refresh",className:i.inputIconBtn},o.a.createElement(ya.a,null))))}var Na=a(227),Sa=a(111),Da=a(228),Ta=a(229),Ia=a(230);Sa.b.add(Da.a,Ta.a,Ia.a);var Pa=Na.a,Fa=a(427),Ba=a(438),La=Object($.a)((function(e){return{container:{display:"flex",justifyContent:"center",flexDirection:"column"},subtitle1:{fontSize:12},chip:{margin:e.spacing(.5,.25)},link:{cursor:"pointer"}}}));function Aa(e){var t=e.title,a=e.value,n=La();return o.a.createElement("div",{className:n.container},o.a.createElement(R.a,{variant:"subtitle1",className:n.subtitle1},t),o.a.createElement(R.a,null,a))}function Ma(e){var t=e.title,a=e.value,n=e.optionLabelKey,r=e.viewRecord,i=La();function c(e){var t=e&&e[n];return t&&o.a.createElement(Ba.a,{className:i.link,onClick:function(){return r&&r(e)}},t)}return Array.isArray(a)?o.a.createElement("div",null,o.a.createElement(R.a,{variant:"subtitle1",className:i.subtitle1},t),a.map((function(e,t){return o.a.createElement(xa.a,{key:t,label:c(e),className:i.chip})}))):o.a.createElement("div",null,o.a.createElement(R.a,{variant:"subtitle1",className:i.subtitle1},t),a&&c(a))}function Ra(e){var t=e.title,a=e.value,n=e.customRender;return"object"!==typeof a||n?o.a.createElement(Aa,{title:t,value:a}):o.a.createElement(Ma,e)}function za(e){var t=e.name,a=e.title,n=e.autoTitle,r=e.value,i=void 0===r?"":r,c=e.onChange,l=e.onBlur,s=e.readOnly,d=e.inline,m=e.InputProps,p=e.style,f=e.isControlled,b=void 0===f||f,v=Object(N.a)(e,["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style","isControlled"]),h=o.a.useState(i),g=Object(I.a)(h,2),O=g[0],C=g[1];function j(e){c(O),l&&l(e)}function y(e){var t=e.target.value;b?C(t):c(t)}return o.a.useEffect((function(){C(i)}),[i]),d?s?o.a.createElement(Ra,{value:O}):o.a.createElement(Fa.a,Object.assign({style:Object(u.a)({width:"100%"},p),placeholder:a,inputProps:{"aria-label":a},name:t,onChange:y,onBlur:j,autoComplete:"off",readOnly:s,disabled:s,value:O||""},v)):s?o.a.createElement(Ra,{title:a,value:O}):o.a.createElement(B.a,Object.assign({id:"filled-".concat(t),label:a||n,name:t,style:Object(u.a)({width:"100%"},p),onChange:y,onBlur:j,autoComplete:"off",fullWidth:!0,InputProps:Object(u.a)({readOnly:s},m),value:O||"",className:v.className},v))}za.defaultProps={rows:3,readOnly:!1};var Ha=za,Wa=a(137),qa=a(459),_a=a(439),Ua=a(449),Va=a(452);function Ya(e){var t=e.title,a=e.className,n=e.onClick,r=Object(N.a)(e,["title","className","onClick"]);return t&&o.a.createElement(Ba.a,Object.assign({component:"button",variant:"body2",onClick:n,className:a},r),t)}function Xa(e){var t=e.name,a=e.className,n=e.onChange,r=e.value,i=e.classes,c=e.data;return o.a.createElement(qa.a,{"aria-label":t,name:t,className:a,value:r,onChange:function(e){return n(e)}},c.map((function(e,t){var a=e.value,n=e.label;return o.a.createElement(_a.a,{key:t,value:a,control:o.a.createElement(Ua.a,null),label:n,classes:{label:i&&i.label}})})))}function Ka(e){var t=e.name,a=e.value,n=e.onChange,r=e.title,i=e.inline,c=void 0!==i&&i,l=e.isDisabled,s=e.classes,u=Object(N.a)(e,["name","value","onChange","title","inline","isDisabled","classes"]);return c?o.a.createElement(Va.a,Object.assign({checked:Boolean(a),onChange:function(e){var t=e.target.checked;return n(t)},value:t,name:t,disabled:l},u)):o.a.createElement(_a.a,{control:o.a.createElement(Va.a,{checked:Boolean(a),onChange:function(e){var a=e.target.checked;return n({name:t,checked:a})},value:t}),label:r,classes:{label:s&&s.label}})}function Ja(e){var t=e.classes,a=e.onClick,n=e.title,r=e.hide,i=e.className,c=Object(N.a)(e,["classes","onClick","title","hide","className"]);return o.a.createElement(H.a,Object.assign({variant:"contained",color:"primary",className:Q()(t.button,i),onClick:a},c,{style:r?{display:"none"}:{}}),n)}function $a(e){var t=e.name,a=e.value,n=void 0===a?"":a,r=e.onChange,i=e.options,c=Object(N.a)(e,["name","value","onChange","options"]),l={options:i,getOptionLabel:function(e){return e.title||""}};return o.a.createElement(Rt.a,Object.assign({},l,{value:i.find((function(e){return e.name===n})),onChange:function(e,t){t&&r(t.name)},name:t,style:{marginRight:8,width:150}},c,{renderInput:function(e){return o.a.createElement(B.a,e)}}))}var Ga=a(232),Qa=a(447),Za=a(233),en=a.n(Za),tn=a(245);var an=Object(Qa.a)((function(e){return{formControl:{width:"100%",position:"relative","&.inline":{marginTop:3},".inline &":{paddingBottom:3}},inputRoot:{"& > div":{marginTop:"12px"}},root:{flexGrow:1},inputWrapper:{".inline & > *":{paddingBottom:3}},input:{display:"flex",padding:0,textOverflow:"ellipsis",position:"relative",whiteSpace:"nowrap",height:36,".single":{height:36},".inline &":{height:26}},valueContainer:{position:"relative",display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden",".single > &":{flexWrap:"nowrap"},".inline &":{flexWrap:"nowrap"}},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(Ga.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16,textOverflow:"ellipsis",overflow:"hidden"},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16,".inline &":{bottom:1}},divider:{height:e.spacing(2)},viewIcon:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:70,bottom:8,zIndex:1,cursor:"pointer","& svg":{fontSize:20,color:"#ddd","&:hover":{color:"#555"}}}}}));function nn(e){var t=e.inputRef,a=Object(N.a)(e,["inputRef"]);return o.a.createElement("div",Object.assign({ref:t},a))}var rn={Control:function(e){var t=e.children,a=e.innerProps,n=e.innerRef,r=e.selectProps,i=r.classes,c=r.isMulti,l=r.TextFieldProps,s=r.InputProps;return o.a.createElement(B.a,Object.assign({className:i.inputWrapper,fullWidth:!0,classes:Object(u.a)({},l&&l.label&&{root:i.inputRoot}),InputProps:Object(u.a)(Object(u.a)({},s),{},{inputComponent:nn,inputProps:Object(u.a)({className:Q()(i.input,{single:!c}),ref:n,children:t},a)})},l))},MultiValue:function(e){var t={};return e.isDisabled||(t.onDelete=e.removeProps.onClick),o.a.createElement(xa.a,Object.assign({tabIndex:-1,label:e.children,className:Object(Mt.a)(e.selectProps.classes.chip,Object(P.a)({},e.selectProps.classes.chipFocused,e.isFocused)),deleteIcon:o.a.createElement(en.a,e.removeProps)},t))},NoOptionsMessage:function(e){return o.a.createElement(R.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return o.a.createElement(M.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps,{className:"menu-item"}),e.children)},Placeholder:function(e){return o.a.createElement(R.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return o.a.createElement(R.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return o.a.createElement("div",{className:Q()(e.selectProps.classes.valueContainer,e.selectProps.valueContainerClassName)},e.children)}};function on(e){var t=an(),a=Object(r.useState)(e.options||[]),n=Object(I.a)(a,2),i=n[0],c=n[1],l=Object(r.useState)(!1),s=Object(I.a)(l,2),d=s[0],m=s[1],p=o.a.useState(null),f=Object(I.a)(p,2),b=f[0],v=f[1],h=e.name,g=e.title,O=void 0===g?"":g,C=e.onChange,j=e.value,y=e.error,E=e.readOnly,x=void 0!==E&&E,k=e.isMulti,w=void 0!==k&&k,S=e.isSearchable,P=void 0!==S&&S,F=e.optionValueKey,B=void 0===F?"id":F,L=e.optionLabelKey,A=void 0===L?"title":L,M=e.fetchAPI,R=e.beforeFetchAPI,z=e.isPortal,H=e.inline,W=e.autoFocus,q=e.onFocus,_=e.InputProps,U=e.formControlStyle,V=e.clearIndicatorStyle,Y=e.onView,X=Object(N.a)(e,["name","title","onChange","value","error","readOnly","isMulti","isSearchable","optionValueKey","optionLabelKey","fetchAPI","beforeFetchAPI","isPortal","inline","autoFocus","onFocus","InputProps","formControlStyle","clearIndicatorStyle","onView"]),K=o.a.useCallback((function(t){return e.options.find((function(e){return e[B]===t}))}),[e.options,B]);function J(){return $.apply(this,arguments)}function $(){return($=Object(T.a)(D.a.mark((function t(){var a,n,r=arguments;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:"",m(!0),!R){t.next=5;break}return t.next=5,R();case 5:if(!M){t.next=12;break}return t.next=8,M({search:a});case 8:n=t.sent,c(n),t.next=13;break;case 12:c(e.options);case 13:m(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o.a.useEffect((function(){if("object"!==typeof j){var e=j.split(",");v(1===e.length?K(e[0].trim()):e.map((function(e){return K(e.trim())})))}else v(j)}),[j,K]);var G=function(e,t){var a=o.a.useRef(null),n=function(){return a.current&&clearTimeout(a.current)},r=function(e){return a.current=setTimeout(e,t)};return o.a.useEffect((function(){return function(){return n()}}),[]),function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];n(),r((function(){return e.apply(void 0,a)}))}}(J,400);return x?o.a.createElement(Ra,{title:O,value:function(e){var t=i.find((function(t){return"".concat(t.value)==="".concat(e)}));return t&&t[A]||e}(j)}):o.a.createElement(ht.a,{className:Q()(t.formControl,{inline:H}),style:U},o.a.createElement(tn.a,Object.assign({autoFocus:W,name:h,InputProps:_,TextFieldProps:Object(u.a)(Object(u.a)({},H?{}:{label:O,InputLabelProps:{shrink:!0}}),{},{error:y}),isLoading:d,onFocus:function(){q&&q(),J()},isClearable:!0,options:d?[]:i,onInputChange:function(e,t){"input-change"===t.action&&(m(!0),G(e))},onChange:function(e){C("object"!==typeof j?w?e.map((function(e){return e[B]})).join(","):e&&e[B]:e)},value:b,placeholder:P?"Search ".concat(O):"Select ".concat(O),classes:t,components:rn,isDisabled:x,isMulti:w,isSearchable:P,getOptionLabel:function(e){return e[A]},getOptionValue:function(e){return e[B]},blurInputOnSelect:!0,menuShouldBlockScroll:!0,menuPlacement:"auto",styles:{menuPortal:function(e){return Object(u.a)(Object(u.a)({},e),{},{zIndex:1500})},container:function(e){return{width:"100%"}},clearIndicator:function(e){return Object(u.a)(Object(u.a)({},e),V)},menu:function(e){return Object(u.a)(Object(u.a)({},e),{},{marginTop:0,borderRadius:0})}}},X.options?{}:{filterOption:function(){return!0}},z?{menuPortalTarget:document.body}:{},X)),j&&Y&&o.a.createElement("div",{onClick:function(e){e.stopPropagation(),Y(j)},className:t.viewIcon},o.a.createElement(Gt.a,null)))}on.defaultProps={isPortal:!0};var cn=on,ln=a(441),sn=a(445),un={date:Ot.a,time:ln.a,datetime:sn.a},dn={date:"DD/MM/YYYY",time:"LT",datetime:"DD/MM/YYYY h:mm a"};var mn=function(e){var t=e.inline,a=e.type,n=void 0===a?"date":a,i=Object(N.a)(e,["inline","type"]),c=Object(r.useState)(!1),d=Object(I.a)(c,2),m=d[0],p=d[1],f=o.a.useRef(),b=(i.name,i.title),v=i.format,h=i.readOnly,g=void 0!==h&&h,O=(i.error,i.onChange),C=Object(N.a)(i,["name","title","format","readOnly","error","onChange"]);if(g){var j=i.value?K()(i.value).format(v||dn[n]):"";return o.a.createElement(Ra,{title:b,value:j})}var y=un[n];return o.a.createElement(s.a,{utils:l.a,moment:K.a},o.a.createElement(y,Object.assign({autoOk:!0,open:m,onChange:function(e){f.current=e},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{style:Object(u.a)({width:"100%"},t?{margin:0}:{}),label:t?"":b,format:v||dn[n]},"time"!==n?{animateYearScrolling:!1}:{},C,{onKeyDown:function(e){40===e.keyCode&&p(!0)},onClose:function(){O(f.current),p(!1)},onOpen:function(){return p(!0)}})))},pn=a(235);function fn(e){var t=e.inputRef,a=(e.onChange,e.thousandSeparator),n=void 0===a||a,r=Object(N.a)(e,["inputRef","onChange","thousandSeparator"]);return o.a.createElement(pn.a,Object.assign({getInputRef:t,thousandSeparator:n},r))}function bn(e){var t=e.type,a=void 0===t?"integer":t,n=e.title,i=e.onChange,c=e.value,l=void 0===c?0:c,s=e.readOnly,u=e.scale,d=void 0===u?2:u,m=e.customeFormat,p=e.onBlur,f=Object(N.a)(e,["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"]),b=Object(r.useState)(l),v=Object(I.a)(b,2),h=v[0],g=v[1],O=Object(r.useCallback)((function(e){return Number(Number(e).toFixed("integer"===a?0:d))}),[a,d]);return o.a.useEffect((function(){g(O(l))}),[l,g,O]),s?o.a.createElement(Ra,{title:n,value:o.a.createElement(fn,Object.assign({},m,{value:l,displayType:"text"})),customRender:!0}):o.a.createElement(Ha,Object.assign({onChange:g,title:n,type:"number",value:"".concat(h),onBlur:function(e){i(O(e.target.value)),g(O(e.target.value)),p&&p(e)}},f))}bn.defaultProps={readOnly:!1};var vn=bn,hn={enum:["=","!=","isNull","notNull"],text:["like","notLike","isNull","notNull"],string:["=","!=","like","notLike","isNull","notNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","notNull"],boolean:["isTrue","isFalse"]},gn=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"notNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"true"},{name:"isFalse",title:"false"}];function On(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[{name:e.targetName}];return e.targetSearch&&(n=e.targetSearch.map((function(e){return{name:e}}))),Ne.search(e.target,Object(u.a)(Object(u.a)({},a),{},{limit:10,offset:0,fields:n.map((function(e){return e.name})),data:t?n.reduce((function(e,a){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a.name,t))}),{criteria:void 0,operator:void 0}):{}}))}var Cn=Object($.a)((function(e){return{group:{margin:"0px 8px",flexDirection:"row"},button:{margin:e.spacing(1)},label:{fontSize:"0.875rem"},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},link:{margin:e.spacing(1)},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},criteriaValue:{width:"250px !important",alignItems:"normal"}}})),jn={title:"",operator:"and",isArchived:!1,isShare:!1,criteria:[{}],selected:!1},yn=function(e,t){e.map((function(e){return hn[e]=t}))};function En(e,t,a){var n=a.onChange,r=a.value,i=a.value2,c=a.classes,l=a.style,s=Object(N.a)(a,["onChange","value","value2","classes","style"]);return["=","!=",">",">=","<","<=","like","notLike"].includes(t)?o.a.createElement(e,Object.assign({name:"value",className:c.criteriaValue,onChange:function(e){return n({name:"value",value:e})},value:r},s)):["between","notBetween"].includes(t)?o.a.createElement(o.a.Fragment,null,o.a.createElement(e,Object.assign({name:"value",style:Object(u.a)({marginRight:8},l),className:c.criteriaValue,onChange:function(e){return n({name:"value",value:"".concat(e)})},value:r},s)),o.a.createElement(e,Object.assign({name:"value2",className:c.criteriaValue,onChange:function(e){return n({name:"value2",value:"".concat(e)})},value:i},s))):void 0}function xn(e){var t=e.type,a=e.operator,n=e.onChange,r=e.value,i=e.classes,c=Object(N.a)(e,["type","operator","onChange","value","classes"]),l=Object(u.a)({value:r.value,value2:r.value2,onChange:n},c);switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":return function(e,t){var a=t.onChange,n=Object(N.a)(t,["onChange"]);if(["like","notLike","notIn"].includes(e))return o.a.createElement(Ha,Object.assign({name:"value",onChange:function(e){return a({name:"value",value:e})},margin:"none",style:{width:250}},n));if(["in"].includes(e)){var r=n.field,i=n.value,c=r.targetName,l=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.search,e.next=3,On(r,a);case 3:return n=e.sent,o=n.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(cn,{placeholder:"",fetchAPI:l,isSearchable:!0,optionLabelKey:c,optionValueKey:"id",name:"value",value:i,isMulti:!0,formControlStyle:{marginBottom:"5px",width:250},clearIndicatorStyle:{paddingLeft:"0 !important"},closeMenuOnScroll:!1,onChange:function(e){return a({name:"value",value:Array.isArray(e)?e.map((function(e){return Object(P.a)({id:e.id},c,e[c])})):e&&Object(P.a)({id:e.id},c,e[c])})}})}}(a,Object(u.a)({},l));case"date":case"time":case"dateTime":return En(mn,a,Object(u.a)(Object(u.a)({type:t},l),{},{format:"DD/MM/YYYY",margin:"none",classes:i}));case"integer":case"long":case"decimal":return En(vn,a,Object(u.a)(Object(u.a)({type:t},l),{},{margin:"none",classes:i}));case"enum":var s=c.field.selectionList.map((function(e){var t=e.title,a=e.value,n=e.data;return{name:n&&n.value||a,title:t}}));return En($a,a,Object(u.a)({options:s,classes:i},l));default:return En(Ha,a,Object(u.a)(Object(u.a)({classes:i},l),{},{margin:"none"}))}}function kn(e){var t=e.className,a=e.onRemove,n=e.onChange,r=e.value,i=e.fields,c=e.classes,l=i.find((function(e){return e.name===r.fieldName})),s=(l&&l.type||"").toLowerCase();l&&l.selectionList&&(s="enum");var d=gn.filter((function(e){return(hn[s]||[]).includes(e.name)}));function m(e){var t=e.name,a=e.options,i=Object(N.a)(e,["name","options"]);return o.a.createElement($a,Object.assign({name:t,onChange:function(e){return n({name:t,value:e})},value:r[t],options:a},i))}return o.a.createElement("div",null,o.a.createElement(F.a,{"aria-label":"close",className:t,onClick:a},o.a.createElement(Ea.a,null)),o.a.createElement(m,{name:"fieldName",options:i,className:"fieldName"}),o.a.createElement(m,{name:"operator",options:d,className:"operator"}),r.operator&&xn(Object(u.a)({type:s,operator:r.operator,value:r,onChange:n,classes:c},{field:l})))}function wn(e){var t=e.customCriteria,a=e.setCustomCriteria,n=e.fields,r=e.clearFilters,i=e.applyFiltersClick,c=e.filterView,l=e.onSave,s=e.onDelete,d=Cn(),m=o.a.useState(!1),p=Object(I.a)(m,2),f=p[0],b=p[1],v=t.id,h=t.operator,g=t.isArchived,O=t.criteria,C=t.title,j=t.isShare;function y(e){var n=e.target,r=n.name,o=n.value;a(Object(u.a)(Object(u.a)({},t),{},Object(P.a)({},r,o)))}function E(e,t,r){t instanceof K.a&&(t=K()(t).format("YYYY-MM-DD")),a(Object(Wa.a)((function(a){a.criteria[r][e]=t,"fieldName"===e&&(a.criteria[r].operator="",a.criteria[r].value=function(e){var t=n.find((function(t){return t.name===e})).type.toLowerCase();return["one_to_one","many_to_one","many_to_many","one_to_many"].includes(t)?null:["integer","long","decimal"].includes(t)?0:["date","time","dateTime"].includes(t)?null:""}(t))})))}function x(){var e=t.id,a=t.version,n=t.title,r=t.isShare,o=t.operator,i=t.criteria,s={shared:r||!1,title:n,filterCustom:JSON.stringify({operator:o,criteria:i}),filterView:c};e?(s.id=e,s.version=a):s.name=n.replace(" ","_").toLowerCase(),l(s)}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(Xa,{name:"operator",onChange:function(e){return y(e)},value:h,classes:d,className:d.group,data:[{label:"and",value:"and"},{label:"or",value:"or"}]}),o.a.createElement(Ka,{name:"isArchived",title:"Show Archived",value:g,onChange:function(e){var t=e.name;return y({target:{value:e.checked,name:t}})},classes:d,className:"archived"})),o.a.createElement("div",null,o.a.createElement(Oa.a,{className:d.list},O.map((function(e,t){return o.a.createElement(ga.a,{className:d.listItem,key:t},o.a.createElement(kn,{className:d.buttonLink,id:t,value:e,fields:n,onRemove:function(){return function(e){a(Object(Wa.a)((function(t){1===t.criteria.length?t.criteria=[{}]:t.criteria.splice(e,1)})))}(t)},onChange:function(e){return E(e.name,e.value,t)},classes:d}))})))),o.a.createElement("div",{className:d.buttonLink},o.a.createElement(Ya,{title:"Add filter",className:Q()(d.link,"add-filter"),onClick:function(){a(Object(Wa.a)((function(e){e.criteria[e.criteria.length-1].operator&&e.criteria.push({})})))}}),o.a.createElement(Dt.a,{className:d.divider}),o.a.createElement(Ya,{title:"Clear",className:Q()(d.link,"clear"),onClick:function(){r(),a(jn)}}),o.a.createElement(Dt.a,{className:d.divider}),o.a.createElement(Ya,{title:"Export",className:d.link}),o.a.createElement(Dt.a,{className:d.divider}),o.a.createElement(Ya,{title:"Export full",className:d.link}),o.a.createElement(Dt.a,{className:d.divider}),o.a.createElement(Ya,{title:"Apply",className:Q()(d.link,"apply-filter"),onClick:function(){return i(t)}})),o.a.createElement(Dt.a,{style:{marginTop:8}}),o.a.createElement("div",null,o.a.createElement(Ha,{name:"title",value:C,onChange:function(e){return y({target:{value:e,name:"title"}})},className:Q()(d.textField,"title")}),o.a.createElement(Ka,{title:"share",name:"isShare",value:j,onChange:function(e){var t=e.name;return y({target:{value:e.checked,name:t}})},className:"share"})),o.a.createElement("div",null,o.a.createElement(Ja,{classes:d,onClick:x,title:"Save",hide:""===C||null===C||void 0!==v,className:"save"}),o.a.createElement(Ja,{classes:d,onClick:x,title:"Update",hide:""===v||void 0===v||null===v}),o.a.createElement(Ja,{classes:d,onClick:function(){return b(!0)},title:"Delete",hide:""===v||void 0===v||null===v,className:"delete"}),o.a.createElement(oa.a,{open:f,onClose:function(){return b(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ia.a,{id:"alert-dialog-title"},"Question"),o.a.createElement(ca.a,null,o.a.createElement(la.a,{id:"alert-dialog-description"},"Would you like to remove the filter?")),o.a.createElement(sa.a,null,o.a.createElement(H.a,{onClick:function(){return b(!1)},className:"cancel"},"Cancel"),o.a.createElement(H.a,{onClick:function(){s(t),b(!1)},color:"primary",autoFocus:!0,className:"confirm-delete"},"ok")))))}yn(["long","decimal","date","time","datetime"],hn.integer),yn(["one_to_many"],hn.text),yn(["one_to_one","many_to_one","many_to_many"],["like","notLike","in","notIn","isNull"]);var Nn=Object($.a)((function(e){return{container:{width:200,zIndex:900,"& > div:last-child":{zIndex:1}},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},typography:{padding:e.spacing(1),fontWeight:600,flex:1},searchContainer:{display:"flex",flexDirection:"column","& div":{display:"flex",alignItems:"center"}},formControl:{margin:e.spacing(1)},group:{margin:"0px 8px",flexDirection:"row"},paper:{minWidth:480,boxShadow:"0 4px 12px rgb(0,0,0,0.4)"},link:{margin:e.spacing(1)},button:{margin:e.spacing(1)},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},searchFilterContainer:{display:"flex",alignItems:"flex-start !important"},searchFilter:{flexDirection:"column",alignItems:"baseline !important",width:"100%"},filter:{flexDirection:"column",marginLeft:8,alignItems:"baseline !important"},inputIconBtn:{margin:0,padding:0,color:"#bbb"},label:{fontSize:"0.875rem"},filterLabel:{display:"flex",alignItems:"center",margin:"0 8px"}}}));function Sn(e){try{return JSON.parse(e)}catch(t){return e}}function Dn(e){var t=e.icon,a=e.title,n=e.classes;return o.a.createElement("div",{className:n.filterLabel},o.a.createElement(Pa,{icon:t}),o.a.createElement(R.a,{className:n.typography},a))}function Tn(e){var t=e.filter,a=e.disabled,n=e.isChecked,r=e.onClick,i=e.onChange,c=e.classes,l=t.title;return o.a.createElement(ga.a,{className:c.listItem},o.a.createElement(Ka,{name:l.replace(" ","_").toLowerCase(),value:n,onChange:function(e){i(e,t)},inline:!0,isDisabled:a}),o.a.createElement(Ya,{title:l,onClick:function(){return(!a||n)&&r(t,!n)},style:a&&!n?{color:"rgba(0, 0, 0, 0.54)"}:{}}))}function In(e){var t=e.active,a=void 0===t?[]:t,n=e.data,r=void 0===n?[]:n,i=e.disabled,c=e.onClick,l=e.onChange,s=e.classes;return o.a.createElement("div",{className:s.filter},o.a.createElement(Oa.a,{className:s.list},r.map((function(e){return o.a.createElement(Tn,{key:e.id,filter:e,isChecked:a.includes(e.id),disabled:i,onClick:c,onChange:l,classes:s})}))))}function Pn(e){var t=e.filters,a=e.value,n=void 0===a?[]:a,i=e.onOpen,c=e.onDelete,l=e.classes,s=e.onContentSearch,u=Object(r.useState)(""),d=Object(I.a)(u,2),m=d[0],p=d[1],f=o.a.useCallback((function(e){var t=e.target.value;s(t||m)}),[s,m]);return n.length>0?o.a.createElement(wa,{handleClick:i,value:n,onDelete:c,filters:t}):o.a.createElement(Ha,{name:"search",margin:"none",onChange:p,onKeyPress:function(e){return"Enter"===e.key&&f(e)},value:m,InputProps:{endAdornment:o.a.createElement(Ca.a,{position:"end"},o.a.createElement(F.a,{"aria-label":"open",onClick:i,className:l.inputIconBtn},o.a.createElement(ja.a,null)),o.a.createElement(F.a,{"aria-label":"refresh",className:l.inputIconBtn,onClick:f},o.a.createElement(ya.a,null)))}})}function Fn(e){var t=e.name,a=e.value,n=e.fields,i=e.filters,c=void 0===i?[]:i,l=e.domain,s=void 0===l?[]:l,m=e.onSave,p=e.onDelete,f=e.handleChange,b=e.onContentSearch,v=Nn(),h=Object(r.useRef)(),g=o.a.useState(!1),O=Object(I.a)(g,2),C=O[0],j=O[1],y=o.a.useState([]),E=Object(I.a)(y,2),x=E[0],k=E[1],w=o.a.useState(!1),N=Object(I.a)(w,2),S=N[0],P=N[1],B=Object(r.useState)(jn),A=Object(I.a)(B,2),M=A[0],z=A[1],H=S?c.find((function(e){return e.id===x[0]})):null;function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=c.filter((function(t){return e.includes(t.id)})),r=s.filter((function(t){return e.includes(t.id)})),o={criteria:[],operator:t.operator||"and"};if(a&&S)o.criteria=t.criteria;else{var i,l;if(n.length)(l=o.criteria).push.apply(l,Object(d.a)(n.map((function(e){var t=Sn(e.filterCustom),a=t.criteria,n=void 0===a?[]:a;return{operator:t.operator,criteria:n}}))));(i=o.criteria).push.apply(i,Object(d.a)(t.criteria||[]))}return r.length&&(o._domains=r.map((function(e){return{title:e.title,domain:e.domain}}))),o}function _(e,t){var a=[];e.length>0&&(a=W(e,t)),f({selected:Object(d.a)(e),query:a})}function U(e,t){var a=!!e.domain,n=t&&e?[e.id]:[];P(!a&&t),k(n),_(n)}function V(e,t){var a=t.id,n=x.findIndex((function(e){return e===a}));n>-1?!e&&x.splice(n,1):e&&x.push(a),k(Object(d.a)(x))}function Y(){f({}),k([]),P(!1),z(jn)}function X(){return(X=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:U(e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(H){var e=Sn(H.filterCustom),t=e.criteria,a=e.operator;z(Object(u.a)(Object(u.a)({},H),{},{operator:a,criteria:t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{operator:e.operator})}))}))}else z(jn)}),[z,H]),o.a.createElement("div",{className:v.container,ref:h},o.a.createElement(Pn,{value:a&&a.selected,filters:c,onOpen:function(){j(!0)},onDelete:Y,classes:v,onContentSearch:b}),o.a.createElement(q.a,{open:C,anchorEl:h.current,placement:"bottom-start",disablePortal:!0},o.a.createElement(L.a,{className:v.paper},o.a.createElement("div",{className:v.searchContainer},o.a.createElement("div",null,o.a.createElement(R.a,{className:v.typography},"Advanced Search"),o.a.createElement(F.a,{"aria-label":"close",onClick:function(){j(!1)}},o.a.createElement(Ea.a,null))),o.a.createElement(Dt.a,null),o.a.createElement("div",{className:v.searchFilterContainer},s.length>0&&o.a.createElement("div",{className:v.searchFilter},o.a.createElement(Dn,{icon:"filter",title:"Filters",classes:v}),o.a.createElement(In,{data:s,disabled:S,active:x,onClick:U,onChange:V,classes:v})),c.length>0&&o.a.createElement("div",{className:v.searchFilter},o.a.createElement(Dn,{icon:"filter",title:"My Filter",classes:v}),o.a.createElement(In,{data:c,disabled:S,active:x,onClick:U,onChange:V,classes:v}))),c.length>=1||s.length?o.a.createElement(Dt.a,{style:{marginTop:8}}):"",o.a.createElement(wn,{fields:n,clearFilters:Y,applyFiltersClick:function(e){x.length>0?_(x.length?Object(d.a)(x):[null]):e&&e.criteria.length&&function(e){f({selected:[null],query:W(x,e,!0)})}(Object(u.a)(Object(u.a)({},e),{},{criteria:(e.criteria||[]).filter((function(e){return e.fieldName&&e.operator}))})),j(!1)},filterView:t,onSave:function(e){return X.apply(this,arguments)},onDelete:function(e){p(e),Y()},customCriteria:M,setCustomCriteria:z})))))}var Bn=[{value:"low",label:"Low"},{value:"normal",label:"Normal"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],Ln=[{value:"new",label:"New"},{value:"in-progress",label:"In Progress"},{value:"closed",label:"Closed"},{value:"canceled",label:"Canceled"}],An=["Project","AssignedTo","Priority","Status","TaskDate","TaskEndDate"],Mn=Object($.a)((function(e){return{typography:{textAlign:"left",textTransform:"none"},common:{width:"100%",marginBottom:15},drawerFooter:Object(P.a)({display:"flex",alignItems:"center",background:"#F6F8F9",padding:"5px 0px",justifyContent:"space-evenly",width:500,position:"fixed",border:"1px solid lightgray",bottom:0,zIndex:100},e.breakpoints.only("xs"),{width:300}),commentBtnActive:{backgroundColor:"#1E85D1",color:"white",fontSize:"9pt",fontWeight:600,borderRadius:50,border:"none",marginLeft:10,textTransform:"none","&:hover":{backgroundColor:"#1E85D1 !important"}},commentBtnDisable:{backgroundColor:"#90CAF9","&:hover":{backgroundColor:"#90CAF9 !important"}}}}));function Rn(e){var t=e.task,a=e.onCardEdit,n=e.userId,i=e.maxFiles,c=e.attachments,l=e.addComment,s=e.removeAttachment,m=e.downloadAttachment,p=e.selectedProject,f=void 0===p?{}:p,b=Object(r.useState)({name:"",project:{},parentTask:{},assignedTo:{},status:"",priority:"",taskDate:null,progressSelect:0,taskEndDate:null,description:""}),v=Object(I.a)(b,2),h=v[0],g=v[1],O=h||{},C=O.name,j=O.project,y=O.parentTask,E=O.assignedTo,x=O.status,k=O.priority,w=O.taskDate,N=O.progressSelect,S=O.taskEndDate,F=O.description,L=Mn(),A=Object(r.useState)(null),M=Object(I.a)(A,2)[1],z=Object(r.useState)({limit:4,total:0,offset:0}),W=Object(I.a)(z,2),q=W[0],_=W[1],U=Object(r.useState)(null),V=Object(I.a)(U,2),Y=V[0],X=V[1],J=Object(r.useState)({message:"",open:!1,severity:"success"}),$=Object(I.a)(J,2),G=$[0],Z=$[1],ee=Object(r.useState)(""),te=Object(I.a)(ee,2),ae=te[0],ne=te[1],re=function(e){var t=e.severity,a=e.message;Z({open:!0,severity:t,message:a})},oe=function(){var e=Object(T.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(t);case 2:(n=e.sent)&&(a({column:Object(u.a)({},n.teamTaskSection||{}),record:Object(u.a)({},n)}),g(Object(u.a)({},n)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(e){g(Object(u.a)(Object(u.a)({},h),{},Object(P.a)({},e.target.name,e.target.value))),"name"!==e.target.name&&le(e)},ce=function(e,t){var a=Object(u.a)(Object(u.a)({},h),{},Object(P.a)({},t,e));g(a),oe(a)},le=function(e){oe(Object(u.a)(Object(u.a)({},h),{},Object(P.a)({},e.target.name,e.target.value)))},se=function(e){var t=Object(u.a)(Object(u.a)({},h),e);g(t),oe(t)},ue=function(){var e=Object(T.a)(D.a.mark((function e(){var a,n,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q.limit,n=q.offset,e.next=3,_e({offset:n+4,limit:a,id:t.id,relatedModel:"com.axelor.team.db.TeamTask"});case 3:(r=e.sent)&&(o=[].concat(Object(d.a)(Y),Object(d.a)(r.comments)),X(o),_(Object(u.a)(Object(u.a)({},q),{},{offset:r.offset,total:r.total})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=q.total,e.next=3,Ve(t);case 3:(n=e.sent)&&n.id?(r=Y.findIndex((function(e){return e.id===n.id})),Y.splice(r,1),_(Object(u.a)(Object(u.a)({},q),{},{total:a-1})),X(Y),re({message:"Removed successfully"})):re({message:"Error",severity:"error"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){g(Object(u.a)({},t)),function(){var e=Object(T.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e({id:t.id,relatedModel:"com.axelor.team.db.TeamTask"});case 2:(a=e.sent)&&(X(a.comments),_({limit:4,offset:a.offset,total:a.total}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]);var me=o.a.useCallback(Object(T.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l(ae);case 4:(t=e.sent)&&(ne(""),X((function(e){return[t].concat(Object(d.a)(e))})));case 6:case"end":return e.stop()}}),e)}))),[l,ae]);return o.a.createElement(vt.a,{container:!0},o.a.createElement(vt.a,{item:!0,container:!0,style:{padding:15}},o.a.createElement(vt.a,{item:!0,xs:12},o.a.createElement(B.a,{style:{width:"100%",marginBottom:15},name:"name",placeholder:"Subject",variant:"outlined",value:C,onChange:ie,onBlur:le})),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Project")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(Ht,{model:"com.axelor.apps.project.db.Project",title:"Project",value:j,optionLabel:"fullName",name:"project",data:j,update:se,className:L.common})),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Parent Task")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(Ht,{className:L.common,model:"com.axelor.team.db.TeamTask",title:"Parent Task",value:y,optionLabel:"fullName",name:"parentTask",data:y,update:se,criteriaIds:h.id,criteriaFieldName:"id",criteriaOperator:"!=",operator:"and"})),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Assigned To")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(Ht,{className:L.common,model:"com.axelor.auth.db.User",title:"Assigned To",value:E,optionLabel:"fullName",name:"assignedTo",data:E,update:se,options:f.membersUserSet})),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Status")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(ht.a,{variant:"outlined",style:{width:"100%",marginBottom:15}},o.a.createElement(gt.a,{native:!0,value:x,onChange:ie,inputProps:{name:"status",id:"outlined-status-native-simple"}},o.a.createElement("option",{"aria-label":"None",value:""}),Ln.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Priority")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(ht.a,{variant:"outlined",style:{width:"100%",marginBottom:15}},o.a.createElement(gt.a,{native:!0,value:k,onChange:ie,inputProps:{name:"priority",id:"outlined-priority-native-simple"}},o.a.createElement("option",{"aria-label":"None",value:""}),o.a.createElement("option",{"aria-label":"None",value:""}),Bn.map((function(e){return o.a.createElement("option",{key:e.value,value:e.value},e.label)}))))),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Progress")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(ht.a,{variant:"outlined",style:{width:"100%",marginBottom:15}},o.a.createElement(gt.a,{native:!0,value:N,onChange:ie,inputProps:{name:"progressSelect",id:"outlined-progressSelect"}},o.a.createElement("option",{"aria-label":"None",value:""}),[0,10,20,30,40,50,60,70,80,90,100].map((function(e){return o.a.createElement("option",{key:e,value:e},e," %")}))))),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Task Date")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(Ot.a,{disableToolbar:!0,variant:"inline",format:"YYYY-MM-DD",margin:"normal",id:"task-date",label:"Task date",value:w?K()(w):null,onChange:function(e,t){return ce(t,"taskDate")},style:{width:"100%",marginBottom:15,marginTop:0}})),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Task end")),o.a.createElement(vt.a,{item:!0,xs:8},o.a.createElement(Ot.a,{disableToolbar:!0,variant:"inline",format:"YYYY-MM-DD",margin:"normal",id:"task-end",label:"Task end",value:S?K()(S):null,onChange:function(e,t){return ce(t,"taskEndDate")},style:{width:"100%",marginBottom:15,marginTop:0}})),o.a.createElement(vt.a,{item:!0,xs:4},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Description")),o.a.createElement(vt.a,{item:!0,xs:8,style:{width:"100%",marginBottom:15,border:"1px solid #C4C4C4",borderRadius:4}},o.a.createElement(St,{placeholder:"editor",content:F||"",onContentChange:function(e){return function(e){M(e)}(e)},onDescriptionChange:function(e){return function(e){oe(Object(u.a)(Object(u.a)({},h),{},{description:e}))}(e)}})),c&&c.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(vt.a,{item:!0,xs:12},o.a.createElement(R.a,{variant:"overline",className:L.typography,display:"block",gutterBottom:!0},"Attachments")),o.a.createElement(vt.a,{item:!0,xs:12},o.a.createElement(ta,{files:c,maxFiles:i,removeAttachment:s,downloadAttachment:m})))),o.a.createElement(vt.a,{item:!0,xs:12},o.a.createElement(At,{limit:q.limit,offset:q.offset,total:q.total,comments:Y,loadComment:ue,removeComment:function(e){return de(e)},userId:n})),o.a.createElement(vt.a,{className:L.drawerFooter},o.a.createElement(vt.a,null,o.a.createElement(B.a,{InputProps:{fullWidth:!0},name:"name",placeholder:"Comment",variant:"outlined",value:ae,onChange:function(e){return ne(e.target.value)}})),o.a.createElement(vt.a,null,o.a.createElement(H.a,{variant:"contained",color:"primary",className:Q()(L.commentBtnActive,Object(P.a)({},L.commentBtnDisable,!ae)),onClick:me},"Add"))),o.a.createElement(Vt,Object.assign({},G,{closeSnackbar:function(){Z(Object(u.a)(Object(u.a)({},G),{},{open:!1}))}})))}var zn=Object($.a)((function(e){return{root:{height:"100%",overflow:"hidden"},title:{display:"flex",alignItems:"center"},input:{padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%"},toolbar:{padding:"8px 12px",textAlign:"left",display:"flex",height:50,boxSizing:"border-box",justifyContent:"space-between"},contentWrapper:{height:"calc(100% - ".concat(50,"px)"),width:"100%",display:"flex",backgroundColor:"white",overflow:"auto",flexDirection:"column"},checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardTask:Object(P.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1)}),checkIconButton:{padding:e.spacing(1)},cardItem:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative"},arrowIcon:{color:"black"},column:{backgroundColor:"#fafafa",margin:8,position:"relative",boxShadow:"none"},addTaskButton:{textTransform:"none",borderRadius:0,borderTopLeftRadius:5,borderBottomLeftRadius:5},menuButton:{padding:5,borderRadius:0,border:"0.5px solid #9EA7DA",marginLeft:2,marginRight:10,borderTopRightRadius:5,borderBottomRightRadius:5,"&:hover":{border:"0.5px solid #3F51B5"}},drawer:{flexShrink:0,height:"100%",overflow:"hidden"},drawerPaper:Object(P.a)({width:500},e.breakpoints.only("xs"),{width:300}),drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{position:"fixed",justifyContent:"flex-start",width:"100%",height:50,boxSizing:"border-box",minHeight:"".concat(50,"px !important"),boxShadow:e.shadows[4]}),formView:{height:"calc(100% - ".concat(50,"px - 66px)"),marginTop:50,overflowY:"auto"},addSectionButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},commentInput:{display:"flex",flex:1,border:"none",color:"rgb(175,175,175)",fontSize:"11pt"},commentInputContainer:{display:"flex",border:"solid 1px #F7F7F7",height:38},toolbarHeader:{minWidth:216,borderLeft:"1px solid #E8ECEE",borderTop:"1px solid #E8ECEE",borderBottom:"1px solid #E8ECEE",padding:16,background:"white",textAlign:"left",cursor:"pointer"},spacer:{padding:8},taskNameHeader:{minWidth:430,width:"100%",position:"sticky",left:0,background:"white",zIndex:500},parentHeader:{display:"flex",padding:"0px 8px",position:"sticky",top:0,zIndex:500,width:"100%",background:"white"},stickyElement:{minWidth:430,width:"100%",display:"flex",alignItems:"center",position:"sticky",zIndex:300,left:0,padding:"0px 8px",background:"white"},btnParent:{minWidth:430,maxWidth:430,position:"sticky",left:0,padding:"0px 16px",textAlign:"left"},section:{minWidth:430,position:"sticky",left:0,width:"fit-content",background:"white",zIndex:200}}})),Hn=function(e){return e.title||e.autoTitle||e.name};function Wn(e,t){var a=t.modelField||e.name,n=t.type||t.jsonType,r="::".concat(t.jsonType||"text");return t.target&&t.targetName&&(r=""),Object(u.a)(Object(u.a)({},t),{},{title:"".concat(Hn(t)," ").concat(Hn(e)&&"(".concat(Hn(e),")")),name:"".concat(a,".").concat(t.name).concat(r),type:n.replace(/-/g,"_").toUpperCase()})}function qn(e){var t=e.record,a=e.onEdit,n=zn(),i=Object(r.useState)({name:t.name,status:t.status}),c=Object(I.a)(i,2),l=c[0],s=c[1],d=o.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a,n))}))}),[]),m=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(n){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.stopPropagation(),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{status:"closed"===e.status?"new":"closed"})})),e.next=4,Ie(Object(u.a)(Object(u.a)({},t),{},{status:"closed"===l.status?"new":"closed"}));case 4:(r=e.sent)&&a(Object(u.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,l,t]),p=o.a.useCallback(Object(T.a)(D.a.mark((function e(){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===l.name){e.next=5;break}return e.next=3,Ie(Object(u.a)(Object(u.a)({},t),{},{name:l.name}));case 3:n=e.sent,a(Object(u.a)({},n));case 5:case"end":return e.stop()}}),e)}))),[l,a,t]);return Object(r.useEffect)((function(){s(t)}),[t]),o.a.createElement("div",{className:n.cardTask},o.a.createElement(F.a,{size:"small",onClick:m,className:n.checkIconButton},o.a.createElement(ie.a,{fontSize:"small",style:{color:"closed"===l.status?"#25e8c8":"#b4b6b8"},className:n.checkedIcon})),o.a.createElement(B.a,{onClick:function(e){return e.stopPropagation()},onChange:d,onBlur:p,name:"name",value:l.name,InputProps:{disableUnderline:!0},className:n.input,style:{marginRight:2}},t.name))}var _n=o.a.forwardRef((function(e,t){var a=e.onDelete,n=e.record,i=e.style,c=e.Card,l=e.canDelete,s=(e.canEdit,e.onEdit),d=e.disabled,m=e.dragHandleProps,p=void 0===m?{}:m,f=e.handleDrawerOpen,b=e.menuList,v=void 0===b?{}:b,h=e.project,g=void 0===h?{}:h,O=Object(N.a)(e,["onDelete","record","style","Card","canDelete","canEdit","onEdit","disabled","dragHandleProps","handleDrawerOpen","menuList","project"]),C=Object(r.useState)(null),j=Object(I.a)(C,2),y=j[0],E=j[1],x=Object(r.useState)(!1),k=Object(I.a)(x,2),w=k[0],S=k[1],B=o.a.useState(!1),R=Object(I.a)(B,2),z=R[0],H=R[1],W=zn(),q=function(){E(null)},_=o.a.useCallback((function(e){H(!0)}),[]),U=o.a.useCallback((function(e){e&&e.stopPropagation(),H(!1)}),[]),V=o.a.useCallback((function(e){e.stopPropagation(),U(),a()}),[a,U]),Y=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(t,a,r){var o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(Object(u.a)(Object(u.a)({},n),{},Object(P.a)({},t,a)));case 2:o=e.sent,s(Object(u.a)({},o));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[s,n]);return o.a.createElement(L.a,Object.assign({ref:t},O,{className:Q()(W.cardItem,W.card),style:Object(u.a)({},i),onMouseEnter:function(){S(!0)},onMouseLeave:function(){S(!1)}}),o.a.createElement("div",{className:W.stickyElement,onClick:function(){return f(n)}},o.a.createElement("div",{className:W.title},o.a.createElement("div",p,o.a.createElement(re.a,{className:W.dragHandle,style:{visibility:w?"visible":"hidden"}})),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(c,{record:n,onEdit:s}),o.a.createElement("div",null,!d&&o.a.createElement(o.a.Fragment,null,o.a.createElement(F.a,{onClick:function(e){e.stopPropagation(),E(e.currentTarget)},size:"small"},o.a.createElement(ae.a,{style:{fontSize:15}})),o.a.createElement(A.a,{anchorEl:y,open:Boolean(y),onClose:q},l&&o.a.createElement(M.a,{onClick:function(e){e.stopPropagation(),q(),_()}},"Delete"))))))),o.a.createElement("div",{style:{display:"flex",width:"fit-content",alignItems:"center"}},v.isPriority&&o.a.createElement("div",{className:W.spacer},o.a.createElement(ha,{value:n.priority,name:"priority",options:Bn,onChange:function(e,t){return Y("priority",e,t)}})),v.isStatus&&o.a.createElement("div",{className:W.spacer},o.a.createElement(ha,{value:n.status,name:"status",options:Ln,onChange:function(e,t){return Y("status",e,t)}})),v.isProject&&o.a.createElement("div",{className:W.spacer},o.a.createElement(ra,{model:"com.axelor.apps.project.db.Project",title:"Project",name:"project",optionLabel:"fullName",value:n.project,onChange:function(e,t){return Y("project",e,t)}})),v.isAssignedTo&&o.a.createElement("div",{className:W.spacer},o.a.createElement(ra,{model:"com.axelor.auth.db.User",title:"Assigned To",optionLabel:"fullName",name:"assignedTo",value:n.assignedTo,onChange:function(e,t){return Y("assignedTo",e,t)},options:g.membersUserSet})),v.isTaskDate&&o.a.createElement("div",{className:W.spacer},o.a.createElement(fa,{value:n.taskDate,name:"taskDate",label:"Task date",onChange:function(e,t){return Y("taskDate",e,t)}})),v.isTaskEndDate&&o.a.createElement("div",{className:W.spacer},o.a.createElement(fa,{value:n.taskEndDate,name:"taskEndDate",label:"Task end",onChange:function(e,t){return Y("taskEndDate",e,t)}}))),o.a.createElement(da,{open:z,onClose:U,onConfirm:V,title:"Delete Task"}))}));_n.defaultProps={onDelete:function(){},record:{},style:{},Card:qn,canDelete:!0,canEdit:!0,onEdit:function(){},disabled:!1};var Un=o.a.memo((function(e){var t=e.onCardDelete,a=e.disabled,n=e.onCardEdit,r=e.Card,i=e.column,c=e.Draggable,l=e.CardItem,s=e.handleDrawerOpen,d=e.menuList,m=e.isScroll,p=e.project,f=i.canMove,b=void 0===f||f,v=i.canDelete,h=void 0===v||v,g=i.canEdit,O=void 0===g||g;return i.records?i.records.map((function(e,f){return o.a.createElement(c,{key:"".concat(e.id),draggableId:"task_".concat(e.id),index:f,isDragDisabled:!b||a},(function(c){return o.a.createElement(l,Object.assign({key:e.id,ref:c.innerRef},c.draggableProps,{dragHandleProps:c.dragHandleProps,Card:r,canDelete:h,canEdit:O,record:e,disabled:a,style:Object(u.a)(Object(u.a)({},c.draggableProps.style),{},{width:m?"fit-content":"100%"}),onDelete:function(){return t({record:e,column:i})},onEdit:function(e){return n({record:e,column:i})},handleDrawerOpen:s,menuList:d,project:p}))}))})):o.a.createElement(o.a.Fragment,null)}));function Vn(e){var t=e.onCardDelete,a=e.disabled,n=e.Card,r=e.scrollableColumn,i=e.gutterBottom,c=e.onCardEdit,l=e.column,s=e.Droppable,d=e.InnerCardList,m=e.handleDrawerOpen,p=e.CardListStyle,f=e.menuList,b=e.isScroll,v=e.project,h=l.canDrop,g=void 0===h||h;return o.a.createElement(s,{droppableId:"".concat(l.id),isDropDisabled:!g||a},(function(e){return o.a.createElement("div",Object.assign({style:Object(u.a)({display:"flex",flexDirection:"column"},p)},e.droppableProps),o.a.createElement("div",{style:Object(u.a)({marginBottom:i?60:0,marginTop:4},r?{overflowX:"hidden",overflowY:"auto",padding:8,maxHeight:"".concat(200,"px")}:{}),ref:e.innerRef},o.a.createElement(d,{disabled:a,Card:n,column:l,onCardEdit:c,onCardDelete:t,handleDrawerOpen:m,menuList:f,isScroll:b,project:v}),e.placeholder))}))}function Yn(e){var t=e.column,a=e.onColumnToggle,n=e.onColumnDelete,i=e.onColumnUpdate,c=e.ColumnHeader,l=(e.ColumnCollapsed,e.disabled),s=e.disableColumnCollapse,d=e.disableColumnDelete,m=e.customHeader,p=e.menuList,f=e.isScroll,b=Object(N.a)(e,["column","onColumnToggle","onColumnDelete","onColumnUpdate","ColumnHeader","ColumnCollapsed","disabled","disableColumnCollapse","disableColumnDelete","customHeader","menuList","isScroll"]),v=t.name,h=t.collapsed,g=void 0!==h&&h,O=Object(r.useState)(!1),C=Object(I.a)(O,2),j=C[0],y=C[1],E=Object(r.useState)({name:v}),x=Object(I.a)(E,2),k=x[0],w=x[1],S=o.a.useState(!1),A=Object(I.a)(S,2),M=A[0],R=A[1],z=t.records&&t.records.length,H=Object.keys(p).filter((function(e){return!0===p[e]})).length,W=o.a.useCallback((function(e){R(!0)}),[]),q=o.a.useCallback((function(e){e&&e.stopPropagation(),R(!1)}),[]),_=o.a.useCallback((function(){q(),n({column:t})}),[n,t,q]),U=zn(),V=o.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;w((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a,n))}))}),[]),Y=o.a.useCallback(Object(T.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===k.name&&""!==v){e.next=6;break}return""===k.name&&w({name:"Untitled Section"}),e.next=4,ze(Object(u.a)(Object(u.a)({},t),{},{name:k.name}));case 4:a=e.sent,i({column:Object(u.a)(Object(u.a)({},t),a)});case 6:case"end":return e.stop()}}),e)}))),[k,i,t,v]);return m?o.a.createElement(c,Object.assign({},b,{style:{width:"100%"}})):o.a.createElement(L.a,Object.assign({style:{display:"flex",padding:8,alignItems:"center",transition:"transform 0.3s, margin 0.2s",justifyContent:"space-between",boxShadow:"none",width:f?"fit-content":"100%",borderTop:g?"":"1px solid #E8ECEE",borderBottom:g?"":"1px solid #E8ECEE",borderRadius:"0",position:"relative"}},b,{onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1)}}),o.a.createElement("div",{className:Q()(U.title,U.section)},o.a.createElement(re.a,{className:U.dragHandle,style:{visibility:j?"visible":"hidden"}}),!s&&o.a.createElement(F.a,{onClick:function(){return a({column:t})},style:{padding:"0px 12px"}},g?o.a.createElement(le.a,{className:U.arrowIcon}):o.a.createElement(ae.a,{className:U.arrowIcon})),o.a.createElement(B.a,{onChange:V,onBlur:Y,name:"name",value:k.name,InputProps:{disableUnderline:!0},className:U.input,placeholder:"Add Section"},v),o.a.createElement("div",{style:{visibility:j?"visible":"hidden"}},!l&&!d&&o.a.createElement(F.a,{onClick:W,style:{padding:0}},o.a.createElement(ee.a,null)))),o.a.createElement("div",{style:{minWidth:216*H}}),o.a.createElement(da,{open:M,onClose:q,title:"Delete Section",content:z?"Cannot delete section with tasks":"Do you want to delete record ?",onConfirm:_,disabled:Boolean(z)}))}function Xn(e){var t=e.ColumnFooter,a=e.column;return o.a.createElement("div",{style:{position:"absolute",bottom:0,height:60}},o.a.createElement(t,{column:a}))}function Kn(e){var t=e.index,a=e.column,n=e.components,r=e.onColumnToggle,i=e.onColumnDelete,c=e.onColumnUpdate,l=e.disabled,s=e.scrollableColumn,u=e.onCardDelete,d=(e.onCardAdd,e.disableDrag),m=e.onCardEdit,p=e.disableColumnCollapse,f=e.disableColumnDelete,b=e.Draggable,v=e.Header,h=e.CardList,g=e.Footer,O=e.handleDrawerOpen,C=e.customHeader,j=e.CardListStyle,y=e.menuList,E=e.isScroll,x=e.project,k=a.collapsed,w=void 0!==k&&k,N=a.id,S=zn();return o.a.createElement(b,{draggableId:"column_".concat(N),index:t,isDragDisabled:d||l},(function(e){return o.a.createElement("div",Object.assign({},e.draggableProps,{ref:e.innerRef}),o.a.createElement(L.a,{className:S.column},o.a.createElement(v,Object.assign({onColumnToggle:r,ColumnHeader:n.ColumnHeader,ColumnCollapsed:n.ColumnCollapsed,onColumnDelete:i,onColumnUpdate:c,disabled:l,column:a},e.dragHandleProps,{disableColumnCollapse:p,disableColumnDelete:f,customHeader:C,menuList:y,isScroll:E})),!w&&o.a.createElement(z.a,{in:!0,timeout:500},o.a.createElement("div",null,o.a.createElement(h,{column:a,disabled:l,Card:n.Card,onCardEdit:m,onCardDelete:u,scrollableColumn:s,gutterBottom:n.ColumnFooter,handleDrawerOpen:O,CardListStyle:j,menuList:y,isScroll:E,project:x}),o.a.createElement(g,{ColumnFooter:n.ColumnFooter,disabled:l,column:a})))))}))}function Jn(e){var t=e.columns,a=e.readOnly,n=e.components,i=e.scrollableColumn,c=e.disableColumnDrag,l=(e.disableColumnAdd,e.disableColumnCollapse),s=e.disableColumnDelete,d=e.onCardAdd,m=e.onCardMove,p=e.onCardEdit,f=e.onCardDelete,b=e.onColumnAdd,v=e.onColumnMove,h=e.onColumnToggle,g=e.onColumnDelete,O=e.onColumnUpdate,C=e.DragDropContext,j=e.Droppable,y=e.Column,E=e.handleDrawerOpen,x=e.sections,k=void 0===x?[]:x,w=e.searchFilter,N=e.filters,S=e.handleChangeFilter,B=e.handleSaveFilter,R=e.handleDeleteFilter,Y=e.handleContentSearch,X=e.fields,K=void 0===X?[]:X,J=e.addNewTask,$=e.sortColumn,G=e.project,Z=o.a.useState(null),ee=Object(I.a)(Z,2),te=ee[0],ae=ee[1],ne=Boolean(te),re=o.a.useState({isProject:!1,isAssignedTo:!0,isPriority:!1,isStatus:!1,isTaskDate:!1,isTaskEndDate:!1}),oe=Object(I.a)(re,2),ie=oe[0],ce=oe[1],le=Object(r.useState)(!1),se=Object(I.a)(le,2),de=se[0],me=se[1],pe=function(e){e.stopPropagation(),ce(Object(u.a)(Object(u.a)({},ie),{},Object(P.a)({},e.target.name,e.target.checked)))};window.addEventListener("resize",(function(){var e=document.getElementById("BOARD"),t=e.scrollWidth>e.clientWidth;de!==t&&me(t)}));var be=o.a.useCallback((function(e){return t.find((function(t){return Number(t.id)===Number(e)}))}),[t]),ve=o.a.useCallback((function(e){var a=e.source,n=e.destination,r=e.type;if(n&&(a.droppableId!==n.droppableId||a.index!==n.index))if("COLUMN"!==r){var o=be(a.droppableId),i=be(n.droppableId),c=be(a.droppableId).records[a.index];m({column:i,source:o,record:c,index:n.index})}else{if(0===n.index)return;v({column:t[a.index],index:n.index})}}),[t,m,be,v]),he=o.a.useRef(null),Oe=Object(r.useState)(!1),Ce=Object(I.a)(Oe,2),je=Ce[0],ye=Ce[1],we=zn(),Ne=function(e){he.current&&he.current.contains(e.target)||ye(!1)},Se=function(){var e=Object(T.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me({name:"",sequence:k.length+1});case 2:(t=e.sent)&&b({column:Object(u.a)(Object(u.a)({},t),{},{records:[]})});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De={disableDrag:!0,disableColumnAdd:!0,disableColumnCollapse:!0,disableColumnDelete:!0,customHeader:!0,CardListStyle:{backgroundColor:"white"}};return o.a.createElement(C,{onDragEnd:ve},o.a.createElement("div",{className:we.toolbar},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(H.a,{variant:"outlined",color:"primary",onClick:J,className:we.addTaskButton,startIcon:o.a.createElement(fe.a,null)},"Add Task"),o.a.createElement(F.a,{ref:he,"aria-controls":je?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){ye((function(e){return!e}))},className:we.menuButton},o.a.createElement(ue.a,{style:{color:"#3F51B5"}})),o.a.createElement(Fn,{fields:K,domain:[],handleChange:S,onSave:B,onDelete:R,filters:N,value:w,onContentSearch:Y})),o.a.createElement("div",null,o.a.createElement(H.a,{"aria-controls":"fade-menu","aria-haspopup":"true",variant:"outlined",color:"primary",onClick:function(e){ae(e.currentTarget)},startIcon:o.a.createElement(ge.a,null),style:{textTransform:"none"}},"Fields"),o.a.createElement(A.a,{id:"fade-menu",anchorEl:te,keepMounted:!0,open:ne,onClose:function(){ae(null)},TransitionComponent:z.a},An.map((function(e){return o.a.createElement(M.a,{key:e},o.a.createElement(W.a,{checked:ie["is".concat(e)],onChange:pe,color:"primary",name:"is".concat(e),inputProps:{"aria-label":"primary checkbox"}}),e)}))))),o.a.createElement(j,{droppableId:"board",type:"COLUMN",direction:"vertical"},(function(e){return o.a.createElement("div",Object.assign({id:"BOARD",ref:e.innerRef},e.droppableProps,{className:we.contentWrapper}),o.a.createElement("div",{className:we.parentHeader,style:{width:de?"fit-content":"100%",position:"relative"}},o.a.createElement("div",{className:Q()(we.toolbarHeader,we.taskNameHeader),onClick:function(){return $("name",Ee)}},"Task Name"),ie.isPriority&&o.a.createElement("div",{className:we.toolbarHeader,onClick:function(){return $("priority",Ee)}},"Priority"),ie.isStatus&&o.a.createElement("div",{className:we.toolbarHeader,onClick:function(){return $("status",Ee)}},"Status"),ie.isProject&&o.a.createElement("div",{className:we.toolbarHeader,onClick:function(){return $("project",ke,"fullName")}},"Project"),ie.isAssignedTo&&o.a.createElement("div",{className:we.toolbarHeader,onClick:function(){return $("assignedTo",ke,"fullName")}},"Assigned To"),ie.isTaskDate&&o.a.createElement("div",{className:we.toolbarHeader,onClick:function(){return $("taskDate",xe)}},"Task Date"),ie.isTaskEndDate&&o.a.createElement("div",{className:we.toolbarHeader,onClick:function(){return $("taskEndDate",xe)}},"Task End")),t.map((function(e,t){return o.a.createElement(y,Object.assign({key:e.id,index:t,column:e,disabled:a,components:n,onCardAdd:d,onCardEdit:p,onCardDelete:f,onColumnDelete:g,onColumnUpdate:O,onColumnToggle:h,disableDrag:c,scrollableColumn:i,disableColumnCollapse:l,disableColumnDelete:s,handleDrawerOpen:E,menuList:ie,isScroll:de,project:G},-1===e.id?De:{}))})),o.a.createElement("div",{className:we.btnParent},o.a.createElement(H.a,{startIcon:o.a.createElement(fe.a,null),className:we.addSectionButton,onClick:Se},"Add Section")),e.placeholder)})),o.a.createElement(q.a,{open:je,anchorEl:he.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:900}},(function(e){var t=e.TransitionProps;return o.a.createElement(_.a,Object.assign({},t,{style:{transformOrigin:"right bottom"}}),o.a.createElement(L.a,null,o.a.createElement(U.a,{onClickAway:Ne},o.a.createElement(V.a,{autoFocusItem:je,id:"menu-list-grow"},o.a.createElement(M.a,{onClick:function(e){Se(),Ne(e)}},"Add Section")))))})))}function $n(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(I.a)(r,1)[0];return n.splice(a,0,o),n}Un.defaultProps={onCardDelete:function(){},disabled:!1,onCardEdit:function(){},Card:qn,column:{},Draggable:J.b,CardItem:_n},Vn.defaultProps={onCardDelete:function(){},disabled:!1,Card:qn,scrollableColumn:!1,gutterBottom:!1,onCardEdit:function(){},column:{},Droppable:J.c,InnerCardList:Un,CardListStyle:{}},Yn.defaultProps={column:{},onColumnToggle:function(){},onColumnDelete:function(){},onColumnUpdate:function(){},customHeader:!1,ColumnHeader:function(e){var t=e.title;return o.a.createElement(R.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},o.a.createElement("b",null,t))},ColumnCollapsed:function(e){var t=e.title;return o.a.createElement(R.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},o.a.createElement("b",null,t))},disabled:!1},Xn.defaultProps={ColumnFooter:function(){return null}},Kn.defaultProps={index:null,column:{},components:{},onColumnToggle:function(){},onColumnDelete:function(){},onColumnUpdate:function(){},disabled:!1,scrollableColumn:!1,onCardDelete:function(){},onCardAdd:function(){},disableDrag:!1,onCardEdit:function(){},Draggable:J.b,Header:Yn,CardList:Vn,Footer:Xn,customHeader:!1,CardListStyle:{}},Jn.defaultProps={columns:[],readOnly:!1,components:{},scrollableColumn:!1,disableColumnDrag:!1,disableColumnAdd:!1,disableColumnCollapse:!1,disableColumnDelete:!1,onCardAdd:function(){},onCardMove:function(){},onCardEdit:function(){},onCardDelete:function(){},onColumnAdd:function(){},onColumnMove:function(){},onColumnToggle:function(){},onColumnDelete:function(){},onColumnUpdate:function(){},addNewTask:function(){},DragDropContext:J.a,Droppable:J.c,Column:Kn};var Gn=function(){var e=Object(T.a)(D.a.mark((function e(){var t,a=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Ie(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qn=function(){var e=Object(T.a)(D.a.mark((function e(){var t,a=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return ze(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Zn(e){return er.apply(this,arguments)}function er(){return(er=Object(T.a)(D.a.mark((function e(t){var a,n,r,o,i,c,l,s,m,p,f,b,v,h,g,O,C,j,y,E,x,k,w,N,S,T,P,F,B;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.columns,n=t.sourceColumn,r=t.destinationColumn,o=t.sourceIndex,i=t.destinationIndex,c=function(e){return a.findIndex((function(t){return t.id===e}))},s=function(e,t){return t.find((function(t){return t.id===e})).sequence},m=function(e,t){return(t.find((function(t){return t.id===e})).teamTaskSection||{}).id},p=function(e){return e.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:t+1})}))},f=function(e,t){var a=e.filter((function(e){return e.sequence!==s(e.id,t)||(e.teamTaskSection||{}).id!==m(e.id,t)}));return[a,a.map((function(e){return e.id}))]},b=function(e,t){return e.map((function(e){return t.includes(e.id)?Object(u.a)(Object(u.a)({},e),{},{version:e.version+1}):e}))},v=(l=function(e){return Object(d.a)(a.find((function(t){return t.id===e})).records||[])})(n.id),h=l(r.id),g=v[o],n.id!==r.id){e.next=18;break}return O=p($n(v,o,i)),C=f(O,v),j=Object(I.a)(C,2),y=j[0],E=j[1],x=b(O,E),(k=Array.from(a))[c(n.id)].records=x,e.abrupt("return",[k,Gn(y)]);case 18:return v.splice(o,1),h.splice(i,0,g),w=p(h).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{teamTaskSection:-1===r.id?null:{id:r.id}})})),N=f(w,h),S=Object(I.a)(N,2),T=S[0],P=S[1],F=b(w,P),(B=Array.from(a))[c(n.id)].records=v,B[c(r.id)].records=F,e.abrupt("return",[B,Gn(T)]);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tr=function(e,t){if(!e||e.length)return Ee(e&&(e.filter((function(e){return e.teamTaskSection&&e.teamTaskSection.id===t.id}))||[]),"sequence")};var ar=function(e){var t=Object(r.useState)(Object(u.a)({},e)),a=Object(I.a)(t,2),n=a[0],i=a[1],c=(n||{}).columns,l=void 0===c?[]:c,s=zn(),m=Object(r.useState)(!1),p=Object(I.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(null),h=Object(I.a)(v,2),g=h[0],O=h[1],C=Object(r.useState)(null),j=Object(I.a)(C,2),y=j[0],E=j[1],x=Object(r.useState)(null),k=Object(I.a)(x,2),w=k[0],N=k[1],S=Object(r.useState)(null),P=Object(I.a)(S,2),B=P[0],L=P[1],A=Object(r.useState)(),M=Object(I.a)(A,2),R=M[0],z=M[1],H=o.a.useState([]),W=Object(I.a)(H,2),q=W[0],_=W[1],U=o.a.useState(),V=Object(I.a)(U,2),X=V[0],J=V[1],$=Object(r.useState)([]),G=Object(I.a)($,2),Q=G[0],Z=G[1],ee=Object(r.useState)({message:"",open:!1,severity:"success"}),te=Object(I.a)(ee,2),ae=te[0],ne=te[1],re=o.a.useState([]),oe=Object(I.a)(re,2),ie=oe[0],ce=oe[1],le=Object(r.useState)([]),se=Object(I.a)(le,2),ue=se[0],de=se[1],pe=Object(r.useState)(null),fe=Object(I.a)(pe,2),be=fe[0],he=fe[1],ge=function(e){var t=e.severity,a=e.message;ne({open:!0,severity:t,message:a})},Oe=o.a.useCallback((function(e){return z(e)}),[]),Ce=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t);case 2:return a=e.sent,_((function(e){return-1===e.find((function(e){return e.id===a.id}))&&e.push(a),Object(d.a)(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),je=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t);case 2:_((function(e){var a=e.find((function(e){return e.id===t.id}));return-1!==a&&e.splice(a,1),Object(d.a)(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),xe=o.a.useCallback((function(e){J(e)}),[]),ke=function(){var e=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(Object(u.a)({},t)),e.next=3,st(t.id);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:a=e.t0,Z(a),b(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n,r,o,i,c,l,s=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:0,n=Ne(t),o=a+(r=1e5)<n&&n.size?a+r:n&&n.size,i=n&&n.slice(a,o),c=Te(t,a),e.next=8,ct(i,c);case 8:(l=e.sent)&&l.id?Ie(l):a<n&&n.size&&(l.fileId&&(t.id=l.fileId),we(t,r+a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(e){return e.file},Te=function(e,t){var a=e.file;if(a){var n={"X-File-Name":a.name,"X-File-Offset":t,"X-File-Size":a.size,"X-File-Type":a.type,"X-CSRF-Token":ye("CSRF-TOKEN")};return e.id&&(n["X-File-Id"]=e.id),n}},Ie=function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={fileName:t.fileName,metaFile:{id:t.id},relatedId:g.id,relatedModel:"com.axelor.team.db.TeamTask"},e.next=3,ot(a);case 3:(n=e.sent)&&n.length?(Z([].concat(Object(d.a)(Q||[]),[n[0]])),ge({severity:"success",message:"Uploaded successfully"})):ge({severity:"error",message:"Error in upload"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(t){return Array.prototype.slice.call(t).slice(0,e.maxFiles).map((function(e,t){for(var a=[],n=0;n<=e.size/524288;n+=1)a.push(0);return{file:e,index:t,progress:0,cancelled:!1,completed:!1,chunkProgress:a,error:!1,totalUploaded:0}}))},Be=function(){var e=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt([{id:t.id,version:t.version}]);case 2:e.sent?(a=Q.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(t)})),Q.splice(a,1),Z(Q),ge({severity:"success",message:"Deleted successfully"})):ge({severity:"error",message:"Error"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=o.a.useCallback((function(e){!function(e){pt.apply(this,arguments)}(e)}),[]),Me=function(e){return e.columns.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{records:Object(d.a)(e.records||[])})}))},Re=o.a.useCallback((function(e){return l.findIndex((function(t){return t.id===e}))}),[l]),ze=o.a.useCallback((function(e,t){return l[Re(t)].records.findIndex((function(t){return t.id===e}))}),[l,Re]),He=o.a.useCallback((function(e){var t=e.column;-1===Re(t.id)?i((function(e){return{columns:[].concat(Object(d.a)(e.columns),[Object(u.a)({},t)])}})):alert("Column with same name already exists.")}),[Re]),qe=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(t){var a,n,r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,n=t.record,e.next=3,Fe(n.id);case 3:200===e.sent.status&&(r=Re(a.id),o=ze(n.id,a.id),i((function(e){var t=Me(e);return t[r].records.splice(o,1),{columns:t}})),ge({severity:"success",message:"Task Deleted Successfully"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Re,ze]),_e=o.a.useCallback((function(e){e.column,e.record}),[]),Ue=o.a.useCallback((function(e){var t=e.column,a=e.record,n=Re(t.id),r=ze(a.id,t.id);i((function(e){var t=Me(e);return t[n].records[r]=Object(u.a)({},a),{columns:t}})),O(Object(u.a)({},a))}),[Re,ze]),Ve=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(t){var a,r,o,c,s,d,m,p;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,r=t.index,o=t.source,c=t.record,s=Me(n),e.next=4,Zn({columns:l,destinationColumn:a,destinationIndex:r,sourceColumn:o,sourceIndex:ze(c.id,o.id)});case 4:d=e.sent,m=Object(I.a)(d,2),p=m[0],m[1].then((function(e){return e.some((function(e){return-1===e.status}))})).then((function(e){e&&(i((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:s})})),ge({severity:"error",message:"Error updating task due to concurrent issue. Kindly refresh"}))})),i({columns:p}),O(Object(u.a)({},c));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,ze,n]),Ye=o.a.useCallback((function(e){var t=e.column,a=e.index,r=Me(n),o=$n(l,Re(t.id),a).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:0===t?0:t+1})})),c=o.filter((function(e){return e.sequence!==(t=e.id,r.find((function(e){return e.id===t})).sequence);var t}));Qn(c).then((function(e){return e.some((function(e){return-1===e.status}))})).then((function(e){e&&(i((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:r})})),ge({severity:"error",message:"Error updating section due to concurrent issue. Kindly refresh"}))}));var s=c.map((function(e){return e.id})),d=o.map((function(e){return s.includes(e.id)?Object(u.a)(Object(u.a)({},e),{},{version:e.version+1}):e}));i((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:d})}))}),[l,Re,n]),Ke=o.a.useCallback((function(e){var t=e.column,a=Re(t.id);i((function(e){var t=Me(e);return t[a].collapsed=!t[a].collapsed,{columns:t}}))}),[Re]),$e=o.a.useCallback((function(e){var t=e.column,a=Re(t.id);i((function(e){var n=Me(e);return n[a].name=t.name,n[a].version=t.version,{columns:n}}))}),[Re]),Qe=o.a.useCallback(function(){var e=Object(T.a)(D.a.mark((function e(t){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,e.next=3,We(a.id);case 3:200===e.sent.status&&(i((function(e){var t=Me(e);return t.splice(Re(a.id),1),{columns:t}})),ge({severity:"success",message:"Section Deleted Successfully"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Re]),et=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xe({id:g.id,entityModel:"com.axelor.team.db.TeamTask",body:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(T.a)(D.a.mark((function e(){var t,a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t=1,a=n.columns&&n.columns[o]){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,De({name:"New Task",sequence:1,project:{id:w},taskDate:K()(),priority:"normal",assignedTo:{id:B&&B["user.id"]},status:"new",teamTaskSection:-1===a.id?null:{id:a.id}});case 7:(r=e.sent)&&(i((function(e){return{columns:e.columns.map((function(e,a){return a===t?Object(u.a)(Object(u.a)({},e),{},{records:[r].concat(Object(d.a)(e.records||[]))}):e}))}})),ge({severity:"success",message:"Task Added Successfully"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),ge({severity:"error",message:"Error Adding New Task"});case 14:case"end":return e.stop()}var o}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Object(T.a)(D.a.mark((function e(){var t,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){for(var e,t=/[?&]id=([^&#]*)/g,a=window.location.href;e=t.exec(a);)return e[1]}(),e.next=4,ft(t);case 4:a=e.sent,N(t),he(a);case 7:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){Object(T.a)(D.a.mark((function e(){var t,a,n,r,o,i,c,l,s,u;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:return t=e.sent,e.next=5,Je();case 5:return a=e.sent,e.next=8,Ge();case 8:return n=e.sent,e.next=11,nt("com.axelor.team.db.TeamTask");case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:r=e.t0,o=r.jsonFields,i=void 0===o?{}:o,c=r.fields,s=(l=void 0===c?[]:c).filter((function(e){return!i[e.name]&&!["id","version"].includes(e.name)})),u=Object.keys(i).reduce((function(e,t){var a=i[t],n=l.find((function(e){return e.name===t}));return[].concat(Object(d.a)(e),Object(d.a)(Object.keys(a).map((function(e){return Wn(n||{name:t},a[e])}))))}),[]),ce([].concat(Object(d.a)(s),Object(d.a)(u))),E(t),L(a),_(n);case 25:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){if(ie.length>0){var e=[];w&&e.push({fieldName:"project.id",operator:"=",value:w}),R&&R.query&&e.push(Object(u.a)({},R.query)),X&&e.push({fieldName:"name",operator:"like",value:X});var t={},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function a(e){var n=e.criteria,r=e.fieldName,o=e.operator,i=e.value;if(n&&Array.isArray(n))return Object(u.a)(Object(u.a)({},e),{},{criteria:n.map(a)});if(r&&o){var c=t.find((function(e){return e.name===r}));if(c&&c.target){var l=c.targetName,s=function(e){return e&&("object"===typeof e?e.id:e)},d="".concat(r).concat(l?".".concat(l):"");return["in","notin"].includes(o.toLowerCase())&&(d="".concat(r,".id")),Object(u.a)(Object(u.a)({},e),{},{fieldName:d,value:Array.isArray(i)?i.map(s):s(i)})}if(["isTrue","isFalse"].includes(o))return Object(u.a)(Object(u.a)({},e),{},{operator:"=",value:"isTrue"===o?"true":"false"})}return e}return a({criteria:e})}(e,ie);a.criteria.length>0&&(t=Object(u.a)(Object(u.a)({},a),{},{operator:"and"})),function(e){return Se.apply(this,arguments)}({data:t}).then(de)}}),[ie,R,X,w]),Object(r.useEffect)((function(){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[{id:-1,sequence:0,records:e&&e.length&&Ee((e||[]).filter((function(e){return!e.teamTaskSection})),"sequence")}];return t&&t.forEach((function(t){a.push(Object(u.a)(Object(u.a)({},t),{},{records:tr(e,t)}))})),Ee(a,"sequence")}(ue,y)||[];i(Object(u.a)({columns:t},e))}),[e,ue,y]),o.a.createElement("div",{className:s.root},o.a.createElement(Jn,Object.assign({columns:l,onCardAdd:_e,onCardEdit:Ue,onCardMove:Ve,onCardDelete:qe,onColumnAdd:He,onColumnMove:Ye,onColumnToggle:Ke,onColumnDelete:Qe,onColumnUpdate:$e,handleDrawerOpen:ke,sections:y,searchFilter:R,filters:q,handleChangeFilter:Oe,handleSaveFilter:Ce,handleDeleteFilter:je,handleContentSearch:xe,fields:ie,addNewTask:at,sortColumn:function(e,t,a){var n=l.map((function(n){return Object(u.a)(Object(u.a)({},n),{},{records:t(n.records,e,a)})}));i((function(){return{columns:Object(d.a)(n)}}))},project:be},e)),o.a.createElement(Y.a,{className:s.drawer,variant:"persistent",anchor:"right",open:f,classes:{paper:s.drawerPaper}},o.a.createElement("div",{className:s.drawerHeader},o.a.createElement(F.a,{onClick:function(){document.getElementById("inputFile").click()}},o.a.createElement(ve.a,null),Q&&Q.length>0&&o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},Q.length),o.a.createElement("input",{id:"inputFile",type:"file",name:"file",multiple:!0,onChange:function(e){var t=Q?Q.concat(Object(d.a)(Pe(e.target.files))):Pe(e.target.files);Z(t),function(e){for(var t=0;t<e.length;t++)e[t].id||we(e[t])}(t)},style:{display:"none"}})),o.a.createElement(F.a,{onClick:function(){O(null),b(!1)}},o.a.createElement(me.a,null))),o.a.createElement("div",{className:s.formView},g&&o.a.createElement(Rn,{task:g,selectedProject:be,onCardEdit:Ue,userId:B&&B["user.id"],userData:B,attachments:Q,addComment:et,removeAttachment:Be,downloadAttachment:Ae}))),o.a.createElement(Vt,Object.assign({},ae,{closeSnackbar:function(){ne(Object(u.a)(Object(u.a)({},ae),{},{open:!1}))}})))},nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,a=e.theme,n={};return"ar"!==t&&"he"!==t||(n.direction="rtl"),"dark"===a&&(n.palette={type:"dark"}),n}({}),rr=nr.direction,or=nr.palette;var ir=function(){return o.a.createElement(k,{direction:rr,palette:or},o.a.createElement(s.a,{utils:l.a},o.a.createElement("div",{className:"app"},o.a.createElement(ar,null))))};a(369);c.a.render(o.a.createElement(ir,null),document.getElementById("root"))}},[[265,1,2]]]);